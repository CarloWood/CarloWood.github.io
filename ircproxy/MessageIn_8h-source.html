<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML LANG="en-us">
 
<HEAD>
<META name="Author" content="Carlo Wood">
<META name="description" content="IRC proxy">
<META name="keywords" content="IRC, proxy, bnc, security, protection">
<META http-equiv="content-type" content="text/html; charset=iso-8859-1">
<TITLE>ircproxy documentation</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="main.css" REL="stylesheet" TYPE="text/css">
</HEAD>

<BODY>

<TABLE class="header" BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR>
<TD WIDTH=120><IMG SRC="images/ircproxy.png" BORDER=0></TD>
<TD VALIGN=center ALIGN=center BGCOLOR="#0A0607"><FONT size=+4 color="#ffffff"><B>&nbsp;ircproxy</B>&nbsp;</FONT>
<FONT size=+3 color="#ffffff">The&nbsp;Ultimate&nbsp;Cyborg</FONT></TD>
</TR>
</TABLE>

<DIV class="normal">
<hr>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>MessageIn.h</h1><a href="MessageIn_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// ircproxy -- An intelligent IRC proxy</span>
<a name="l00002"></a>00002 <span class="comment">//</span><span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">//! @file MessageIn.h</span>
<a name="l00004"></a>00004 <span class="comment">//! @brief Header of class MessageIn</span>
<a name="l00005"></a>00005 <span class="comment"></span><span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Copyright (C) 2005 - 2007 by</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// Carlo Wood, Run on IRC &lt;carlo@alinoe.com&gt;</span>
<a name="l00009"></a>00009 <span class="comment">// RSA-1024 0x624ACAD5 1997-01-26                    Sign &amp; Encrypt</span>
<a name="l00010"></a>00010 <span class="comment">// Fingerprint16 = 32 EC A7 B6 AC DB 65 A6  F6 F6 55 DD 1C DC FF 61</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">// This file may be distributed under the terms of the Q Public License</span>
<a name="l00013"></a>00013 <span class="comment">// version 1.0 as appearing in the file LICENSE.QPL included in the</span>
<a name="l00014"></a>00014 <span class="comment">// packaging of this file.</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#ifndef IRCMESSAGE_H</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#define IRCMESSAGE_H</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef USE_PCH</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "<a class="code" href="debug_8h.html" title="This file contains the declaration of debug related macros, objects and functions...">debug.h</a>"</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;libcw/dbstreambuf.h&gt;</span>  <span class="comment">// msg_block_ct</span>
<a name="l00025"></a>00025 <span class="preprocessor">#ifdef CWDEBUG</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;libcwd/buf2str.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00030"></a>00030 <span class="preprocessor">#include "<a class="code" href="Keyword_8h.html" title="This file contains the declaration of class Keyword.h.">Keyword.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="Prefix_8h.html" title="This file contains the declaration of class Prefix.">Prefix.h</a>"</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">class </span><a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>;
<a name="l00034"></a>00034 <span class="keyword">class </span><a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>;
<a name="l00035"></a>00035 <span class="keyword">class </span><a class="code" href="classMsgPart.html" title="Like MessageIn::Part but with a copy of msg_block_ct to keep the message block alive...">MsgPart</a>;
<a name="l00036"></a>00036 <span class="comment"></span>
<a name="l00037"></a>00037 <span class="comment">/*! @brief</span>
<a name="l00038"></a>00038 <span class="comment"> *</span>
<a name="l00039"></a>00039 <span class="comment"> * An IRC message as received from client or server.</span>
<a name="l00040"></a>00040 <span class="comment"> */</span>
<a name="l00041"></a><a class="code" href="classMessageIn.html">00041</a> <span class="keyword">class </span><a class="code" href="classMessageIn.html" title="An IRC message as received from client or server.">MessageIn</a> {
<a name="l00042"></a>00042 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00043"></a>00043 <span class="comment">  //! Part of an MessageIn.</span>
<a name="l00044"></a><a class="code" href="classMessageIn_1_1Part.html">00044</a> <span class="comment"></span>  <span class="keyword">class </span><a class="code" href="classMessageIn_1_1Part.html" title="Part of an MessageIn.">Part</a> {
<a name="l00045"></a>00045   <span class="keyword">private</span>:
<a name="l00046"></a><a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b">00046</a>     <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b" title="Pointer to the start of the Part.">M_ptr</a>;          <span class="comment">//!&lt; Pointer to the start of the Part.</span>
<a name="l00047"></a><a class="code" href="classMessageIn_1_1Part.html#430d6a8349a3765451b44548f7042bb9">00047</a> <span class="comment"></span>    <span class="keywordtype">size_t</span> <a class="code" href="classMessageIn_1_1Part.html#430d6a8349a3765451b44548f7042bb9" title="The number of characters that belong to this Part.">M_len</a>;               <span class="comment">//!&lt; The number of characters that belong to this Part.</span>
<a name="l00048"></a>00048 <span class="comment"></span>  <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00049"></a>00049 <span class="comment">    //! Construct an uninitialized Part.</span>
<a name="l00050"></a><a class="code" href="classMessageIn_1_1Part.html#24675986512b29ca87e491cd0cf6d79e">00050</a> <span class="comment"></span>    <a class="code" href="classMessageIn_1_1Part.html#24675986512b29ca87e491cd0cf6d79e" title="Construct an uninitialized Part.">Part</a>(<span class="keywordtype">void</span>) { }<span class="comment"></span>
<a name="l00051"></a>00051 <span class="comment">    //! Construct a Part with start \a start and end \a end.</span>
<a name="l00052"></a><a class="code" href="classMessageIn_1_1Part.html#1df6775370d123d8bbf58af9c2db24a8">00052</a> <span class="comment"></span>    <a class="code" href="classMessageIn_1_1Part.html#24675986512b29ca87e491cd0cf6d79e" title="Construct an uninitialized Part.">Part</a>(<span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>, <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#eebf51a59f2fa3e3c14acf4e7281c8d9" title="Return the end (exclusive) of the Part.">end</a>) : <a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b" title="Pointer to the start of the Part.">M_ptr</a>(start), <a class="code" href="classMessageIn_1_1Part.html#430d6a8349a3765451b44548f7042bb9" title="The number of characters that belong to this Part.">M_len</a>(end - start) { }<span class="comment"></span>
<a name="l00053"></a>00053 <span class="comment">    //! Initialize the Part.</span>
<a name="l00054"></a><a class="code" href="classMessageIn_1_1Part.html#b0c8174382216c8af077ce5fbacc66b7">00054</a> <span class="comment"></span>    <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>, <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#eebf51a59f2fa3e3c14acf4e7281c8d9" title="Return the end (exclusive) of the Part.">end</a>) { <a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b" title="Pointer to the start of the Part.">M_ptr</a> = <a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>; <a class="code" href="classMessageIn_1_1Part.html#430d6a8349a3765451b44548f7042bb9" title="The number of characters that belong to this Part.">M_len</a> = <a class="code" href="classMessageIn_1_1Part.html#eebf51a59f2fa3e3c14acf4e7281c8d9" title="Return the end (exclusive) of the Part.">end</a> - <a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>; }<span class="comment"></span>
<a name="l00055"></a>00055 <span class="comment">    //! Initialize an empty Part.</span>
<a name="l00056"></a><a class="code" href="classMessageIn_1_1Part.html#03aab2aa906e9066f1b092872c89059c">00056</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classMessageIn_1_1Part.html#03aab2aa906e9066f1b092872c89059c" title="Initialize an empty Part.">clear</a>(<span class="keywordtype">void</span>) { <a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b" title="Pointer to the start of the Part.">M_ptr</a> = NULL; }<span class="comment"></span>
<a name="l00057"></a>00057 <span class="comment">    //! Return the start of the Part.</span>
<a name="l00058"></a><a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0">00058</a> <span class="comment"></span>    <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b" title="Pointer to the start of the Part.">M_ptr</a>; }<span class="comment"></span>
<a name="l00059"></a>00059 <span class="comment">    //! Return the end (exclusive) of the Part.</span>
<a name="l00060"></a><a class="code" href="classMessageIn_1_1Part.html#eebf51a59f2fa3e3c14acf4e7281c8d9">00060</a> <span class="comment"></span>    <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn_1_1Part.html#eebf51a59f2fa3e3c14acf4e7281c8d9" title="Return the end (exclusive) of the Part.">end</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn_1_1Part.html#77dad7049a313380b106865bac93b09b" title="Pointer to the start of the Part.">M_ptr</a> + <a class="code" href="classMessageIn_1_1Part.html#430d6a8349a3765451b44548f7042bb9" title="The number of characters that belong to this Part.">M_len</a>; }<span class="comment"></span>
<a name="l00061"></a>00061 <span class="comment">    //! The size of the Part (end minus start).</span>
<a name="l00062"></a><a class="code" href="classMessageIn_1_1Part.html#8199c1498fd30f2e4c4daa018f10736f">00062</a> <span class="comment"></span>    <span class="keywordtype">size_t</span> <a class="code" href="classMessageIn_1_1Part.html#8199c1498fd30f2e4c4daa018f10736f" title="The size of the Part (end minus start).">len</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn_1_1Part.html#430d6a8349a3765451b44548f7042bb9" title="The number of characters that belong to this Part.">M_len</a>; }
<a name="l00063"></a>00063 <span class="preprocessor">#ifdef CWDEBUG</span><span class="comment"></span>
<a name="l00064"></a>00064 <span class="comment">    //! For debugging purposes. Write \a part to \a os.</span>
<a name="l00065"></a><a class="code" href="classMessageIn_1_1Part.html#35b31ec46a295797912efaaec1e41671">00065</a> <span class="comment"></span>    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, Part const&amp; part)
<a name="l00066"></a>00066         { <span class="keywordflow">return</span> os &lt;&lt; <span class="charliteral">'"'</span> &lt;&lt; libcwd::buf2str(part.M_ptr, part.M_len) &lt;&lt; <span class="charliteral">'"'</span>; }
<a name="l00067"></a>00067 <span class="preprocessor">#endif</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>  };
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="keyword">public</span>:
<a name="l00071"></a><a class="code" href="classMessageIn.html#660275eb3a2f1f8903a20f17f3fbf0a0">00071</a>   <span class="keyword">typedef</span> std::vector&lt;Part&gt; <a class="code" href="classMessageIn.html#660275eb3a2f1f8903a20f17f3fbf0a0" title="Type of M_params.">params_type</a>;        <span class="comment">//!&lt; Type of M_params.</span>
<a name="l00072"></a>00072 <span class="comment"></span>
<a name="l00073"></a>00073 <span class="keyword">private</span>:
<a name="l00074"></a><a class="code" href="classMessageIn.html#175986946965bb75202e7383da84ec9d">00074</a>   msg_block_ct <a class="code" href="classMessageIn.html#175986946965bb75202e7383da84ec9d" title="Message block to keep message alive as long as we use it.">M_msg_block</a>;             <span class="comment">//!&lt; Message block to keep message alive as long as we use it.</span>
<a name="l00075"></a><a class="code" href="classMessageIn.html#0cfe7a0a9d5c6be8b914609de5e45199">00075</a> <span class="comment"></span>  <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn.html#0cfe7a0a9d5c6be8b914609de5e45199" title="Points one after the message (at &amp;#39;\r&amp;#39; or &amp;#39;\n&amp;#39;).">M_end</a>;                    <span class="comment">//!&lt; Points one after the message (at '\\r' or '\\n').</span>
<a name="l00076"></a><a class="code" href="classMessageIn.html#a8f8c17829cb1a6ef6e64d19239ac6bb">00076</a> <span class="comment"></span>  <a class="code" href="classMessageIn_1_1Part.html" title="Part of an MessageIn.">Part</a> <a class="code" href="classMessageIn.html#a8f8c17829cb1a6ef6e64d19239ac6bb" title="The prefix (without colon).">M_prefix</a>;                        <span class="comment">//!&lt; The prefix (without colon).</span>
<a name="l00077"></a><a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6">00077</a> <span class="comment"></span>  <a class="code" href="classMessageIn_1_1Part.html" title="Part of an MessageIn.">Part</a> <a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>;                       <span class="comment">//!&lt; The command or numeric.</span>
<a name="l00078"></a><a class="code" href="classMessageIn.html#c7e990bc60fbd705d36a0955a3dd0c3f">00078</a> <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="classMessageIn.html#c7e990bc60fbd705d36a0955a3dd0c3f" title="The command or numeric as integer.">M_key</a>;                            <span class="comment">//!&lt; The command or numeric as integer.</span>
<a name="l00079"></a><a class="code" href="classMessageIn.html#9d4981eb78145a5ba1b5baf3632034d2">00079</a> <span class="comment"></span>  <a class="code" href="structKeyword.html" title="Name/value pair for IRC commands (keywords) and their numeric value.">Keyword</a> <span class="keyword">const</span>* <a class="code" href="classMessageIn.html#9d4981eb78145a5ba1b5baf3632034d2" title="Pointer to Keyword struct, if the command is a known command.">M_keyword_ptr</a>;         <span class="comment">//!&lt; Pointer to Keyword struct, if the command is a known command.</span>
<a name="l00080"></a><a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6">00080</a> <span class="comment"></span>  <a class="code" href="classMessageIn.html#660275eb3a2f1f8903a20f17f3fbf0a0" title="Type of M_params.">params_type</a> <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>;                 <span class="comment">//!&lt; The command parameters.</span>
<a name="l00081"></a>00081 <span class="comment"></span>
<a name="l00082"></a>00082 <span class="keyword">protected</span>:<span class="comment"></span>
<a name="l00083"></a>00083 <span class="comment">  //! Construct an uninitialized MessageIn.</span>
<a name="l00084"></a>00084 <span class="comment"></span>  <a class="code" href="classMessageIn.html#28985745c96dd2280c320fd9ce212e75" title="Construct an uninitialized MessageIn.">MessageIn</a>(<span class="keywordtype">void</span>);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00087"></a>00087 <span class="comment">  //! (re)initialize this MessageIn.</span>
<a name="l00088"></a>00088 <span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classMessageIn.html#2d432023432a6b6457f6cf773573e90f" title="(re)initialize this MessageIn.">init</a>(msg_block_ct msg_block);
<a name="l00089"></a>00089 <span class="comment"></span>
<a name="l00090"></a>00090 <span class="comment">  //! Return true if this MessageIn is still uninitialized.</span>
<a name="l00091"></a><a class="code" href="classMessageIn.html#eb8e06c8a49f1260bbd3b16d519e9863">00091</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classMessageIn.html#eb8e06c8a49f1260bbd3b16d519e9863" title="Return true if this MessageIn is still uninitialized.">uninitialized</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#175986946965bb75202e7383da84ec9d" title="Message block to keep message alive as long as we use it.">M_msg_block</a>.get_size() == 0; }
<a name="l00092"></a>00092 <span class="comment"></span>
<a name="l00093"></a>00093 <span class="comment">  //! Returns true when this message is a numeric reply.</span>
<a name="l00094"></a><a class="code" href="classMessageIn.html#d5b8161ee7bb2fa3e275ceb132d7f141">00094</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classMessageIn.html#d5b8161ee7bb2fa3e275ceb132d7f141" title="Returns true when this message is a numeric reply.">is_numeric</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>.<a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>() &amp;&amp; std::isdigit(*<a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>.<a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>()); }
<a name="l00095"></a>00095 <span class="comment"></span>
<a name="l00096"></a>00096 <span class="comment">  //! The numeric value of this numeric reply.</span>
<a name="l00097"></a><a class="code" href="classMessageIn.html#a77dca3b67c97ce535900c747d5631f2">00097</a> <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="classMessageIn.html#a77dca3b67c97ce535900c747d5631f2" title="The numeric value of this numeric reply.">numeric</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classMessageIn.html#d5b8161ee7bb2fa3e275ceb132d7f141" title="Returns true when this message is a numeric reply.">is_numeric</a>()); <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#c7e990bc60fbd705d36a0955a3dd0c3f" title="The command or numeric as integer.">M_key</a>; }
<a name="l00098"></a>00098 <span class="comment"></span>
<a name="l00099"></a>00099 <span class="comment">  //! Numeric representation of command or numeric.</span>
<a name="l00100"></a><a class="code" href="classMessageIn.html#63147fe442cac6236904e034bebfb4b5">00100</a> <span class="comment"></span>  <span class="keywordtype">int</span> <a class="code" href="classMessageIn.html#63147fe442cac6236904e034bebfb4b5" title="Numeric representation of command or numeric.">key</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#c7e990bc60fbd705d36a0955a3dd0c3f" title="The command or numeric as integer.">M_key</a>; }
<a name="l00101"></a>00101 <span class="comment"></span>
<a name="l00102"></a>00102 <span class="comment">  //! The number of parameters.</span>
<a name="l00103"></a><a class="code" href="classMessageIn.html#cc92a979360c4c920199ca8d1f4fd0ba">00103</a> <span class="comment"></span>  params_type::size_type <a class="code" href="classMessageIn.html#cc92a979360c4c920199ca8d1f4fd0ba" title="The number of parameters.">params_size</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>.size(); }
<a name="l00104"></a>00104 <span class="comment"></span>
<a name="l00105"></a>00105 <span class="comment">  //! A const reference to the vector with parameter Parts.</span>
<a name="l00106"></a><a class="code" href="classMessageIn.html#3c86c93bfe6cdea3d3928dd8ddddd191">00106</a> <span class="comment"></span>  <a class="code" href="classMessageIn.html#660275eb3a2f1f8903a20f17f3fbf0a0" title="Type of M_params.">params_type</a> <span class="keyword">const</span>&amp; <a class="code" href="classMessageIn.html#3c86c93bfe6cdea3d3928dd8ddddd191" title="A const reference to the vector with parameter Parts.">params</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>; }
<a name="l00107"></a>00107 <span class="comment"></span>
<a name="l00108"></a>00108 <span class="comment">  //! Returns parameter \a n as a std::string. The result is empty if there no such parameter.</span>
<a name="l00109"></a><a class="code" href="classMessageIn.html#0d6e087c8bc7e3a3051eed974ba6ddbb">00109</a> <span class="comment"></span>  std::string <a class="code" href="classMessageIn.html#0d6e087c8bc7e3a3051eed974ba6ddbb" title="Returns parameter n as a std::string. The result is empty if there no such parameter...">param</a>(<span class="keywordtype">size_t</span> n)<span class="keyword"> const</span>
<a name="l00110"></a>00110 <span class="keyword">  </span>{
<a name="l00111"></a>00111     std::string result;
<a name="l00112"></a>00112     <span class="keywordflow">if</span> (n &lt; <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>.size())
<a name="l00113"></a>00113       result.assign(<a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>[n].start(), <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>[n].len());
<a name="l00114"></a>00114     <span class="keywordflow">return</span> result;
<a name="l00115"></a>00115   }
<a name="l00116"></a>00116 <span class="comment"></span>
<a name="l00117"></a>00117 <span class="comment">  //! Returns parameters \a n and higher as MsgPart. The result is empty if there no such parameter.</span>
<a name="l00118"></a>00118 <span class="comment"></span>  <a class="code" href="classMsgPart.html" title="Like MessageIn::Part but with a copy of msg_block_ct to keep the message block alive...">MsgPart</a> <a class="code" href="classMessageIn.html#3c86c93bfe6cdea3d3928dd8ddddd191" title="A const reference to the vector with parameter Parts.">params</a>(<span class="keywordtype">size_t</span> n) <span class="keyword">const</span>;
<a name="l00119"></a>00119 <span class="comment"></span>
<a name="l00120"></a>00120 <span class="comment">  //! Returns true if there is a prefix.</span>
<a name="l00121"></a><a class="code" href="classMessageIn.html#6b52008fa0571869419878e5661832b0">00121</a> <span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classMessageIn.html#6b52008fa0571869419878e5661832b0" title="Returns true if there is a prefix.">has_prefix</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#a8f8c17829cb1a6ef6e64d19239ac6bb" title="The prefix (without colon).">M_prefix</a>.<a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>(); }
<a name="l00122"></a>00122 <span class="comment"></span>
<a name="l00123"></a>00123 <span class="comment">  //! The prefix.</span>
<a name="l00124"></a><a class="code" href="classMessageIn.html#a510bc2b8615c95997f60ba79c220d36">00124</a> <span class="comment"></span>  std::string <a class="code" href="classMessageIn.html#a510bc2b8615c95997f60ba79c220d36" title="The prefix.">prefix_str</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classMessageIn.html#6b52008fa0571869419878e5661832b0" title="Returns true if there is a prefix.">has_prefix</a>()); <span class="keywordflow">return</span> std::string(<a class="code" href="classMessageIn.html#a8f8c17829cb1a6ef6e64d19239ac6bb" title="The prefix (without colon).">M_prefix</a>.<a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>(), <a class="code" href="classMessageIn.html#a8f8c17829cb1a6ef6e64d19239ac6bb" title="The prefix (without colon).">M_prefix</a>.<a class="code" href="classMessageIn_1_1Part.html#8199c1498fd30f2e4c4daa018f10736f" title="The size of the Part (end minus start).">len</a>()); }
<a name="l00125"></a>00125 <span class="comment"></span>
<a name="l00126"></a>00126 <span class="comment">  //! The prefix. The returned Part is only valid as long as the MessageIn is not destructed.</span>
<a name="l00127"></a><a class="code" href="classMessageIn.html#093cd417cb0206413eee0f2302579586">00127</a> <span class="comment"></span>  <a class="code" href="classMessageIn_1_1Part.html" title="Part of an MessageIn.">Part</a> <a class="code" href="classMessageIn.html#093cd417cb0206413eee0f2302579586" title="The prefix. The returned Part is only valid as long as the MessageIn is not destructed...">prefix_part</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classMessageIn.html#6b52008fa0571869419878e5661832b0" title="Returns true if there is a prefix.">has_prefix</a>()); <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#a8f8c17829cb1a6ef6e64d19239ac6bb" title="The prefix (without colon).">M_prefix</a>; }
<a name="l00128"></a>00128 <span class="comment"></span>
<a name="l00129"></a>00129 <span class="comment">  //! The prefix.</span>
<a name="l00130"></a><a class="code" href="classMessageIn.html#7118ac35ffbc7610c82481ac4d1d81da">00130</a> <span class="comment"></span>  <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a> <a class="code" href="classMessageIn.html#7118ac35ffbc7610c82481ac4d1d81da" title="The prefix.">prefix</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00131"></a>00131 <span class="keyword">      </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#6b52008fa0571869419878e5661832b0" title="Returns true if there is a prefix.">has_prefix</a>() ? (<a class="code" href="classMessageIn.html#097d00199d115383a5e615a99c0bcdc7" title="Return true if this is a ServerMessageIn.">is_server_message</a>() ? <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a>(<a class="code" href="classMessageIn.html#d6193e03df260ae17f4776064ccb9cd7" title="The session of the derived class.">priv_server_session</a>(), <a class="code" href="classMessageIn.html#a510bc2b8615c95997f60ba79c220d36" title="The prefix.">prefix_str</a>()) : <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a>(<a class="code" href="classMessageIn.html#1bd107babcd61eb9e5d774812ddb2453" title="The session of the derived class.">priv_client_session</a>(), <a class="code" href="classMessageIn.html#a510bc2b8615c95997f60ba79c220d36" title="The prefix.">prefix_str</a>())) : <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a>(); }
<a name="l00132"></a>00132 <span class="comment"></span>
<a name="l00133"></a>00133 <span class="comment">  //! The command as received.</span>
<a name="l00134"></a><a class="code" href="classMessageIn.html#b86e675b7052055a9b420ba33ef3091d">00134</a> <span class="comment"></span>  std::string <a class="code" href="classMessageIn.html#b86e675b7052055a9b420ba33ef3091d" title="The command as received.">command_str</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>.<a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>() ? std::string(<a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>.<a class="code" href="classMessageIn_1_1Part.html#2f135fda3fcb2e69202957f9386299d0" title="Return the start of the Part.">start</a>(), <a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>.<a class="code" href="classMessageIn_1_1Part.html#8199c1498fd30f2e4c4daa018f10736f" title="The size of the Part (end minus start).">len</a>()) : <span class="stringliteral">""</span>; }
<a name="l00135"></a>00135 <span class="comment"></span>
<a name="l00136"></a>00136 <span class="comment">  //! The command. The returned Part is only valid as long as the MessageIn is not destructed.</span>
<a name="l00137"></a><a class="code" href="classMessageIn.html#47e899097107f37668d648925ddfb5b4">00137</a> <span class="comment"></span>  <a class="code" href="classMessageIn_1_1Part.html" title="Part of an MessageIn.">Part</a> <span class="keyword">const</span>&amp; <a class="code" href="classMessageIn.html#47e899097107f37668d648925ddfb5b4" title="The command. The returned Part is only valid as long as the MessageIn is not destructed...">command_part</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#211e2e793b584dd191b0946b716bcfa6" title="The command or numeric.">M_command</a>; }
<a name="l00138"></a>00138 <span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">  //! The command as uppercase C string.</span>
<a name="l00140"></a><a class="code" href="classMessageIn.html#cc4398d6895d57fb2040a99394c6a1a0">00140</a> <span class="comment"></span>  <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn.html#cc4398d6895d57fb2040a99394c6a1a0" title="The command as uppercase C string.">uppercase_command</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classMessageIn.html#c7e990bc60fbd705d36a0955a3dd0c3f" title="The command or numeric as integer.">M_key</a> &lt; 0); <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#9d4981eb78145a5ba1b5baf3632034d2" title="Pointer to Keyword struct, if the command is a known command.">M_keyword_ptr</a>-&gt;<a class="code" href="structKeyword.html#dad7531bc7ed7a82924158273e2eb623" title="The keyword.">name</a>; }
<a name="l00141"></a>00141 <span class="comment"></span>
<a name="l00142"></a>00142 <span class="comment">  //! Pointer to one beyond the end of the message.</span>
<a name="l00143"></a><a class="code" href="classMessageIn.html#2ea00541f00a4f1c518023330ddbac8b">00143</a> <span class="comment"></span>  <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classMessageIn.html#2ea00541f00a4f1c518023330ddbac8b" title="Pointer to one beyond the end of the message.">end</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classMessageIn.html#0cfe7a0a9d5c6be8b914609de5e45199" title="Points one after the message (at &amp;#39;\r&amp;#39; or &amp;#39;\n&amp;#39;).">M_end</a>; }
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="keyword">protected</span>:<span class="comment"></span>
<a name="l00146"></a>00146 <span class="comment">  //! Return true if this is a ServerMessageIn.</span>
<a name="l00147"></a>00147 <span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classMessageIn.html#097d00199d115383a5e615a99c0bcdc7" title="Return true if this is a ServerMessageIn.">is_server_message</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;
<a name="l00148"></a>00148 <span class="comment"></span>
<a name="l00149"></a>00149 <span class="comment">  //! The session of the derived class.</span>
<a name="l00150"></a>00150 <span class="comment"></span>  <span class="keyword">virtual</span> <a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>&amp; <a class="code" href="classMessageIn.html#d6193e03df260ae17f4776064ccb9cd7" title="The session of the derived class.">priv_server_session</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;<span class="comment"></span>
<a name="l00151"></a>00151 <span class="comment">  //! The session of the derived class.</span>
<a name="l00152"></a>00152 <span class="comment"></span>  <span class="keyword">virtual</span> <a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>&amp; <a class="code" href="classMessageIn.html#1bd107babcd61eb9e5d774812ddb2453" title="The session of the derived class.">priv_client_session</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;
<a name="l00153"></a>00153 };
<a name="l00154"></a>00154 <span class="comment"></span>
<a name="l00155"></a>00155 <span class="comment">//! Like MessageIn::Part but with a copy of msg_block_ct to keep the message block alive.</span>
<a name="l00156"></a>00156 <span class="comment"></span><span class="comment">//</span>
<a name="l00157"></a>00157 <span class="comment">// Unlike MessageIn::Part, a MsgPart can be used even after the corresponding MessageIn is destroyed.</span>
<a name="l00158"></a><a class="code" href="classMsgPart.html">00158</a> <span class="keyword">class </span><a class="code" href="classMsgPart.html" title="Like MessageIn::Part but with a copy of msg_block_ct to keep the message block alive...">MsgPart</a> : <span class="keyword">public</span> <a class="code" href="classMessageIn.html" title="An IRC message as received from client or server.">MessageIn</a>::<a class="code" href="classMessageIn_1_1Part.html#24675986512b29ca87e491cd0cf6d79e" title="Construct an uninitialized Part.">Part</a> {
<a name="l00159"></a>00159 <span class="keyword">private</span>:
<a name="l00160"></a><a class="code" href="classMsgPart.html#09fe365c5d1bb7b3642f4c23c78c1bb8">00160</a>   msg_block_ct <a class="code" href="classMsgPart.html#09fe365c5d1bb7b3642f4c23c78c1bb8" title="The message block.">M_msg_block</a>;     <span class="comment">//!&lt; The message block.</span>
<a name="l00161"></a>00161 <span class="comment"></span><span class="keyword">public</span>:<span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">  //! Construct an empty MsgPart that will reference \a msg_block.</span>
<a name="l00163"></a><a class="code" href="classMsgPart.html#51d9d4660c9491961b410147631933b4">00163</a> <span class="comment"></span>  <a class="code" href="classMsgPart.html#51d9d4660c9491961b410147631933b4" title="Construct an empty MsgPart that will reference msg_block.">MsgPart</a>(msg_block_ct <span class="keyword">const</span>&amp; msg_block) : <a class="code" href="classMsgPart.html#09fe365c5d1bb7b3642f4c23c78c1bb8" title="The message block.">M_msg_block</a>(msg_block) { }<span class="comment"></span>
<a name="l00164"></a>00164 <span class="comment">  //! Construct a MsgPart from Part \a part that references \a msg_block.</span>
<a name="l00165"></a><a class="code" href="classMsgPart.html#afe180597d97a2587044328d4ea6ca8f">00165</a> <span class="comment"></span>  <a class="code" href="classMsgPart.html#51d9d4660c9491961b410147631933b4" title="Construct an empty MsgPart that will reference msg_block.">MsgPart</a>(msg_block_ct <span class="keyword">const</span>&amp; msg_block, <a class="code" href="classMessageIn_1_1Part.html#24675986512b29ca87e491cd0cf6d79e" title="Construct an uninitialized Part.">Part</a> <span class="keyword">const</span>&amp; part) : <a class="code" href="classMessageIn.html" title="An IRC message as received from client or server.">MessageIn</a>::<a class="code" href="classMessageIn_1_1Part.html#24675986512b29ca87e491cd0cf6d79e" title="Construct an uninitialized Part.">Part</a>(part), <a class="code" href="classMsgPart.html#09fe365c5d1bb7b3642f4c23c78c1bb8" title="The message block.">M_msg_block</a>(msg_block) { }
<a name="l00166"></a>00166 };
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="classMessageIn.html#32373af0ba8c37f44efbb57cda6013e8">00168</a> <span class="keyword">inline</span> <a class="code" href="classMsgPart.html" title="Like MessageIn::Part but with a copy of msg_block_ct to keep the message block alive...">MsgPart</a> <a class="code" href="classMessageIn.html#3c86c93bfe6cdea3d3928dd8ddddd191" title="A const reference to the vector with parameter Parts.">MessageIn::params</a>(<span class="keywordtype">size_t</span> n)<span class="keyword"> const</span>
<a name="l00169"></a>00169 <span class="keyword"></span>{
<a name="l00170"></a>00170   <a class="code" href="classMsgPart.html" title="Like MessageIn::Part but with a copy of msg_block_ct to keep the message block alive...">MsgPart</a> result(<a class="code" href="classMessageIn.html#175986946965bb75202e7383da84ec9d" title="Message block to keep message alive as long as we use it.">M_msg_block</a>);
<a name="l00171"></a>00171   <span class="keywordflow">if</span> (n &lt; <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>.size())
<a name="l00172"></a>00172   {
<a name="l00173"></a>00173     <span class="keywordtype">char</span> <span class="keyword">const</span>* start = <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>[n].start();
<a name="l00174"></a>00174     <span class="keywordflow">if</span> (n == <a class="code" href="classMessageIn.html#a172f31f48d900b516fa9befa9eabde6" title="The command parameters.">M_params</a>.size() - 1 &amp;&amp; start[-1] == <span class="charliteral">':'</span>)
<a name="l00175"></a>00175       --start;
<a name="l00176"></a>00176     result.<a class="code" href="classMessageIn_1_1Part.html#b0c8174382216c8af077ce5fbacc66b7" title="Initialize the Part.">set</a>(start, <a class="code" href="classMessageIn.html#0cfe7a0a9d5c6be8b914609de5e45199" title="Points one after the message (at &amp;#39;\r&amp;#39; or &amp;#39;\n&amp;#39;).">M_end</a>);
<a name="l00177"></a>00177   }
<a name="l00178"></a>00178   <span class="keywordflow">else</span>
<a name="l00179"></a>00179     result.<a class="code" href="classMessageIn_1_1Part.html#03aab2aa906e9066f1b092872c89059c" title="Initialize an empty Part.">clear</a>();
<a name="l00180"></a>00180   <span class="keywordflow">return</span> result;
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 <span class="comment"></span>
<a name="l00183"></a>00183 <span class="comment">/*! @brief</span>
<a name="l00184"></a>00184 <span class="comment"> *</span>
<a name="l00185"></a>00185 <span class="comment"> * An IRC message as received from a client.</span>
<a name="l00186"></a>00186 <span class="comment"> */</span>
<a name="l00187"></a><a class="code" href="classClientMessageIn.html">00187</a> <span class="keyword">class </span><a class="code" href="classClientMessageIn.html" title="An IRC message as received from a client.">ClientMessageIn</a> : <span class="keyword">public</span> <a class="code" href="classMessageIn.html" title="An IRC message as received from client or server.">MessageIn</a> {
<a name="l00188"></a>00188   <span class="keyword">private</span>:
<a name="l00189"></a><a class="code" href="classClientMessageIn.html#f7d2ef6afed303e2e4b6e3f814f9584d">00189</a>     <a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>* M_client_session;            <span class="comment">//!&lt; The client session over which this message was received.</span>
<a name="l00190"></a>00190 <span class="comment"></span>  <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00191"></a>00191 <span class="comment">    //! Construct a ClientMessageIn that was received via client session \a client_session.</span>
<a name="l00192"></a><a class="code" href="classClientMessageIn.html#fa8aec294abd1108b9fe9f10539e958a">00192</a> <span class="comment"></span>    <a class="code" href="classClientMessageIn.html" title="An IRC message as received from a client.">ClientMessageIn</a>(<a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>* client_session) : M_client_session(client_session) { }
<a name="l00193"></a>00193 <span class="preprocessor">#ifdef CWDEBUG</span><span class="comment"></span>
<a name="l00194"></a>00194 <span class="comment">    //! Copy-constructor.</span>
<a name="l00195"></a><a class="code" href="classClientMessageIn.html#ff2c2de16dd3c5fca24291fe9fae53ec">00195</a> <span class="comment"></span>    ClientMessageIn(ClientMessageIn const&amp; msg) : MessageIn(msg), M_client_session(msg.M_client_session)
<a name="l00196"></a>00196         { Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4fad4911d56fc2bccbb8ed9041454394" title="This debug channel is used for object construction/destruction tracking.">dc::objects</a>, <span class="stringliteral">"Copy-constructing ClientMessageIn from "</span> &lt;&lt; msg); }<span class="comment"></span>
<a name="l00197"></a>00197 <span class="comment">    //! Destructor.</span>
<a name="l00198"></a><a class="code" href="classClientMessageIn.html#6ffd7bf4dcae24273af4daffecc5755b">00198</a> <span class="comment"></span>    ~<a class="code" href="classClientMessageIn.html" title="An IRC message as received from a client.">ClientMessageIn</a>() { Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4fad4911d56fc2bccbb8ed9041454394" title="This debug channel is used for object construction/destruction tracking.">dc::objects</a>, <span class="stringliteral">"Destructing ClientMessageIn "</span> &lt;&lt; *<span class="keyword">this</span>); }
<a name="l00199"></a>00199 <span class="preprocessor">#endif</span>
<a name="l00200"></a>00200 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00201"></a>00201 <span class="comment">    //! Accessor for M_client_session.</span>
<a name="l00202"></a><a class="code" href="classClientMessageIn.html#fee67ebae51ab90fa6f643fd5fd8fe9c">00202</a> <span class="comment"></span>    <a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>&amp; client_session(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *M_client_session; }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   <span class="keyword">protected</span>:
<a name="l00205"></a><a class="code" href="classClientMessageIn.html#83e71a64acd618f6f4c633cbfd91da64">00205</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classMessageIn.html#097d00199d115383a5e615a99c0bcdc7" title="Return true if this is a ServerMessageIn.">is_server_message</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="classClientMessageIn.html#f567dac03876397be5f2bb809232e2c4">00207</a>     <span class="keyword">virtual</span> <a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>&amp; <a class="code" href="classMessageIn.html#1bd107babcd61eb9e5d774812ddb2453" title="The session of the derived class.">priv_client_session</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> client_session(); }
<a name="l00208"></a><a class="code" href="classClientMessageIn.html#1d3c97841f975c6f69aea73eae68b8d8">00208</a>     <span class="keyword">virtual</span> <a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>&amp; <a class="code" href="classMessageIn.html#d6193e03df260ae17f4776064ccb9cd7" title="The session of the derived class.">priv_server_session</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ DoutFatal(dc::core, <span class="stringliteral">"Calling MessageIn::server_session() for ClientMessageIn"</span>); }
<a name="l00209"></a>00209 };
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">/*! @brief</span>
<a name="l00212"></a>00212 <span class="comment"> *</span>
<a name="l00213"></a>00213 <span class="comment"> * An IRC message as received from a server.</span>
<a name="l00214"></a>00214 <span class="comment"> */</span>
<a name="l00215"></a><a class="code" href="classServerMessageIn.html">00215</a> <span class="keyword">class </span><a class="code" href="classServerMessageIn.html" title="An IRC message as received from a server.">ServerMessageIn</a> : <span class="keyword">public</span> <a class="code" href="classMessageIn.html" title="An IRC message as received from client or server.">MessageIn</a> {
<a name="l00216"></a>00216   <span class="keyword">private</span>:
<a name="l00217"></a><a class="code" href="classServerMessageIn.html#7efd9c1ad535e7943295a565e617b6b5">00217</a>     <a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>* M_server_session;            <span class="comment">//!&lt; The server session over which this message was received.</span>
<a name="l00218"></a>00218 <span class="comment"></span>  <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">    //! Construct a ServerMessageIn that was received via server session \a server_session.</span>
<a name="l00220"></a><a class="code" href="classServerMessageIn.html#f6243c8117b42bca946b3d06d6232848">00220</a> <span class="comment"></span>    <a class="code" href="classServerMessageIn.html" title="An IRC message as received from a server.">ServerMessageIn</a>(<a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>* server_session) : M_server_session(server_session) { }
<a name="l00221"></a>00221 <span class="preprocessor">#ifdef CWDEBUG</span><span class="comment"></span>
<a name="l00222"></a>00222 <span class="comment">    //! Copy-constructor.</span>
<a name="l00223"></a><a class="code" href="classServerMessageIn.html#ced0570a7e1b2e8a79009c24b5af185d">00223</a> <span class="comment"></span>    ServerMessageIn(ServerMessageIn const&amp; msg) : MessageIn(msg), M_server_session(msg.M_server_session)
<a name="l00224"></a>00224         { Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4fad4911d56fc2bccbb8ed9041454394" title="This debug channel is used for object construction/destruction tracking.">dc::objects</a>, <span class="stringliteral">"Copy-constructing ServerMessageIn from "</span> &lt;&lt; msg); }
<a name="l00225"></a>00225 <span class="preprocessor">#endif</span><span class="comment"></span>
<a name="l00226"></a>00226 <span class="comment">    //! Destructor.</span>
<a name="l00227"></a><a class="code" href="classServerMessageIn.html#3bc510a4f1014e44f69af88a7a86d8c5">00227</a> <span class="comment"></span>    ~ServerMessageIn() { Dout(dc::objects, "Destructing ServerMessageIn " &lt;&lt; *this); }
<a name="l00228"></a>00228 <span class="comment"></span>
<a name="l00229"></a>00229 <span class="comment">    //! Accessor for M_server_session.</span>
<a name="l00230"></a>00230 <span class="comment"></span>    <span class="comment">// This returns a non-const ServerSession, even though the method is const,</span>
<a name="l00231"></a>00231     <span class="comment">// because the const applies to the MessageIn. The ServerSession pointer is</span>
<a name="l00232"></a>00232     <span class="comment">// just for convenience ("this is the ServerSession that this message was</span>
<a name="l00233"></a>00233     <span class="comment">// received over).</span>
<a name="l00234"></a><a class="code" href="classServerMessageIn.html#21e92209f98b95e2698bb340b16b5af4">00234</a>     <a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>&amp; server_session(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *M_server_session; }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="keyword">protected</span>:
<a name="l00237"></a><a class="code" href="classServerMessageIn.html#7dec684e5c2efba4cc34ce1acbd3f220">00237</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classMessageIn.html#097d00199d115383a5e615a99c0bcdc7" title="Return true if this is a ServerMessageIn.">is_server_message</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="classServerMessageIn.html#77eb64be854eb152b12ec97251bbe81a">00239</a>     <span class="keyword">virtual</span> <a class="code" href="classClientSession.html" title="A client session, from connect till disconnect.">ClientSession</a>&amp; <a class="code" href="classMessageIn.html#1bd107babcd61eb9e5d774812ddb2453" title="The session of the derived class.">priv_client_session</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ DoutFatal(dc::core, <span class="stringliteral">"Calling ServerMessageIn::priv_client_session()"</span>); }
<a name="l00240"></a><a class="code" href="classServerMessageIn.html#dc3e23ea0a4d7fda859bf61de7835559">00240</a>     <span class="keyword">virtual</span> <a class="code" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>&amp; <a class="code" href="classMessageIn.html#d6193e03df260ae17f4776064ccb9cd7" title="The session of the derived class.">priv_server_session</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> server_session(); }
<a name="l00241"></a>00241 };
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="preprocessor">#endif // IRCMESSAGE_H</span>
</pre></div></div>
<hr>

<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR>
<TH ALIGN=left BGCOLOR="#e8feff"><ADDRESS>Copyright &copy; 2005-2007 Carlo Wood.&nbsp; All rights reserved.</ADDRESS></TH>
</TR>
</TABLE>

</DIV>
</BODY>
</HTML>

