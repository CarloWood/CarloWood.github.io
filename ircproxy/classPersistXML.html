<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML LANG="en-us">
 
<HEAD>
<META name="Author" content="Carlo Wood">
<META name="description" content="IRC proxy">
<META name="keywords" content="IRC, proxy, bnc, security, protection">
<META http-equiv="content-type" content="text/html; charset=iso-8859-1">
<TITLE>ircproxy documentation</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="main.css" REL="stylesheet" TYPE="text/css">
</HEAD>

<BODY>

<TABLE class="header" BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR>
<TD WIDTH=120><IMG SRC="images/ircproxy.png" BORDER=0></TD>
<TD VALIGN=center ALIGN=center BGCOLOR="#0A0607"><FONT size=+4 color="#ffffff"><B>&nbsp;ircproxy</B>&nbsp;</FONT>
<FONT size=+3 color="#ffffff">The&nbsp;Ultimate&nbsp;Cyborg</FONT></TD>
</TR>
</TABLE>

<DIV class="normal">
<hr>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PersistXML Class Reference</h1><!-- doxytag: class="PersistXML" --><code>#include &lt;<a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>&gt;</code>
<p>

<p>
<a href="classPersistXML-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
A persistent object archiver. 
<p>
This object represents an archive to which objects can be written to if they support the serialize(PersistXML&amp;) method. 
<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00095">95</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a> { <a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93">not_open</a>, 
<a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270">store</a>, 
<a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922">load</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The open mode type of the archive.  <a href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#2a0aa48dfd52f9101e1ce4958ea674a0">PersistXML</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a new persistent XML archive object.  <a href="#2a0aa48dfd52f9101e1ce4958ea674a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#aebd66f50c13ade879176bf91c606cf3">~PersistXML</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destruct the object. An open archive is first finalized.  <a href="#aebd66f50c13ade879176bf91c606cf3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#df1b0482f071fbc2b1bae652e8a52e17">open</a> (std::string filename, <a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a> mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Associate the archive with a file for either reading or writing.  <a href="#df1b0482f071fbc2b1bae652e8a52e17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#b700aedeb305bb53c8a888e22f812b07">close</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalize and close the archive.  <a href="#b700aedeb305bb53c8a888e22f812b07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#014814a2c9ece11fb570f6e464c15611">openmode</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the current state.  <a href="#014814a2c9ece11fb570f6e464c15611"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595">serialize</a> (std::string const &amp;label, T &amp;object)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize <em>object</em> using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#5612c3e53fee8ffb21a228536fea9595"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#61f0539fa881fa3c2b80ef753c13befe">serialize</a> (std::string const &amp;label, boost::shared_ptr&lt; T &gt; &amp;ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize the object pointed to by a boost::shared_ptr using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#61f0539fa881fa3c2b80ef753c13befe"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#bb23b6f861c80a6a0ffb3104971cce3a">serialize</a> (std::string const &amp;label, std::vector&lt; T &gt; &amp;vec)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize std::vector <em>vec</em> using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#bb23b6f861c80a6a0ffb3104971cce3a"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#e9f500428211782e9bed55e734c96b1e">serialize</a> (std::string const &amp;label, std::list&lt; T &gt; &amp;list)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize std::list <em>list</em> using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#e9f500428211782e9bed55e734c96b1e"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename KEY, typename INFO, typename COMPARE&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#566dab263e1ccf51e0ed9c63de565f52">serialize</a> (std::string const &amp;label, std::map&lt; KEY, INFO, COMPARE &gt; &amp;map)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize std::map <em>map</em> using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#566dab263e1ccf51e0ed9c63de565f52"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#89aff78d91246230072598796ef78534">serialize</a> (std::string const &amp;label, boost::optional&lt; T &gt; &amp;opt)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize boost::optional <em>opt</em> using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#89aff78d91246230072598796ef78534"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#5e61b58d1792c76c85a31d850864bb06">serialize_builtin</a> (std::string const &amp;label, T &amp;builtin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serialize builtin type <em>builtin</em> using the xml tag &lt;label&gt;&lt;/label&gt;.  <a href="#5e61b58d1792c76c85a31d850864bb06"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#38c1a8f6dbee2b89bfeb0bfc15c12bfa">write_escaped</a> (char const &amp;c)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write char <em>c</em> to archive.  <a href="#38c1a8f6dbee2b89bfeb0bfc15c12bfa"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#49b75a89604060d42bcfd93d1402ed08">write_escaped</a> (std::string const &amp;builtin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write string <em>s</em> to archive.  <a href="#49b75a89604060d42bcfd93d1402ed08"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#c543180c1cadac8ad327d71888cc6ca8">write_escaped</a> (unsigned char const &amp;c)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write unsigned char <em>c</em> to archive.  <a href="#c543180c1cadac8ad327d71888cc6ca8"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#3bbc8083eb86c6265a2136a8999e78e1">read_data</a> (std::stringstream &amp;ss, std::string &amp;s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read string <em>s</em> from stringstream <em>ss</em>.  <a href="#3bbc8083eb86c6265a2136a8999e78e1"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419">M_openmode</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether or not the archive is opened for reading or writing.  <a href="#2b18e69338f77033f4308a56ee111419"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#40ca9714090ca036aad28dce47e6c46b">M_archivename</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The name of the XML file used to write the archive to disk.  <a href="#40ca9714090ca036aad28dce47e6c46b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::fstream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d">M_archive</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The file stream of an open archive.  <a href="#6d5a8241c4e060671c2bd3a33bcb755d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classIndentation.html">Indentation</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#54815808b1b69750789c4acdfc41481f">M_indent</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current XML indentation.  <a href="#54815808b1b69750789c4acdfc41481f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">xmlDocPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250">M_doc</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">XML document open for reading.  <a href="#0a91795734c743d5a09a10bd94b56250"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">xmlNodePtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442">M_cur</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current node in M_doc.  <a href="#ffe7f6b77657b09a8e5c22e0d85d3442"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::stack&lt; std::vector<br>
&lt; xmlNodePtr &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#3090d396ad00d816a026614d486fff59">M_parent_nodes</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stack with parents of current node.  <a href="#3090d396ad00d816a026614d486fff59"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#3d0fcb488bba83e5b2c416aa61ed5545">parse_archive</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse the archive.  <a href="#3d0fcb488bba83e5b2c416aa61ed5545"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#84c22189a1765ecd9e7972a36e4f202f">write_escaped</a> (T const &amp;builtin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write builtin-type <em>builtin</em> to archive.  <a href="#84c22189a1765ecd9e7972a36e4f202f"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPersistXML.html#b72f4766b98469f36bdc43e9788f9951">read_data</a> (std::stringstream &amp;ss, T &amp;builtin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read <em>builtin</em> from stringstream <em>ss</em>.  <a href="#b72f4766b98469f36bdc43e9788f9951"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="22014c1dd0d2450fb2cb467b111adf47"></a><!-- doxytag: member="PersistXML::XMLLabel" ref="22014c1dd0d2450fb2cb467b111adf47" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#22014c1dd0d2450fb2cb467b111adf47">XMLLabel</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersistXML.html#3d6113f59b7b2148cc753f901e0650d1">operator&lt;&lt;</a> (std::ostream &amp;os, <a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a> openmode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For debugging purposes. Write a <a class="el" href="classPersistXML.html#014814a2c9ece11fb570f6e464c15611" title="Return the current state.">PersistXML::openmode</a> to <em>os</em>.  <a href="#3d6113f59b7b2148cc753f901e0650d1"></a><br></td></tr>
</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="ebe6d1165a2ef09b5cc722f09d145eda"></a><!-- doxytag: member="PersistXML::openmode_type" ref="ebe6d1165a2ef09b5cc722f09d145eda" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">PersistXML::openmode_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The open mode type of the archive. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93"></a><!-- doxytag: member="not_open" ref="ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" args="" -->not_open</em>&nbsp;</td><td>
Used internally to mark that the archive is not open. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270"></a><!-- doxytag: member="store" ref="ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" args="" -->store</em>&nbsp;</td><td>
Open for writing objects to the archive. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922"></a><!-- doxytag: member="load" ref="ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" args="" -->load</em>&nbsp;</td><td>
Open for reading objects from the archive. </td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00098">98</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00098"></a>00098                      {
<a name="l00099"></a>00099     <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" title="Used internally to mark that the archive is not open.">not_open</a>,           <span class="comment">//!&lt; Used internally to mark that the archive is not open.</span>
<a name="l00100"></a>00100 <span class="comment"></span>    <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>,              <span class="comment">//!&lt; Open for writing objects to the archive.</span>
<a name="l00101"></a>00101 <span class="comment"></span>    <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>                <span class="comment">//!&lt; Open for reading objects from the archive.</span>
<a name="l00102"></a>00102 <span class="comment"></span>  };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="2a0aa48dfd52f9101e1ce4958ea674a0"></a><!-- doxytag: member="PersistXML::PersistXML" ref="2a0aa48dfd52f9101e1ce4958ea674a0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PersistXML::PersistXML           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a new persistent XML archive object. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00028">28</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00028"></a>00028                            : <a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a>(<a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" title="Used internally to mark that the archive is not open.">not_open</a>)
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030   Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::PersistXML(void) is called."</span>);
<a name="l00031"></a>00031 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="aebd66f50c13ade879176bf91c606cf3"></a><!-- doxytag: member="PersistXML::~PersistXML" ref="aebd66f50c13ade879176bf91c606cf3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PersistXML::~PersistXML           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destruct the object. An open archive is first finalized. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00033">33</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="PersistXML_8cc-source.html#l00081">close()</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="PersistXML_8h-source.html#l00099">not_open</a>, and <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00034"></a>00034 {
<a name="l00035"></a>00035   Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::~PersistXML() is called."</span>);
<a name="l00036"></a>00036   <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> != <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" title="Used internally to mark that the archive is not open.">not_open</a>)
<a name="l00037"></a>00037     <a class="code" href="classPersistXML.html#b700aedeb305bb53c8a888e22f812b07" title="Finalize and close the archive.">close</a>();
<a name="l00038"></a>00038 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="df1b0482f071fbc2b1bae652e8a52e17"></a><!-- doxytag: member="PersistXML::open" ref="df1b0482f071fbc2b1bae652e8a52e17" args="(std::string filename, openmode_type mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::open           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Associate the archive with a file for either reading or writing. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00064">64</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00107">M_archive</a>, <a class="el" href="PersistXML_8h-source.html#l00106">M_archivename</a>, <a class="el" href="PersistXML_8h-source.html#l00108">M_indent</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="PersistXML_8h-source.html#l00099">not_open</a>, <a class="el" href="PersistXML_8cc-source.html#l00041">parse_archive()</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, and <a class="el" href="PersistXML_8h-source.html#l00100">store</a>.</p>

<p>Referenced by <a class="el" href="Application_8cc-source.html#l00102">Application::start()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00065"></a>00065 {
<a name="l00066"></a>00066   Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::open(\""</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">"\", "</span> &lt;&lt; mode &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00067"></a>00067   assert(<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" title="Used internally to mark that the archive is not open.">not_open</a>);
<a name="l00068"></a>00068   assert(mode == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a> || mode == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>);
<a name="l00069"></a>00069   <a class="code" href="classPersistXML.html#40ca9714090ca036aad28dce47e6c46b" title="The name of the XML file used to write the archive to disk.">M_archivename</a> = filename;
<a name="l00070"></a>00070   <span class="keywordflow">if</span> (mode == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00071"></a>00071   {
<a name="l00072"></a>00072     <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a>.open(filename.c_str(), std::ios_base::out);
<a name="l00073"></a>00073     <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <span class="stringliteral">"&lt;?xml version=\"1.0\"?&gt;\n"</span>;
<a name="l00074"></a>00074     <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <a class="code" href="classPersistXML.html#54815808b1b69750789c4acdfc41481f" title="Current XML indentation.">M_indent</a>++ &lt;&lt; <span class="stringliteral">"&lt;archive&gt;\n"</span>;
<a name="l00075"></a>00075   }
<a name="l00076"></a>00076   <span class="keywordflow">else</span>
<a name="l00077"></a>00077     <a class="code" href="classPersistXML.html#3d0fcb488bba83e5b2c416aa61ed5545" title="Parse the archive.">parse_archive</a>();
<a name="l00078"></a>00078   <a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> = mode;
<a name="l00079"></a>00079 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b700aedeb305bb53c8a888e22f812b07"></a><!-- doxytag: member="PersistXML::close" ref="b700aedeb305bb53c8a888e22f812b07" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::close           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finalize and close the archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00081">81</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00107">M_archive</a>, <a class="el" href="PersistXML_8h-source.html#l00109">M_doc</a>, <a class="el" href="PersistXML_8h-source.html#l00108">M_indent</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="PersistXML_8h-source.html#l00099">not_open</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, and <a class="el" href="PersistXML_8h-source.html#l00100">store</a>.</p>

<p>Referenced by <a class="el" href="Application_8cc-source.html#l00102">Application::start()</a>, and <a class="el" href="PersistXML_8cc-source.html#l00033">~PersistXML()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00082"></a>00082 {
<a name="l00083"></a>00083   Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::close() is called."</span>);
<a name="l00084"></a>00084   assert(<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> != <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" title="Used internally to mark that the archive is not open.">not_open</a>);
<a name="l00085"></a>00085   <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00086"></a>00086     <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; --<a class="code" href="classPersistXML.html#54815808b1b69750789c4acdfc41481f" title="Current XML indentation.">M_indent</a> &lt;&lt; <span class="stringliteral">"&lt;/archive&gt;"</span> &lt;&lt; std::endl;
<a name="l00087"></a>00087   <span class="keywordflow">else</span>
<a name="l00088"></a>00088     xmlFreeDoc(<a class="code" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250" title="XML document open for reading.">M_doc</a>);
<a name="l00089"></a>00089   <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a>.close();
<a name="l00090"></a>00090   <a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> = <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145edaad0d87e448e1d77010c4111d76a6ed93" title="Used internally to mark that the archive is not open.">not_open</a>;
<a name="l00091"></a>00091 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="014814a2c9ece11fb570f6e464c15611"></a><!-- doxytag: member="PersistXML::openmode" ref="014814a2c9ece11fb570f6e464c15611" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a> PersistXML::openmode           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the current state. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00123">123</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>.</p>

<p>Referenced by <a class="el" href="Server_8cc-source.html#l00031">Server::serialize()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 { <span class="keywordflow">return</span> <a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3d0fcb488bba83e5b2c416aa61ed5545"></a><!-- doxytag: member="PersistXML::parse_archive" ref="3d0fcb488bba83e5b2c416aa61ed5545" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::parse_archive           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parse the archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00041">41</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00106">M_archivename</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, and <a class="el" href="PersistXML_8h-source.html#l00109">M_doc</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00064">open()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00042"></a>00042 {
<a name="l00043"></a>00043   <a class="code" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250" title="XML document open for reading.">M_doc</a> = xmlParseFile(<a class="code" href="classPersistXML.html#40ca9714090ca036aad28dce47e6c46b" title="The name of the XML file used to write the archive to disk.">M_archivename</a>.c_str());
<a name="l00044"></a>00044   
<a name="l00045"></a>00045   <span class="comment">// Do some sanity checks.</span>
<a name="l00046"></a>00046   <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250" title="XML document open for reading.">M_doc</a>)
<a name="l00047"></a>00047     <span class="keywordflow">throw</span> <a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Document not parsed successfully."</span>);
<a name="l00048"></a>00048   <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = xmlDocGetRootElement(<a class="code" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250" title="XML document open for reading.">M_doc</a>);
<a name="l00049"></a>00049   <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00050"></a>00050   {
<a name="l00051"></a>00051     xmlFreeDoc(<a class="code" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250" title="XML document open for reading.">M_doc</a>);
<a name="l00052"></a>00052     <span class="keywordflow">throw</span> <a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Empty document."</span>);
<a name="l00053"></a>00053   }
<a name="l00054"></a>00054   <span class="keywordflow">if</span> (xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) <span class="stringliteral">"archive"</span>))
<a name="l00055"></a>00055   {
<a name="l00056"></a>00056     xmlFreeDoc(<a class="code" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250" title="XML document open for reading.">M_doc</a>);
<a name="l00057"></a>00057     <span class="keywordflow">throw</span> <a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Document of the wrong type, root node isn't &lt;archive&gt;."</span>);
<a name="l00058"></a>00058   }
<a name="l00059"></a>00059   
<a name="l00060"></a>00060   <span class="comment">// Set M_cur to the first node inside &lt;archive&gt;.</span>
<a name="l00061"></a>00061   <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;xmlChildrenNode;
<a name="l00062"></a>00062 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="84c22189a1765ecd9e7972a36e4f202f"></a><!-- doxytag: member="PersistXML::write_escaped" ref="84c22189a1765ecd9e7972a36e4f202f" args="(T const &amp;builtin)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::write_escaped           </td>
          <td>(</td>
          <td class="paramtype">T const &amp;&nbsp;</td>
          <td class="paramname"> <em>builtin</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write builtin-type <em>builtin</em> to archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00486">486</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00107">M_archive</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00142">write_escaped()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00486"></a>00486 { <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; builtin; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b72f4766b98469f36bdc43e9788f9951"></a><!-- doxytag: member="PersistXML::read_data" ref="b72f4766b98469f36bdc43e9788f9951" args="(std::stringstream &amp;ss, T &amp;builtin)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::read_data           </td>
          <td>(</td>
          <td class="paramtype">std::stringstream &amp;&nbsp;</td>
          <td class="paramname"> <em>ss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>builtin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read <em>builtin</em> from stringstream <em>ss</em>. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00499">499</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00499"></a>00499 { ss &gt;&gt; builtin; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5612c3e53fee8ffb21a228536fea9595"></a><!-- doxytag: member="PersistXML::serialize" ref="5612c3e53fee8ffb21a228536fea9595" args="(std::string const &amp;label, T &amp;object)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>object</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize <em>object</em> using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00175">175</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, <a class="el" href="PersistXML_8h-source.html#l00100">store</a>, and <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>.</p>

<p>Referenced by <a class="el" href="Server_8cc-source.html#l00031">Server::serialize()</a>, <a class="el" href="PersistXML_8h-source.html#l00243">serialize()</a>, <a class="el" href="Network_8cc-source.html#l00027">Network::serialize()</a>, <a class="el" href="Identity_8cc-source.html#l00770">Identity::serialize()</a>, <a class="el" href="Application_8cc-source.html#l00240">Application::serialize()</a>, and <a class="el" href="Application_8cc-source.html#l00102">Application::start()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00176"></a>00176   {
<a name="l00177"></a>00177     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00178"></a>00178     {
<a name="l00179"></a>00179       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", ("</span> &lt;&lt;
<a name="l00180"></a>00180           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">") {"</span> &lt;&lt; <span class="keywordtype">object</span> &lt;&lt; <span class="stringliteral">"}) is called."</span>);
<a name="l00181"></a>00181       <a class="code" href="classXMLLabel.html" title="An XML label.">XMLLabel</a> xml_label(*<span class="keyword">this</span>, label);
<a name="l00182"></a>00182       <span class="keywordtype">object</span>.serialize(*<span class="keyword">this</span>);
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>)
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", ("</span> &lt;&lt;
<a name="l00187"></a>00187           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">") @"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;<span class="keywordtype">object</span> &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00188"></a>00188       <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00189"></a>00189       {
<a name="l00190"></a>00190         Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00191"></a>00191         <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) label.c_str()))
<a name="l00192"></a>00192         {
<a name="l00193"></a>00193           xmlNodePtr cur = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>;
<a name="l00194"></a>00194           <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;children;
<a name="l00195"></a>00195           <span class="keywordtype">object</span>.serialize(*<span class="keyword">this</span>);
<a name="l00196"></a>00196           <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;next;
<a name="l00197"></a>00197           <span class="keywordflow">return</span>;
<a name="l00198"></a>00198         }
<a name="l00199"></a>00199         <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00200"></a>00200       }
<a name="l00201"></a>00201       <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Cannot find requested element \""</span> + label + <span class="stringliteral">"\" in current node."</span>), <span class="stringliteral">""</span>);
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="61f0539fa881fa3c2b80ef753c13befe"></a><!-- doxytag: member="PersistXML::serialize" ref="61f0539fa881fa3c2b80ef753c13befe" args="(std::string const &amp;label, boost::shared_ptr&lt; T &gt; &amp;ptr)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize the object pointed to by a boost::shared_ptr using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00207">207</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, <a class="el" href="PersistXML_8h-source.html#l00100">store</a>, <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>, and <a class="el" href="PersistXML_8cc-source.html#l00093">valid_label()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00208"></a>00208   {
<a name="l00209"></a>00209     <span class="keywordflow">if</span> (!<a class="code" href="PersistXML_8cc.html#b1f15d2306c5fe44b59b06d350760f47" title="Returns true if the label is valid.">valid_label</a>(label))
<a name="l00210"></a>00210       <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__invalid__label.html" title="Exception class used to signal an invalid XML label.">xml_invalid_label</a>(label), <span class="stringliteral">""</span>);
<a name="l00211"></a>00211     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00212"></a>00212     {
<a name="l00213"></a>00213       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (boost::shared_ptr&lt;"</span> &lt;&lt;
<a name="l00214"></a>00214           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;)) is called."</span>);
<a name="l00215"></a>00215       <a class="code" href="classXMLLabel.html" title="An XML label.">XMLLabel</a> xml_label(*<span class="keyword">this</span>, label);
<a name="l00216"></a>00216       ptr-&gt;serialize(*<span class="keyword">this</span>);
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>)
<a name="l00219"></a>00219     {
<a name="l00220"></a>00220       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (boost::shared_ptr&lt;"</span> &lt;&lt;
<a name="l00221"></a>00221           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;) @"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;ptr &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00222"></a>00222       <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00223"></a>00223       {
<a name="l00224"></a>00224         Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00225"></a>00225         <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) label.c_str()))
<a name="l00226"></a>00226         {
<a name="l00227"></a>00227           xmlNodePtr cur = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>;
<a name="l00228"></a>00228           <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;children;
<a name="l00229"></a>00229           ptr.reset(<span class="keyword">new</span> T);
<a name="l00230"></a>00230           AllocTag(ptr.get(), <span class="stringliteral">"Allocated for a boost::shared_ptr&lt;"</span> &lt;&lt; libcwd::type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt; by PersistXML"</span>);
<a name="l00231"></a>00231           ptr-&gt;serialize(*<span class="keyword">this</span>);
<a name="l00232"></a>00232           <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;next;
<a name="l00233"></a>00233           <span class="keywordflow">return</span>;
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235         <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00236"></a>00236       }
<a name="l00237"></a>00237       <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Cannot find requested element \""</span> + label + <span class="stringliteral">"\" in current node."</span>), <span class="stringliteral">""</span>);
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="bb23b6f861c80a6a0ffb3104971cce3a"></a><!-- doxytag: member="PersistXML::serialize" ref="bb23b6f861c80a6a0ffb3104971cce3a" args="(std::string const &amp;label, std::vector&lt; T &gt; &amp;vec)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>vec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize std::vector <em>vec</em> using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00243">243</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, <a class="el" href="PersistXML_8h-source.html#l00175">serialize()</a>, <a class="el" href="PersistXML_8h-source.html#l00100">store</a>, <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>, and <a class="el" href="PersistXML_8cc-source.html#l00093">valid_label()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00244"></a>00244   {
<a name="l00245"></a>00245     <span class="keywordflow">if</span> (!<a class="code" href="PersistXML_8cc.html#b1f15d2306c5fe44b59b06d350760f47" title="Returns true if the label is valid.">valid_label</a>(label))
<a name="l00246"></a>00246       <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__invalid__label.html" title="Exception class used to signal an invalid XML label.">xml_invalid_label</a>(label), <span class="stringliteral">""</span>);
<a name="l00247"></a>00247     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00248"></a>00248     {
<a name="l00249"></a>00249       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (std::vector&lt;"</span> &lt;&lt;
<a name="l00250"></a>00250           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;)) is called."</span>);
<a name="l00251"></a>00251       <a class="code" href="classXMLLabel.html" title="An XML label.">XMLLabel</a> xml_label(*<span class="keyword">this</span>, label);
<a name="l00252"></a>00252       <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::vector&lt;T&gt;::iterator iter = vec.begin(); iter != vec.end(); ++iter)
<a name="l00253"></a>00253         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"item"</span>, *iter);
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>)
<a name="l00256"></a>00256     {
<a name="l00257"></a>00257       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (std::vector&lt;"</span> &lt;&lt;
<a name="l00258"></a>00258           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;) @"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;vec &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00259"></a>00259       <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00260"></a>00260       {
<a name="l00261"></a>00261         Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00262"></a>00262         <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) label.c_str()))
<a name="l00263"></a>00263         {
<a name="l00264"></a>00264           <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;children)
<a name="l00265"></a>00265           {
<a name="l00266"></a>00266             xmlNodePtr cur = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>;
<a name="l00267"></a>00267             <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;children;
<a name="l00268"></a>00268             <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00269"></a>00269             {
<a name="l00270"></a>00270               <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) <span class="stringliteral">"item"</span>))
<a name="l00271"></a>00271               {
<a name="l00272"></a>00272                 vec.push_back(T());
<a name="l00273"></a>00273                 this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"item"</span>, vec.back());
<a name="l00274"></a>00274               }
<a name="l00275"></a>00275               <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00276"></a>00276             }
<a name="l00277"></a>00277             <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;next;
<a name="l00278"></a>00278           }
<a name="l00279"></a>00279           <span class="keywordflow">return</span>;
<a name="l00280"></a>00280         }
<a name="l00281"></a>00281         <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00282"></a>00282       }
<a name="l00283"></a>00283       <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00284"></a>00284         <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Cannot find element \""</span> + label + <span class="stringliteral">"\"."</span>), <span class="stringliteral">""</span>);
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e9f500428211782e9bed55e734c96b1e"></a><!-- doxytag: member="PersistXML::serialize" ref="e9f500428211782e9bed55e734c96b1e" args="(std::string const &amp;label, std::list&lt; T &gt; &amp;list)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::list&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize std::list <em>list</em> using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00290">290</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, <a class="el" href="PersistXML_8h-source.html#l00175">serialize()</a>, <a class="el" href="PersistXML_8h-source.html#l00100">store</a>, <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>, and <a class="el" href="PersistXML_8cc-source.html#l00093">valid_label()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00291"></a>00291   {
<a name="l00292"></a>00292     <span class="keywordflow">if</span> (!<a class="code" href="PersistXML_8cc.html#b1f15d2306c5fe44b59b06d350760f47" title="Returns true if the label is valid.">valid_label</a>(label))
<a name="l00293"></a>00293       <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__invalid__label.html" title="Exception class used to signal an invalid XML label.">xml_invalid_label</a>(label), <span class="stringliteral">""</span>);
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00295"></a>00295     {
<a name="l00296"></a>00296       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (std::list&lt;"</span> &lt;&lt;
<a name="l00297"></a>00297           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;)) is called."</span>);
<a name="l00298"></a>00298       <a class="code" href="classXMLLabel.html" title="An XML label.">XMLLabel</a> xml_label(*<span class="keyword">this</span>, label);
<a name="l00299"></a>00299       <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::list&lt;T&gt;::iterator iter = list.begin(); iter != list.end(); ++iter)
<a name="l00300"></a>00300         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"item"</span>, *iter);
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>)
<a name="l00303"></a>00303     {
<a name="l00304"></a>00304       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (std::list&lt;"</span> &lt;&lt;
<a name="l00305"></a>00305           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;) @"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;list &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00306"></a>00306       <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00307"></a>00307       {
<a name="l00308"></a>00308         Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00309"></a>00309         <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) label.c_str()))
<a name="l00310"></a>00310         {
<a name="l00311"></a>00311           <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;children)
<a name="l00312"></a>00312           {
<a name="l00313"></a>00313             xmlNodePtr cur = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>;
<a name="l00314"></a>00314             <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;children;
<a name="l00315"></a>00315             <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00316"></a>00316             {
<a name="l00317"></a>00317               <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) <span class="stringliteral">"item"</span>))
<a name="l00318"></a>00318               {
<a name="l00319"></a>00319                 list.push_back(T());
<a name="l00320"></a>00320                 this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"item"</span>, list.back());
<a name="l00321"></a>00321               }
<a name="l00322"></a>00322               <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00323"></a>00323             }
<a name="l00324"></a>00324             <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;next;
<a name="l00325"></a>00325           }
<a name="l00326"></a>00326           <span class="keywordflow">return</span>;
<a name="l00327"></a>00327         }
<a name="l00328"></a>00328         <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00329"></a>00329       }
<a name="l00330"></a>00330       <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00331"></a>00331         <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Cannot find element \""</span> + label + <span class="stringliteral">"\"."</span>), <span class="stringliteral">""</span>);
<a name="l00332"></a>00332     }
<a name="l00333"></a>00333   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="566dab263e1ccf51e0ed9c63de565f52"></a><!-- doxytag: member="PersistXML::serialize" ref="566dab263e1ccf51e0ed9c63de565f52" args="(std::string const &amp;label, std::map&lt; KEY, INFO, COMPARE &gt; &amp;map)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename KEY, typename INFO, typename COMPARE&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; KEY, INFO, COMPARE &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>map</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize std::map <em>map</em> using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00337">337</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, <a class="el" href="PersistXML_8h-source.html#l00175">serialize()</a>, <a class="el" href="PersistXML_8h-source.html#l00100">store</a>, <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>, and <a class="el" href="PersistXML_8cc-source.html#l00093">valid_label()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00338"></a>00338   {
<a name="l00339"></a>00339     <span class="keyword">typedef</span> std::map&lt;KEY, INFO, COMPARE&gt; container_type;
<a name="l00340"></a>00340     <span class="keywordflow">if</span> (!<a class="code" href="PersistXML_8cc.html#b1f15d2306c5fe44b59b06d350760f47" title="Returns true if the label is valid.">valid_label</a>(label))
<a name="l00341"></a>00341       <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__invalid__label.html" title="Exception class used to signal an invalid XML label.">xml_invalid_label</a>(label), <span class="stringliteral">""</span>);
<a name="l00342"></a>00342     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (std::map&lt;"</span> &lt;&lt;
<a name="l00345"></a>00345           type_info_of&lt;KEY&gt;().demangled_name() &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt;
<a name="l00346"></a>00346           type_info_of&lt;INFO&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;)) is called."</span>);
<a name="l00347"></a>00347       <a class="code" href="classXMLLabel.html" title="An XML label.">XMLLabel</a> xml_label(*<span class="keyword">this</span>, label);
<a name="l00348"></a>00348       <span class="keywordflow">for</span> (<span class="keyword">typename</span> container_type::iterator iter = map.begin(); iter != map.end(); ++iter)
<a name="l00349"></a>00349       {
<a name="l00350"></a>00350         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"key"</span>, const_cast&lt;KEY&amp;&gt;(iter-&gt;first));
<a name="l00351"></a>00351         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"info"</span>, iter-&gt;second);
<a name="l00352"></a>00352       }
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>)
<a name="l00355"></a>00355     {
<a name="l00356"></a>00356       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (std::map&lt;"</span> &lt;&lt;
<a name="l00357"></a>00357           type_info_of&lt;KEY&gt;().demangled_name() &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt;
<a name="l00358"></a>00358           type_info_of&lt;INFO&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;) @"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;map &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00359"></a>00359       <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00360"></a>00360       {
<a name="l00361"></a>00361         Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00362"></a>00362         <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) label.c_str()))
<a name="l00363"></a>00363         {
<a name="l00364"></a>00364           <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;children)
<a name="l00365"></a>00365           {
<a name="l00366"></a>00366             xmlNodePtr cur = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>;
<a name="l00367"></a>00367             <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = cur-&gt;children;
<a name="l00368"></a>00368             <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00369"></a>00369             {
<a name="l00370"></a>00370               Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00371"></a>00371               <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) <span class="stringliteral">"key"</span>))
<a name="l00372"></a>00372               {
<a name="l00373"></a>00373                 KEY key;
<a name="l00374"></a>00374                 this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"key"</span>, key);
<a name="l00375"></a>00375                 std::pair&lt;typename container_type::iterator, bool&gt; result =
<a name="l00376"></a>00376                     map.insert(<span class="keyword">typename</span> container_type::value_type(key, INFO()));
<a name="l00377"></a>00377                 <span class="keywordflow">if</span> (!result.second)
<a name="l00378"></a>00378                   <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Duplicated key for map."</span>), <span class="stringliteral">""</span>);
<a name="l00379"></a>00379                 <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00380"></a>00380                 <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00381"></a>00381                 {
<a name="l00382"></a>00382                   Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00383"></a>00383                   <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) <span class="stringliteral">"key"</span>))
<a name="l00384"></a>00384                   {
<a name="l00385"></a>00385                     <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = NULL;
<a name="l00386"></a>00386                     <span class="keywordflow">break</span>;
<a name="l00387"></a>00387                   }
<a name="l00388"></a>00388                   <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) <span class="stringliteral">"info"</span>))
<a name="l00389"></a>00389                   {
<a name="l00390"></a>00390                     this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(<span class="stringliteral">"info"</span>, result.first-&gt;second);
<a name="l00391"></a>00391                     Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"Inserted in map: "</span> &lt;&lt; *result.first);
<a name="l00392"></a>00392                     <span class="keywordflow">break</span>;
<a name="l00393"></a>00393                   }
<a name="l00394"></a>00394                   <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00395"></a>00395                 }
<a name="l00396"></a>00396                 <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00397"></a>00397                   <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Missing element \"info\"."</span>), <span class="stringliteral">""</span>);
<a name="l00398"></a>00398               }
<a name="l00399"></a>00399               <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00400"></a>00400             }
<a name="l00401"></a>00401           }
<a name="l00402"></a>00402           <span class="keywordflow">return</span>;
<a name="l00403"></a>00403         }
<a name="l00404"></a>00404         <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00405"></a>00405       }
<a name="l00406"></a>00406       <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00407"></a>00407         <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Cannot find element \""</span> + label + <span class="stringliteral">"\"."</span>), <span class="stringliteral">""</span>);
<a name="l00408"></a>00408     }
<a name="l00409"></a>00409   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="89aff78d91246230072598796ef78534"></a><!-- doxytag: member="PersistXML::serialize" ref="89aff78d91246230072598796ef78534" args="(std::string const &amp;label, boost::optional&lt; T &gt; &amp;opt)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::optional&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>opt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize boost::optional <em>opt</em> using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00413">413</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="PersistXML_8h-source.html#l00101">load</a>, <a class="el" href="PersistXML_8h-source.html#l00110">M_cur</a>, <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, <a class="el" href="PersistXML_8h-source.html#l00175">serialize()</a>, <a class="el" href="PersistXML_8h-source.html#l00100">store</a>, and <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00414"></a>00414   {
<a name="l00415"></a>00415     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00416"></a>00416     {
<a name="l00417"></a>00417       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (boost::optional&lt;"</span> &lt;&lt;
<a name="l00418"></a>00418           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;)) is called."</span>);
<a name="l00419"></a>00419       <span class="keywordflow">if</span> (opt)
<a name="l00420"></a>00420         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(label, *opt);
<a name="l00421"></a>00421       <span class="keywordflow">else</span>
<a name="l00422"></a>00422       {
<a name="l00423"></a>00423         std::string unknown(<span class="stringliteral">"unknown"</span>);
<a name="l00424"></a>00424         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(label, unknown);
<a name="l00425"></a>00425       }
<a name="l00426"></a>00426     }
<a name="l00427"></a>00427     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda312929ba0cd974a84c9edeaad046c922" title="Open for reading objects from the archive.">load</a>)
<a name="l00428"></a>00428     {
<a name="l00429"></a>00429       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", (boost::optional&lt;"</span> &lt;&lt;
<a name="l00430"></a>00430           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;) @"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;opt &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00431"></a>00431       <span class="keywordtype">bool</span> unknown = <span class="keyword">false</span>;
<a name="l00432"></a>00432       <span class="comment">// Peek ahead (look for the label).</span>
<a name="l00433"></a>00433       <span class="keywordflow">while</span> (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00434"></a>00434       {
<a name="l00435"></a>00435         Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"M_cur is \""</span> &lt;&lt; <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00436"></a>00436         <span class="keywordflow">if</span> (!xmlStrcmp(<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;name, (xmlChar <span class="keyword">const</span>*) label.c_str()))
<a name="l00437"></a>00437         {
<a name="l00438"></a>00438           unknown = (<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;children-&gt;type == XML_TEXT_NODE &amp;&amp;
<a name="l00439"></a>00439                      !strcmp((<span class="keywordtype">char</span>*)<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;children-&gt;name, <span class="stringliteral">"text"</span>) &amp;&amp;
<a name="l00440"></a>00440                      !strcmp((<span class="keywordtype">char</span>*)<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;children-&gt;content, <span class="stringliteral">"unknown"</span>));
<a name="l00441"></a>00441           <span class="keywordflow">break</span>;
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443         <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a> = <a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>-&gt;next;
<a name="l00444"></a>00444       }
<a name="l00445"></a>00445       <span class="keywordflow">if</span> (!<a class="code" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442" title="Current node in M_doc.">M_cur</a>)
<a name="l00446"></a>00446         <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classxml__parse__error.html" title="Exception class used to signal a failure in parsing an XML document.">xml_parse_error</a>(<span class="stringliteral">"Cannot find element \""</span> + label + <span class="stringliteral">"\"."</span>), <span class="stringliteral">""</span>);
<a name="l00447"></a>00447       <span class="comment">// Read the content.</span>
<a name="l00448"></a>00448       <span class="keywordflow">if</span> (unknown)
<a name="l00449"></a>00449       {
<a name="l00450"></a>00450         std::string unknown;
<a name="l00451"></a>00451         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(label, unknown);
<a name="l00452"></a>00452         <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(unknown == <span class="stringliteral">"unknown"</span>);
<a name="l00453"></a>00453         opt = boost::none;
<a name="l00454"></a>00454       }
<a name="l00455"></a>00455       <span class="keywordflow">else</span>
<a name="l00456"></a>00456       {
<a name="l00457"></a>00457         T value;
<a name="l00458"></a>00458         this-&gt;<a class="code" href="classPersistXML.html#5612c3e53fee8ffb21a228536fea9595" title="Serialize object using the xml tag &amp;lt;label&amp;gt;&amp;lt;/label&amp;gt;.">serialize</a>(label, value);
<a name="l00459"></a>00459         opt = value;
<a name="l00460"></a>00460       }
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5e61b58d1792c76c85a31d850864bb06"></a><!-- doxytag: member="PersistXML::serialize_builtin" ref="5e61b58d1792c76c85a31d850864bb06" args="(std::string const &amp;label, T &amp;builtin)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::serialize_builtin           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&nbsp;</td>
          <td class="paramname"> <em>builtin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serialize builtin type <em>builtin</em> using the xml tag &lt;label&gt;&lt;/label&gt;. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00506">506</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00105">M_openmode</a>, <a class="el" href="debug_8cc-source.html#l00043">debug::channels::dc::persist</a>, and <a class="el" href="PersistXML_8h-source.html#l00100">store</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00507"></a>00507   {
<a name="l00508"></a>00508     <span class="keywordflow">if</span> (<a class="code" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419" title="Whether or not the archive is opened for reading or writing.">M_openmode</a> == <a class="code" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda332ebd1dc31393255a2a6ed1ddcb0270" title="Open for writing objects to the archive.">store</a>)
<a name="l00509"></a>00509     {
<a name="l00510"></a>00510       Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4df69f2eaea85a2436897d76669e43a5" title="This debug channel is used for XMLPersist.">dc::persist</a>, <span class="stringliteral">"PersistXML::serialize_builtin&lt;"</span> &lt;&lt;
<a name="l00511"></a>00511           type_info_of&lt;T&gt;().demangled_name() &lt;&lt; <span class="stringliteral">"&gt;(\""</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"\", "</span> &lt;&lt; builtin &lt;&lt; <span class="stringliteral">") is called."</span>);
<a name="l00512"></a>00512       M_archive &lt;&lt; M_indent &lt;&lt; '&lt;' &lt;&lt; label &lt;&lt; '&gt;<span class="stringliteral">';</span>
<a name="l00513"></a>00513 <span class="stringliteral">      write_escaped(builtin);</span>
<a name="l00514"></a>00514 <span class="stringliteral">      M_archive &lt;&lt; "&lt;/" &lt;&lt; label &lt;&lt; "&gt;\n";</span>
<a name="l00515"></a>00515 <span class="stringliteral">    }</span>
<a name="l00516"></a>00516 <span class="stringliteral">    else if (M_openmode == load)</span>
<a name="l00517"></a>00517 <span class="stringliteral">    {</span>
<a name="l00518"></a>00518 <span class="stringliteral">      Dout(dc::persist, "PersistXML::serialize_builtin&lt;" &lt;&lt;</span>
<a name="l00519"></a>00519 <span class="stringliteral">          type_info_of&lt;T&gt;().demangled_name() &lt;&lt; "&gt;(\"" &lt;&lt; label &lt;&lt; "\", @" &lt;&lt; (void*)&amp;builtin &lt;&lt; ") is called.");</span>
<a name="l00520"></a>00520 <span class="stringliteral">      while (M_cur)</span>
<a name="l00521"></a>00521 <span class="stringliteral">      {</span>
<a name="l00522"></a>00522 <span class="stringliteral">        Dout(dc::persist, "M_cur is \"" &lt;&lt; M_cur-&gt;name &lt;&lt; "\".");</span>
<a name="l00523"></a>00523 <span class="stringliteral">        if (!xmlStrcmp(M_cur-&gt;name, (xmlChar const*) label.c_str()))</span>
<a name="l00524"></a>00524 <span class="stringliteral">        {</span>
<a name="l00525"></a>00525 <span class="stringliteral">          if (M_cur-&gt;children)</span>
<a name="l00526"></a>00526 <span class="stringliteral">          {</span>
<a name="l00527"></a>00527 <span class="stringliteral">            std::stringstream is;</span>
<a name="l00528"></a>00528 <span class="stringliteral">            is &lt;&lt; M_cur-&gt;children-&gt;content;</span>
<a name="l00529"></a>00529 <span class="stringliteral">            read_data(is, builtin);</span>
<a name="l00530"></a>00530 <span class="stringliteral">          }</span>
<a name="l00531"></a>00531 <span class="stringliteral">          else</span>
<a name="l00532"></a>00532 <span class="stringliteral">            builtin = T();      // Should only be used for std::string.</span>
<a name="l00533"></a>00533 <span class="stringliteral">          return;</span>
<a name="l00534"></a>00534 <span class="stringliteral">        }</span>
<a name="l00535"></a>00535 <span class="stringliteral">        M_cur = M_cur-&gt;next;</span>
<a name="l00536"></a>00536 <span class="stringliteral">      }</span>
<a name="l00537"></a>00537 <span class="stringliteral">      if (!M_cur)</span>
<a name="l00538"></a>00538 <span class="stringliteral">        THROW_EXCEPTION(xml_parse_error("Cannot find element \"" + label + "\"."), "");</span>
<a name="l00539"></a>00539 <span class="stringliteral">    }</span>
<a name="l00540"></a>00540 <span class="stringliteral">  }</span>
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="38c1a8f6dbee2b89bfeb0bfc15c12bfa"></a><!-- doxytag: member="PersistXML::write_escaped" ref="38c1a8f6dbee2b89bfeb0bfc15c12bfa" args="(char const &amp;c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::write_escaped           </td>
          <td>(</td>
          <td class="paramtype">char const &amp;&nbsp;</td>
          <td class="paramname"> <em>c</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write char <em>c</em> to archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00116">116</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00107">M_archive</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00117"></a>00117   {
<a name="l00118"></a>00118     <span class="keywordflow">switch</span> (c)
<a name="l00119"></a>00119     {
<a name="l00120"></a>00120       <span class="keywordflow">default</span>:
<a name="l00121"></a>00121         <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a>.put(c);
<a name="l00122"></a>00122         <span class="keywordflow">break</span>;
<a name="l00123"></a>00123       <span class="keywordflow">case</span> <span class="charliteral">'&lt;'</span>:
<a name="l00124"></a>00124         <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <span class="stringliteral">"&amp;lt;"</span>;
<a name="l00125"></a>00125         <span class="keywordflow">break</span>;
<a name="l00126"></a>00126       <span class="keywordflow">case</span> <span class="charliteral">'&gt;'</span>:
<a name="l00127"></a>00127         <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <span class="stringliteral">"&amp;gt;"</span>;
<a name="l00128"></a>00128         <span class="keywordflow">break</span>;
<a name="l00129"></a>00129       <span class="keywordflow">case</span> <span class="charliteral">'&amp;'</span>:
<a name="l00130"></a>00130         <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <span class="stringliteral">"&amp;amp;"</span>;
<a name="l00131"></a>00131         <span class="keywordflow">break</span>;
<a name="l00132"></a>00132       <span class="keywordflow">case</span> <span class="charliteral">'"'</span>:
<a name="l00133"></a>00133         <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <span class="stringliteral">"&amp;quot;"</span>;
<a name="l00134"></a>00134         <span class="keywordflow">break</span>;
<a name="l00135"></a>00135       <span class="keywordflow">case</span> <span class="charliteral">'\''</span>:
<a name="l00136"></a>00136         <a class="code" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d" title="The file stream of an open archive.">M_archive</a> &lt;&lt; <span class="stringliteral">"&amp;apos;"</span>;
<a name="l00137"></a>00137         <span class="keywordflow">break</span>;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="49b75a89604060d42bcfd93d1402ed08"></a><!-- doxytag: member="PersistXML::write_escaped" ref="49b75a89604060d42bcfd93d1402ed08" args="(std::string const &amp;builtin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::write_escaped           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>builtin</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write string <em>s</em> to archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8cc-source.html#l00142">142</a> of file <a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00486">write_escaped()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00143"></a>00143   {
<a name="l00144"></a>00144     std::stringstream str;
<a name="l00145"></a>00145     str &lt;&lt; builtin;
<a name="l00146"></a>00146     std::istreambuf_iterator&lt;char&gt; <span class="keyword">const</span> end;
<a name="l00147"></a>00147     <span class="keywordflow">for</span> (std::istreambuf_iterator&lt;char&gt; iter(str); iter != end; ++iter)
<a name="l00148"></a>00148       <a class="code" href="classPersistXML.html#84c22189a1765ecd9e7972a36e4f202f" title="Write builtin-type builtin to archive.">write_escaped</a>(*iter);
<a name="l00149"></a>00149   } 
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c543180c1cadac8ad327d71888cc6ca8"></a><!-- doxytag: member="PersistXML::write_escaped" ref="c543180c1cadac8ad327d71888cc6ca8" args="(unsigned char const &amp;c)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::write_escaped           </td>
          <td>(</td>
          <td class="paramtype">unsigned char const &amp;&nbsp;</td>
          <td class="paramname"> <em>c</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write unsigned char <em>c</em> to archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00492">492</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>References <a class="el" href="PersistXML_8h-source.html#l00486">write_escaped()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00492"></a>00492 { <a class="code" href="classPersistXML.html#84c22189a1765ecd9e7972a36e4f202f" title="Write builtin-type builtin to archive.">write_escaped</a>(reinterpret_cast&lt;char const&amp;&gt;(c)); }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3bbc8083eb86c6265a2136a8999e78e1"></a><!-- doxytag: member="PersistXML::read_data" ref="3bbc8083eb86c6265a2136a8999e78e1" args="(std::stringstream &amp;ss, std::string &amp;s)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void PersistXML::read_data           </td>
          <td>(</td>
          <td class="paramtype">std::stringstream &amp;&nbsp;</td>
          <td class="paramname"> <em>ss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read string <em>s</em> from stringstream <em>ss</em>. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00502">502</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00502"></a>00502 { s = ss.str(); }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="3d6113f59b7b2148cc753f901e0650d1"></a><!-- doxytag: member="PersistXML::operator&lt;&lt;" ref="3d6113f59b7b2148cc753f901e0650d1" args="(std::ostream &amp;os, openmode_type openmode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt;           </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">PersistXML::openmode_type</a>&nbsp;</td>
          <td class="paramname"> <em>openmode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For debugging purposes. Write a <a class="el" href="classPersistXML.html#014814a2c9ece11fb570f6e464c15611" title="Return the current state.">PersistXML::openmode</a> to <em>os</em>. 
<p>

<p>Definition at line <a class="el" href="debug__ostream__operators_8cc-source.html#l00175">175</a> of file <a class="el" href="debug__ostream__operators_8cc-source.html">debug_ostream_operators.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00176"></a>00176 {
<a name="l00177"></a>00177   <span class="keywordflow">return</span> os &lt;&lt; <a class="code" href="namespacedebug.html#bd19a53f9dcf6a6f21cfce7bddb4765b" title="Return a string literal representing the name of the PersistXML::openmode_type openmode...">debug::openmode_name</a>(<a class="code" href="classPersistXML.html#014814a2c9ece11fb570f6e464c15611" title="Return the current state.">openmode</a>);
<a name="l00178"></a>00178 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="2b18e69338f77033f4308a56ee111419"></a><!-- doxytag: member="PersistXML::M_openmode" ref="2b18e69338f77033f4308a56ee111419" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPersistXML.html#ebe6d1165a2ef09b5cc722f09d145eda">openmode_type</a> <a class="el" href="classPersistXML.html#2b18e69338f77033f4308a56ee111419">PersistXML::M_openmode</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Whether or not the archive is opened for reading or writing. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00105">105</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00081">close()</a>, <a class="el" href="PersistXML_8cc-source.html#l00064">open()</a>, <a class="el" href="PersistXML_8h-source.html#l00123">openmode()</a>, <a class="el" href="PersistXML_8h-source.html#l00175">serialize()</a>, <a class="el" href="PersistXML_8h-source.html#l00506">serialize_builtin()</a>, and <a class="el" href="PersistXML_8cc-source.html#l00033">~PersistXML()</a>.</p>

</div>
</div><p>
<a class="anchor" name="40ca9714090ca036aad28dce47e6c46b"></a><!-- doxytag: member="PersistXML::M_archivename" ref="40ca9714090ca036aad28dce47e6c46b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classPersistXML.html#40ca9714090ca036aad28dce47e6c46b">PersistXML::M_archivename</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The name of the XML file used to write the archive to disk. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00106">106</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00064">open()</a>, and <a class="el" href="PersistXML_8cc-source.html#l00041">parse_archive()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6d5a8241c4e060671c2bd3a33bcb755d"></a><!-- doxytag: member="PersistXML::M_archive" ref="6d5a8241c4e060671c2bd3a33bcb755d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::fstream <a class="el" href="classPersistXML.html#6d5a8241c4e060671c2bd3a33bcb755d">PersistXML::M_archive</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The file stream of an open archive. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00107">107</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00081">close()</a>, <a class="el" href="PersistXML_8cc-source.html#l00064">open()</a>, <a class="el" href="PersistXML_8cc-source.html#l00116">write_escaped()</a>, <a class="el" href="PersistXML_8h-source.html#l00167">XMLLabel::XMLLabel()</a>, and <a class="el" href="PersistXML_8h-source.html#l00170">XMLLabel::~XMLLabel()</a>.</p>

</div>
</div><p>
<a class="anchor" name="54815808b1b69750789c4acdfc41481f"></a><!-- doxytag: member="PersistXML::M_indent" ref="54815808b1b69750789c4acdfc41481f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIndentation.html">Indentation</a> <a class="el" href="classPersistXML.html#54815808b1b69750789c4acdfc41481f">PersistXML::M_indent</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current XML indentation. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00108">108</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00081">close()</a>, <a class="el" href="PersistXML_8cc-source.html#l00064">open()</a>, <a class="el" href="PersistXML_8h-source.html#l00167">XMLLabel::XMLLabel()</a>, and <a class="el" href="PersistXML_8h-source.html#l00170">XMLLabel::~XMLLabel()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0a91795734c743d5a09a10bd94b56250"></a><!-- doxytag: member="PersistXML::M_doc" ref="0a91795734c743d5a09a10bd94b56250" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xmlDocPtr <a class="el" href="classPersistXML.html#0a91795734c743d5a09a10bd94b56250">PersistXML::M_doc</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
XML document open for reading. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00109">109</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00081">close()</a>, and <a class="el" href="PersistXML_8cc-source.html#l00041">parse_archive()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ffe7f6b77657b09a8e5c22e0d85d3442"></a><!-- doxytag: member="PersistXML::M_cur" ref="ffe7f6b77657b09a8e5c22e0d85d3442" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xmlNodePtr <a class="el" href="classPersistXML.html#ffe7f6b77657b09a8e5c22e0d85d3442">PersistXML::M_cur</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current node in M_doc. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00110">110</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

<p>Referenced by <a class="el" href="PersistXML_8cc-source.html#l00041">parse_archive()</a>, and <a class="el" href="PersistXML_8h-source.html#l00175">serialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3090d396ad00d816a026614d486fff59"></a><!-- doxytag: member="PersistXML::M_parent_nodes" ref="3090d396ad00d816a026614d486fff59" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::stack&lt;std::vector&lt;xmlNodePtr&gt; &gt; <a class="el" href="classPersistXML.html#3090d396ad00d816a026614d486fff59">PersistXML::M_parent_nodes</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Stack with parents of current node. 
<p>

<p>Definition at line <a class="el" href="PersistXML_8h-source.html#l00111">111</a> of file <a class="el" href="PersistXML_8h-source.html">PersistXML.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="PersistXML_8h-source.html">PersistXML.h</a><li><a class="el" href="PersistXML_8cc-source.html">PersistXML.cc</a></ul>
</div>
<hr>

<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR>
<TH ALIGN=left BGCOLOR="#e8feff"><ADDRESS>Copyright &copy; 2005-2007 Carlo Wood.&nbsp; All rights reserved.</ADDRESS></TH>
</TR>
</TABLE>

</DIV>
</BODY>
</HTML>

