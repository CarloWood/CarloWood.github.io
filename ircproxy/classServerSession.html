<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML LANG="en-us">
 
<HEAD>
<META name="Author" content="Carlo Wood">
<META name="description" content="IRC proxy">
<META name="keywords" content="IRC, proxy, bnc, security, protection">
<META http-equiv="content-type" content="text/html; charset=iso-8859-1">
<TITLE>ircproxy documentation</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="main.css" REL="stylesheet" TYPE="text/css">
</HEAD>

<BODY>

<TABLE class="header" BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR>
<TD WIDTH=120><IMG SRC="images/ircproxy.png" BORDER=0></TD>
<TD VALIGN=center ALIGN=center BGCOLOR="#0A0607"><FONT size=+4 color="#ffffff"><B>&nbsp;ircproxy</B>&nbsp;</FONT>
<FONT size=+3 color="#ffffff">The&nbsp;Ultimate&nbsp;Cyborg</FONT></TD>
</TR>
</TABLE>

<DIV class="normal">
<hr>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ServerSession Class Reference</h1><!-- doxytag: class="ServerSession" --><!-- doxytag: inherits="Index&lt; ServerSession &gt;,IdentityReference,sock_dtct,event_client_ct" --><code>#include &lt;<a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for ServerSession:</div>
<div class="dynsection">

<p><center><img src="classServerSession.png" usemap="#ServerSession_map" border="0" alt=""></center>
<map name="ServerSession_map">
<area href="classIndex.html" alt="Index< ServerSession >" shape="rect" coords="0,0,303,24">
<area href="classIdentityReference.html" alt="IdentityReference" shape="rect" coords="313,0,616,24">
</map>
</div>

<p>
<a href="classServerSession-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
A server session, from connect till disconnect. 
<p>
This class represents a server session: from that we successfully connect to a server until the connection is closed or lost again. 
<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00047">47</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="Target_8h.html#881dbd1ac647bc44caa3c16b518770ba">target_hold_map_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The type of M_joined_channels.  <a href="#f51d96a79af64d54b0582813370fc1e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::map&lt; std::string, <br>
boost::shared_ptr&lt; <a class="el" href="classChannel.html">Channel</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#b210adf362d50bfba64dcc9a9d28fccd">join_pipeline_type</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The type of M_join_pipeline.  <a href="#b210adf362d50bfba64dcc9a9d28fccd"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#4e07e70d29477ca8c642c1197c615718">ServerSession</a> (<a class="el" href="classIdentity.html">Identity</a> &amp;identity, <a class="el" href="classServerConnection.html">ServerConnection</a> &amp;server_connection)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a <a class="el" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a> instance for identity <em>identity</em> and server connection <em>server_connection</em>.  <a href="#4e07e70d29477ca8c642c1197c615718"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#db56f9aa86018c1f32ef9f0d8736934d">~ServerSession</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#db56f9aa86018c1f32ef9f0d8736934d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#b5e541da0e832562f5bf104ae2973a6e">start_authentication</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called from <a class="el" href="classServerConnection.html#0bb470a3215a2780f846e806897359c5" title="Attempt an immediate connect to the server.">ServerConnection::do_connect</a>. Takes care of sending PASS/NICK/USER/PONG/MODE.  <a href="#b5e541da0e832562f5bf104ae2973a6e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#007e71fd0ebc59b15455cf7cfc73acd3">set_auth_ping_argument</a> (std::string const &amp;auth_ping_argument)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called from <a class="el" href="classServerConnection.html#61f1caf7c83a2bdef5d6d75968754fcd" title="This function is called when a PING message is received.">ServerConnection::decode_ping</a> with the argument of the first PING.  <a href="#007e71fd0ebc59b15455cf7cfc73acd3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#a194c92493a43f5c86d79eb5ea8e9c27">auth_ping_argument</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return argument of the first PING.  <a href="#a194c92493a43f5c86d79eb5ea8e9c27"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#924f17d7e20c4ed84a13f2212a52a84a">construct_network_object</a> (std::string const &amp;network_name, std::string const &amp;domain)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new network object with name <em>network_name</em> and domain <em>domain</em> (if any).  <a href="#924f17d7e20c4ed84a13f2212a52a84a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#00383911f3971700cf3fd0ef8de847bd">detected_network</a> (networks_type::iterator network_iter)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize network. This function is called as soon as the network we are connected to is known.  <a href="#00383911f3971700cf3fd0ef8de847bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#989f1e1f69fed1b80e62f3ed6df57b3b">authentication_successful</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when the authentication was successful (when receiving the 001 numeric).  <a href="#989f1e1f69fed1b80e62f3ed6df57b3b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#52c3e3a064e8ff948ab51de9a3a19db4">fatal_error</a> (char const *error_msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A fatal error occured. Calling this function will terminate the <a class="el" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>.  <a href="#52c3e3a064e8ff948ab51de9a3a19db4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#1b60f26b5d5e97d761ecbd7a4a59bb98">found_network_name</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when the name of the <a class="el" href="classNetwork.html" title="An IRC network.">Network</a> is known (after numeric 005).  <a href="#1b60f26b5d5e97d761ecbd7a4a59bb98"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="Matcher_8h.html#5fde8f2c4a1179dd4e5a92fd67974b4b">MatcherEventServer</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#8fc297dda17c13decc4906f165d2de19">message_event_server</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a reference to the event server for incoming messages.  <a href="#8fc297dda17c13decc4906f165d2de19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="Matcher_8h.html#5fde8f2c4a1179dd4e5a92fd67974b4b">MatcherEventServer</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#b681d5cfeba2b9d6918d067ae409d4a1">message_event_server</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a const reference to the event server for incoming messages.  <a href="#b681d5cfeba2b9d6918d067ae409d4a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classNickPair.html">NickPair</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#3bf7aaaf37f650ecae8ede46fddb06e6">nicks</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classServer.html" title="An IRC server.">Server</a> session nick pair.  <a href="#3bf7aaaf37f650ecae8ede46fddb06e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classNickPair.html">NickPair</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#89a53637bb2382bd8869812dc9aa2eb4">nicks</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classServer.html" title="An IRC server.">Server</a> session nick pair.  <a href="#89a53637bb2382bd8869812dc9aa2eb4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#1cdbba5e545c0759814b92d0c578cc02">joined_channels</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return reference to map with joined channels.  <a href="#1cdbba5e545c0759814b92d0c578cc02"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#da9a15ce03d25cb951eb34be4c555e6b">joined_channels</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return const reference to map with joined channels.  <a href="#da9a15ce03d25cb951eb34be4c555e6b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classUserMode.html">UserMode</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#eb14b6156420f8413e9d3e905688783d">user_mode</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return my user mode.  <a href="#eb14b6156420f8413e9d3e905688783d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classUserMode.html">UserMode</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#2a8ac805dea978304fbcc12d8183a4f8">user_mode</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return my user mode.  <a href="#2a8ac805dea978304fbcc12d8183a4f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#6921a52d4541f22dc13cf48b743baf19">queue_msg</a> (<a class="el" href="classMessageOut.html">MessageOut</a> const &amp;msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> message <em>msg</em>.  <a href="#6921a52d4541f22dc13cf48b743baf19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#19ff70c7a27c9d832cc072ac7f4add8a">queue_msg_as_is</a> (<a class="el" href="classClientMessageIn.html">ClientMessageIn</a> const &amp;msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> message <em>msg</em> with default priority without changing it.  <a href="#19ff70c7a27c9d832cc072ac7f4add8a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classWhoRequest.html">WhoRequest</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#bbf6f685d2c227bb9b3c9089f14cd63e">current_who_request</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first element of M_who_queue.  <a href="#bbf6f685d2c227bb9b3c9089f14cd63e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#e6e767a4bc2fd4a4dc2cd4330144a34a">pop_who_request</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pop the first element of M_who_queue.  <a href="#e6e767a4bc2fd4a4dc2cd4330144a34a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#faf6550774de7ed58ac07a13a067c9a9">send_nick_write_event</a> (<a class="el" href="classPseudoMessageEventType.html">PseudoMessageEventType</a> const &amp;, std::string nick)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A write event of a pseudo NICK message happened. Actually write the NICK message.  <a href="#faf6550774de7ed58ac07a13a067c9a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#4fc533f77c0d9a4285267db38941a83b">send_who_write_event</a> (<a class="el" href="classPseudoMessageEventType.html">PseudoMessageEventType</a> const &amp;event_type, <a class="el" href="classWhoRequest.html">WhoRequest</a> who_request)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A write event of a pseudo WHO message happened. Actually write the WHO message.  <a href="#4fc533f77c0d9a4285267db38941a83b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#ef1ffc59c11f11e7e5aa743306a1ae03">force_quit</a> (timer_event_type_ct const &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called 1 second after sending a QUIT and the connection still wasn't terminated.  <a href="#ef1ffc59c11f11e7e5aa743306a1ae03"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classISupport.html">ISupport</a> const &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#b680010714ccaf888104961b76e54d0b">i_support</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accessor for M_i_support.  <a href="#b680010714ccaf888104961b76e54d0b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classISupport.html">ISupport</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#9aea02ab6467d0e053239f1be61be9f3">i_support</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accessor for M_i_support.  <a href="#9aea02ab6467d0e053239f1be61be9f3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classChannel.html">Channel</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#4bdb5a1812f8ce94d41a22ada9d961a5">join_pipeline</a> (std::string const &amp;channel_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a pointer to the channel in the pipeline, if any. <a class="el" href="classChannel.html" title="An IRC Channel.">Channel</a> is removed from pipeline.  <a href="#4bdb5a1812f8ce94d41a22ada9d961a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#107a2150c039e369b50ee3ffe1809457">set_disconnect_reason</a> (std::string const &amp;disconnect_reason)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the disconnect reason to <em>disconnect_reason</em>.  <a href="#107a2150c039e369b50ee3ffe1809457"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classServerConnection.html">ServerConnection</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#d2bce757189035208f2ae4ccdf4b981d">server_connection</a> (void) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accessor for underlying server connection object.  <a href="#d2bce757189035208f2ae4ccdf4b981d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classNick.html">Nick</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#a2a8691f762c3c2338e52ae91dcbc592">get_nick</a> (std::string const &amp;nick_name, bool create=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get or create a <a class="el" href="classNick.html" title="A nick name.">Nick</a> for <em>nick_name</em>.  <a href="#a2a8691f762c3c2338e52ae91dcbc592"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classBool.html">Bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#ff50b0591d529f0a69d9c9f05695f716">M_detected_network</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if the network is fully detected.  <a href="#ff50b0591d529f0a69d9c9f05695f716"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#2b95445e42efd37acad6fd400fa9dcb4">new_message_received</a> (<a class="el" href="classServerMessageIn.html">ServerMessageIn</a> const &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incoming event from <a class="el" href="classServerSessionInput.html" title="Server session input decoder.">ServerSessionInput</a>.  <a href="#2b95445e42efd37acad6fd400fa9dcb4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#169ec4740ea2440fe079642c47ff94e5">network_connection_terminated</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A read(2) on the socket returned 0.  <a href="#169ec4740ea2440fe079642c47ff94e5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#b9951249d1d8f2b0004f783fbd0a8fbf">send_rejoins</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a JOIN to the server for every channel we are on.  <a href="#b9951249d1d8f2b0004f783fbd0a8fbf"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classServerConnection.html">ServerConnection</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac">M_server_connection</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The owning object.  <a href="#4d77270ae01dc69a5003b1c8b55bceac"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="Matcher_8h.html#5fde8f2c4a1179dd4e5a92fd67974b4b">MatcherEventServer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#8c9b60b19714b52380178659552a1bbb">M_message_event_server</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event server for incoming messages.  <a href="#8c9b60b19714b52380178659552a1bbb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classNickPair.html">NickPair</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb">M_server_session_nicks</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classServer.html" title="An IRC server.">Server</a> side nick pair.  <a href="#48f039a3ed11a3168453b3fb5d41adfb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#b509d89122b3453fc2e4cbfab27a7db7">M_joined_channels</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serverside lookup map for channels joined by this identity.  <a href="#b509d89122b3453fc2e4cbfab27a7db7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classUserMode.html">UserMode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#2e3e8affeb1200b8216be93dcdbdfe4a">M_user_mode</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">My user mode.  <a href="#2e3e8affeb1200b8216be93dcdbdfe4a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classAuthState.html">AuthState</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd">M_auth_state</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer object with temporary authentication state information.  <a href="#833dd459ff7c33a866ae2dc9eb1899fd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classQueue.html">Queue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#44a94d5a4f05f14cfc58a5e405c44f3b">M_output_queue</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> for output messages.  <a href="#44a94d5a4f05f14cfc58a5e405c44f3b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::queue&lt; <a class="el" href="classWhoRequest.html">WhoRequest</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47">M_who_queue</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> storing WHO request messages.  <a href="#725aec1cd2f088db41e63c29c24caf47"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classISupport.html">ISupport</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9">M_i_support</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Object that stores the numeric 005 information.  <a href="#0e7c11897ab54294ed465f86ec07a2b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd">M_network_name</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporary storage of the network name as decoded from numeric 001, until numeric 005 is received.  <a href="#043f215cb536278feb27ab40e09c01fd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#a64046568f18d4396b33f9661661dfb8">M_umodes</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The user modes as received in numeric 004.  <a href="#a64046568f18d4396b33f9661661dfb8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classServerSession.html#b210adf362d50bfba64dcc9a9d28fccd">join_pipeline_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d">M_join_pipeline</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channels for which we sent a JOIN as part of a reconnect.  <a href="#3610722ed15fae0db0a04657abf1ea7d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#4c304033b289394bda21ce125abb3106">M_disconnect_reason</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An error message that should be sent to the client if the connection is lost, if any.  <a href="#4c304033b289394bda21ce125abb3106"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServerSession.html#e3e1df1bcbb8d400040fc535d2270614">S_server_sessions</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Total number of server session objects.  <a href="#e3e1df1bcbb8d400040fc535d2270614"></a><br></td></tr>
</table>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="f51d96a79af64d54b0582813370fc1e6"></a><!-- doxytag: member="ServerSession::joined_channels_type" ref="f51d96a79af64d54b0582813370fc1e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="Target_8h.html#881dbd1ac647bc44caa3c16b518770ba">target_hold_map_type</a> <a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">ServerSession::joined_channels_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The type of M_joined_channels. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00049">49</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="b210adf362d50bfba64dcc9a9d28fccd"></a><!-- doxytag: member="ServerSession::join_pipeline_type" ref="b210adf362d50bfba64dcc9a9d28fccd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::string, boost::shared_ptr&lt;<a class="el" href="classChannel.html">Channel</a>&gt; &gt; <a class="el" href="classServerSession.html#b210adf362d50bfba64dcc9a9d28fccd">ServerSession::join_pipeline_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The type of M_join_pipeline. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00050">50</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="4e07e70d29477ca8c642c1197c615718"></a><!-- doxytag: member="ServerSession::ServerSession" ref="4e07e70d29477ca8c642c1197c615718" args="(Identity &amp;identity, ServerConnection &amp;server_connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ServerSession::ServerSession           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIdentity.html">Identity</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>identity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classServerConnection.html">ServerConnection</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>server_connection</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a <a class="el" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a> instance for identity <em>identity</em> and server connection <em>server_connection</em>. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00073">73</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="debug_8cc-source.html#l00045">debug::channels::dc::objects</a>, and <a class="el" href="ServerSession_8h-source.html#l00063">S_server_sessions</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00073"></a>00073                                                                            :
<a name="l00074"></a>00074         <a class="code" href="classIdentityReference.html#9f35ea99263f016b6368f762be19cd4f" title="Default constructor.">IdentityReference</a>(&amp;identity), <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>(server_connection),
<a name="l00075"></a>00075         <a class="code" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb" title="Server side nick pair.">M_server_session_nicks</a>(*<span class="keyword">this</span>), <a class="code" href="classServerSession.html#44a94d5a4f05f14cfc58a5e405c44f3b" title="Queue for output messages.">M_output_queue</a>(server_connection, 0.5, 5, 5),
<a name="l00076"></a>00076         <a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>(server_connection)
<a name="l00077"></a>00077 <span class="preprocessor">#ifdef CWDEBUG</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>      , <a class="code" href="classServerSession.html#ff50b0591d529f0a69d9c9f05695f716" title="True if the network is fully detected.">M_detected_network</a>(<span class="stringliteral">"M_detected_network"</span>)
<a name="l00079"></a>00079 <span class="preprocessor">#endif</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>        {
<a name="l00081"></a>00081           Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4fad4911d56fc2bccbb8ed9041454394" title="This debug channel is used for object construction/destruction tracking.">dc::objects</a>, <span class="stringliteral">"Constructing ServerSession("</span> &lt;&lt; identity &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; server_connection &lt;&lt; <span class="stringliteral">")"</span>);
<a name="l00082"></a>00082           ++<a class="code" href="classServerSession.html#e3e1df1bcbb8d400040fc535d2270614" title="Total number of server session objects.">S_server_sessions</a>;
<a name="l00083"></a>00083         }<span class="comment"></span>
    //! Destructor.</span>
</span></pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="db56f9aa86018c1f32ef9f0d8736934d"></a><!-- doxytag: member="ServerSession::~ServerSession" ref="db56f9aa86018c1f32ef9f0d8736934d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ServerSession::~ServerSession           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00334">334</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>, <a class="el" href="debug_8cc-source.html#l00045">debug::channels::dc::objects</a>, <a class="el" href="ServerConnection_8h-source.html#l00193">ServerConnection::reconnect()</a>, <a class="el" href="ServerSession_8h-source.html#l00063">S_server_sessions</a>, <a class="el" href="ServerConnection_8h-source.html#l00123">ServerConnection::secondary_connection()</a>, and <a class="el" href="ServerConnection_8cc-source.html#l00252">ServerConnection::session_lost()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00335"></a>00335 {
<a name="l00336"></a>00336 <span class="preprocessor">#ifdef CWDEBUG</span>
<a name="l00337"></a>00337 <span class="preprocessor"></span>  <a class="code" href="structdebug_1_1SecondaryConnection.html">debug::SecondaryConnection</a> dummy(<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>());
<a name="l00338"></a>00338 <span class="preprocessor">#endif</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span>  Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#4fad4911d56fc2bccbb8ed9041454394" title="This debug channel is used for object construction/destruction tracking.">dc::objects</a>, <span class="stringliteral">"Destructing ServerSession"</span> &lt;&lt; *<span class="keyword">this</span>);
<a name="l00340"></a>00340   <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#4cb8d6fa95cdc9a4042978d5f290b1b7" title="This function is called when the ServerSession object is destroyed.">session_lost</a>();
<a name="l00341"></a>00341   cancel_all_requests();
<a name="l00342"></a>00342   <span class="comment">// Notify the application when the last server session is terminated.</span>
<a name="l00343"></a>00343   <span class="keywordflow">if</span> (--<a class="code" href="classServerSession.html#e3e1df1bcbb8d400040fc535d2270614" title="Total number of server session objects.">S_server_sessions</a> == 0 &amp;&amp; !<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#c1772a42084aa68f59995d694b1ecf85" title="Return true if we try to (stay) connect(ed).">reconnect</a>())
<a name="l00344"></a>00344     Application::instance().last_server_session_destroyed();
<a name="l00345"></a>00345 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b5e541da0e832562f5bf104ae2973a6e"></a><!-- doxytag: member="ServerSession::start_authentication" ref="b5e541da0e832562f5bf104ae2973a6e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::start_authentication           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called from <a class="el" href="classServerConnection.html#0bb470a3215a2780f846e806897359c5" title="Attempt an immediate connect to the server.">ServerConnection::do_connect</a>. Takes care of sending PASS/NICK/USER/PONG/MODE. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00322">322</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00058">M_auth_state</a>, and <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>.</p>

<p>Referenced by <a class="el" href="ServerConnection_8cc-source.html#l00149">ServerConnection::do_connect()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00323"></a>00323 {
<a name="l00324"></a>00324   <a class="code" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd" title="Pointer object with temporary authentication state information.">M_auth_state</a>.reset(NEW(<a class="code" href="classAuthState.html" title="State information very early in a new connection.">AuthState</a>(<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>)));
<a name="l00325"></a>00325 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="007e71fd0ebc59b15455cf7cfc73acd3"></a><!-- doxytag: member="ServerSession::set_auth_ping_argument" ref="007e71fd0ebc59b15455cf7cfc73acd3" args="(std::string const &amp;auth_ping_argument)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::set_auth_ping_argument           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>auth_ping_argument</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called from <a class="el" href="classServerConnection.html#61f1caf7c83a2bdef5d6d75968754fcd" title="This function is called when a PING message is received.">ServerConnection::decode_ping</a> with the argument of the first PING. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00091">91</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00058">M_auth_state</a>.</p>

<p>Referenced by <a class="el" href="ServerConnection_8cc-source.html#l00312">ServerConnection::decode_ping()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00091"></a>00091 { <span class="keywordflow">if</span> (<a class="code" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd" title="Pointer object with temporary authentication state information.">M_auth_state</a>.get()) <a class="code" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd" title="Pointer object with temporary authentication state information.">M_auth_state</a>-&gt;set_auth_ping_argument(<a class="code" href="classServerSession.html#a194c92493a43f5c86d79eb5ea8e9c27" title="Return argument of the first PING.">auth_ping_argument</a>); }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a194c92493a43f5c86d79eb5ea8e9c27"></a><!-- doxytag: member="ServerSession::auth_ping_argument" ref="a194c92493a43f5c86d79eb5ea8e9c27" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string const&amp; ServerSession::auth_ping_argument           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return argument of the first PING. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00094">94</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, and <a class="el" href="ServerSession_8h-source.html#l00058">M_auth_state</a>.</p>

<p>Referenced by <a class="el" href="ServerConnection_8cc-source.html#l00333">ServerConnection::send_pong_and_mode()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00094"></a>00094 { <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd" title="Pointer object with temporary authentication state information.">M_auth_state</a>.get()); <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd" title="Pointer object with temporary authentication state information.">M_auth_state</a>-&gt;auth_ping_argument(); }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="924f17d7e20c4ed84a13f2212a52a84a"></a><!-- doxytag: member="ServerSession::construct_network_object" ref="924f17d7e20c4ed84a13f2212a52a84a" args="(std::string const &amp;network_name, std::string const &amp;domain)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::construct_network_object           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>network_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>domain</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new network object with name <em>network_name</em> and domain <em>domain</em> (if any). 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00442">442</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ServerSession_8cc-source.html#l00462">detected_network()</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="question__nt_8h-source.html#l00024">network_domain_question</a>, and <a class="el" href="Identity_8cc-source.html#l00753">Identity::send_notice()</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00389">found_network_name()</a>, and <a class="el" href="Identity_8cc-source.html#l00672">Identity::received_network_domain_answer()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00443"></a>00443 {
<a name="l00444"></a>00444   <a class="code" href="networks__type_8h.html#f5bfb6080da153ffeb3e836a180683c3" title="The underlying type of Application::networks().">networks_type</a>&amp; networks = Application::instance().networks();
<a name="l00445"></a>00445   networks_type::iterator iter;
<a name="l00446"></a>00446   std::ostringstream buf;
<a name="l00447"></a>00447   buf &lt;&lt; <span class="stringliteral">"Added NEW network: \""</span> &lt;&lt; network_name &lt;&lt; <span class="stringliteral">"\""</span>;
<a name="l00448"></a>00448   <span class="keywordflow">if</span> (domain.empty())
<a name="l00449"></a>00449   {
<a name="l00450"></a>00450     iter = networks.insert(networks.end(), <a class="code" href="classNetwork.html" title="An IRC network.">Network</a>(network_name));
<a name="l00451"></a>00451     buf &lt;&lt; <span class="charliteral">'.'</span>;
<a name="l00452"></a>00452   }
<a name="l00453"></a>00453   <span class="keywordflow">else</span>
<a name="l00454"></a>00454   {
<a name="l00455"></a>00455     iter = networks.insert(networks.end(), <a class="code" href="classNetwork.html" title="An IRC network.">Network</a>(network_name, domain));
<a name="l00456"></a>00456     buf &lt;&lt; <span class="stringliteral">", with common domain \""</span> &lt;&lt; domain &lt;&lt; <span class="stringliteral">"\"."</span>;
<a name="l00457"></a>00457   }
<a name="l00458"></a>00458   <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#ad20e55e2b6fbe3022e63c3223abae08" title="Send a notice to the client.">send_notice</a>(buf.str(), <a class="code" href="question__nt_8h.html#027b743250267c94e5a1a63e0bbb3846eb206c8874855d785e917a62c3181851" title="Does this network use s as common domain for all servers (type: Yes | No)?">network_domain_question</a>);
<a name="l00459"></a>00459   <a class="code" href="classServerSession.html#00383911f3971700cf3fd0ef8de847bd" title="Initialize network. This function is called as soon as the network we are connected...">detected_network</a>(iter);
<a name="l00460"></a>00460 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="00383911f3971700cf3fd0ef8de847bd"></a><!-- doxytag: member="ServerSession::detected_network" ref="00383911f3971700cf3fd0ef8de847bd" args="(networks_type::iterator network_iter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::detected_network           </td>
          <td>(</td>
          <td class="paramtype">networks_type::iterator&nbsp;</td>
          <td class="paramname"> <em>network_iter</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize network. This function is called as soon as the network we are connected to is known. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00462">462</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, <a class="el" href="ISupport_8cc-source.html#l00044">ISupport::get()</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="IRC__compare_8cc-source.html#l00025">IRCStringCompare()</a>, <a class="el" href="ServerSession_8h-source.html#l00069">M_detected_network</a>, <a class="el" href="ServerSession_8h-source.html#l00061">M_i_support</a>, <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>, <a class="el" href="ServerSession_8h-source.html#l00064">M_umodes</a>, <a class="el" href="debug_8cc-source.html#l00048">debug::channels::dc::maps</a>, <a class="el" href="Identity_8h-source.html#l00135">Identity::mynick()</a>, <a class="el" href="ServerConnection_8h-source.html#l00123">ServerConnection::secondary_connection()</a>, and <a class="el" href="ServerConnection_8h-source.html#l00144">ServerConnection::server()</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00442">construct_network_object()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00389">found_network_name()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00463"></a>00463 {
<a name="l00464"></a>00464   <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"Identity::detected_network("</span> &lt;&lt; *network_iter &lt;&lt; <span class="stringliteral">")"</span>);
<a name="l00465"></a>00465 
<a name="l00466"></a>00466   boost::shared_ptr&lt;Server&gt; current_server(<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#c31da41babaae4b0f781f6e6f1e177ad" title="Returns the server that we are connected with or connecting to.">server</a>());
<a name="l00467"></a>00467 
<a name="l00468"></a>00468   Dout(dc::notice, <span class="stringliteral">"Current server is "</span> &lt;&lt; *current_server.get());
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   <span class="comment">// Update the current server as we connected successfully.</span>
<a name="l00471"></a>00471   <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(is_open());
<a name="l00472"></a>00472   <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(remote_port() == current_server-&gt;port());
<a name="l00473"></a>00473   current_server-&gt;add_port(current_server-&gt;port());
<a name="l00474"></a>00474   Dout(dc::notice, <span class="stringliteral">"Added remote port "</span> &lt;&lt; current_server-&gt;port() &lt;&lt; <span class="stringliteral">" to server "</span> &lt;&lt; *current_server.get());
<a name="l00475"></a>00475 
<a name="l00476"></a>00476   Dout(dc::debug, <span class="stringliteral">"*network_iter is now: "</span> &lt;&lt; *network_iter);
<a name="l00477"></a>00477 
<a name="l00478"></a>00478   <span class="comment">// Set the network pointer of the current Server object.</span>
<a name="l00479"></a>00479   current_server-&gt;set_network(&amp;(*network_iter));
<a name="l00480"></a>00480 
<a name="l00481"></a>00481   <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>())
<a name="l00482"></a>00482   {
<a name="l00483"></a>00483     <span class="comment">// Set the network pointer in my own Nick object.</span>
<a name="l00484"></a>00484     <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#d7db39997b22c1d5f8fb7014eb438a50" title="Returns a pointer to my Nick object.">mynick</a>()-&gt;set_network(&amp;(*network_iter));
<a name="l00485"></a>00485     <span class="comment">// Make sure my Nick is inserted in the networks targets map.</span>
<a name="l00486"></a>00486     Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#c7ed0ee7657485705dfdf1910619198a" title="This debug channel is used for nick/channel maps administration tracking.">dc::maps</a>, <span class="stringliteral">"Inserting my nick \""</span> &lt;&lt; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().mynick()-&gt;in_name(*<span class="keyword">this</span>) &lt;&lt; <span class="stringliteral">"\" in Network map."</span>);
<a name="l00487"></a>00487     network_iter-&gt;targets().insert(target_lookup_map_type::value_type(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().mynick()-&gt;in_name(*<span class="keyword">this</span>), <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().mynick()));
<a name="l00488"></a>00488     <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(network_iter-&gt;targets().find(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().mynick()-&gt;in_name(*<span class="keyword">this</span>)) != network_iter-&gt;targets().end());
<a name="l00489"></a>00489   }
<a name="l00490"></a>00490 
<a name="l00491"></a>00491   <span class="comment">// Find the current server in the list of known servers for this network.</span>
<a name="l00492"></a>00492   std::string server_name = current_server-&gt;get_irc_name();
<a name="l00493"></a>00493   Network::servers_type::iterator server = network_iter-&gt;servers().begin();
<a name="l00494"></a>00494   <span class="keywordflow">while</span> (server != network_iter-&gt;servers().end())
<a name="l00495"></a>00495   {
<a name="l00496"></a>00496     <span class="keywordflow">if</span> (<a class="code" href="IRC__compare_8cc.html#e5bfa2bc25ca9272eb0ec51ad508e369" title="Compare two whole IRC strings in a &amp;#39;case insensitive&amp;#39; way.">IRCStringCompare</a>(server_name, (*server)-&gt;get_irc_name()) == 0)
<a name="l00497"></a>00497       <span class="keywordflow">break</span>;
<a name="l00498"></a>00498     ++server;
<a name="l00499"></a>00499   }
<a name="l00500"></a>00500   <span class="keywordflow">if</span> (server == network_iter-&gt;servers().end())
<a name="l00501"></a>00501     network_iter-&gt;servers().push_back(current_server);
<a name="l00502"></a>00502 
<a name="l00503"></a>00503   <a class="code" href="classServerSession.html#ff50b0591d529f0a69d9c9f05695f716" title="True if the network is fully detected.">M_detected_network</a> = <span class="keyword">true</span>;
<a name="l00504"></a>00504 
<a name="l00505"></a>00505   <span class="comment">// Initialize WHO flag table.</span>
<a name="l00506"></a>00506   std::string prefix;
<a name="l00507"></a>00507   <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>.<a class="code" href="classISupport.html#5ff7aad9c2e1cd6f44b4644c147c350e" title="If key exists, returns true and writes the corresponding value to value, otherwise...">get</a>(<span class="stringliteral">"PREFIX"</span>, prefix))
<a name="l00508"></a>00508   {
<a name="l00509"></a>00509     prefix = <span class="stringliteral">"(ov)@+"</span>;
<a name="l00510"></a>00510     Dout(dc::warning, <span class="stringliteral">"No PREFIX ISUPPORT. Using "</span> &lt;&lt; prefix);
<a name="l00511"></a>00511   }
<a name="l00512"></a>00512   network_iter-&gt;init_who_flag_table(<a class="code" href="classServerSession.html#a64046568f18d4396b33f9661661dfb8" title="The user modes as received in numeric 004.">M_umodes</a>, prefix);
<a name="l00513"></a>00513 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="989f1e1f69fed1b80e62f3ed6df57b3b"></a><!-- doxytag: member="ServerSession::authentication_successful" ref="989f1e1f69fed1b80e62f3ed6df57b3b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::authentication_successful           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when the authentication was successful (when receiving the 001 numeric). 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00327">327</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00058">M_auth_state</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00328"></a>00328 {
<a name="l00329"></a>00329   <a class="code" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd" title="Pointer object with temporary authentication state information.">M_auth_state</a>.reset();
<a name="l00330"></a>00330 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="52c3e3a064e8ff948ab51de9a3a19db4"></a><!-- doxytag: member="ServerSession::fatal_error" ref="52c3e3a064e8ff948ab51de9a3a19db4" args="(char const *error_msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::fatal_error           </td>
          <td>(</td>
          <td class="paramtype">char const *&nbsp;</td>
          <td class="paramname"> <em>error_msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A fatal error occured. Calling this function will terminate the <a class="el" href="classServerSession.html" title="A server session, from connect till disconnect.">ServerSession</a>. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00313">313</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00314"></a>00314 {
<a name="l00315"></a>00315   <span class="keywordflow">if</span> (!must_be_removed())               <span class="comment">// Only write one error at a time.</span>
<a name="l00316"></a>00316     *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">"QUIT :Fatal error: "</span> &lt;&lt; error_msg &lt;&lt; <span class="stringliteral">"\r\n"</span>;
<a name="l00317"></a>00317   <span class="comment">// The next method sets 'must_be_removed()' to true,</span>
<a name="l00318"></a>00318   <span class="comment">// flushes the error and deletes this object (non-blocking).</span>
<a name="l00319"></a>00319   del();
<a name="l00320"></a>00320 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1b60f26b5d5e97d761ecbd7a4a59bb98"></a><!-- doxytag: member="ServerSession::found_network_name" ref="1b60f26b5d5e97d761ecbd7a4a59bb98" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::found_network_name           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when the name of the <a class="el" href="classNetwork.html" title="An IRC network.">Network</a> is known (after numeric 005). 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00389">389</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="Identity_8h-source.html#l00208">Identity::client_session()</a>, <a class="el" href="ServerSession_8cc-source.html#l00442">construct_network_object()</a>, <a class="el" href="ServerSession_8cc-source.html#l00462">detected_network()</a>, <a class="el" href="ServerConnection_8h-source.html#l00168">ServerConnection::disconnect()</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="IRC__compare_8cc-source.html#l00025">IRCStringCompare()</a>, <a class="el" href="ServerSession_8h-source.html#l00062">M_network_name</a>, <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>, <a class="el" href="question__nt_8h-source.html#l00024">network_domain_question</a>, <a class="el" href="Identity_8h-source.html#l00156">Identity::network_name()</a>, <a class="el" href="Identity_8cc-source.html#l00672">Identity::received_network_domain_answer()</a>, <a class="el" href="Identity_8cc-source.html#l00753">Identity::send_notice()</a>, <a class="el" href="ServerConnection_8h-source.html#l00144">ServerConnection::server()</a>, <a class="el" href="question__nt_8h-source.html#l00023">server_port_question</a>, <a class="el" href="Identity_8h-source.html#l00174">Identity::set_network_name()</a>, and <a class="el" href="ClientSession_8h-source.html#l00062">ClientSession::user_answer_event_server</a>.</p>

<p>Referenced by <a class="el" href="ISupport_8cc-source.html#l00029">ISupport::end()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00390"></a>00390 {
<a name="l00391"></a>00391   Dout(dc::notice, <span class="stringliteral">"network = \""</span> &lt;&lt; <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a> &lt;&lt; <span class="stringliteral">"\"."</span>);
<a name="l00392"></a>00392   <span class="keywordflow">if</span> (<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().network_name() != unknown_network_name &amp;&amp; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().network_name() != <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>)
<a name="l00393"></a>00393   {
<a name="l00394"></a>00394     Dout(dc::warning, <span class="stringliteral">"Identity "</span> &lt;&lt; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().key() &lt;&lt; <span class="stringliteral">" was connected to network "</span> &lt;&lt; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().network_name() &lt;&lt;
<a name="l00395"></a>00395         <span class="stringliteral">" but now tries to connect to network "</span> &lt;&lt; <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a> &lt;&lt; <span class="charliteral">'!'</span>);
<a name="l00396"></a>00396     std::string notice(<span class="stringliteral">"Detected a possible network switch (from "</span>);
<a name="l00397"></a>00397     notice += <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#30cae43d74e1e50408f30d2a3eff2025" title="Returns the network name that this identity corresponds with.">network_name</a>();
<a name="l00398"></a>00398     notice += <span class="stringliteral">" to "</span>;
<a name="l00399"></a>00399     notice += <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>;
<a name="l00400"></a>00400     notice += <span class="stringliteral">"). Bailing out!"</span>;
<a name="l00401"></a>00401     <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#ad20e55e2b6fbe3022e63c3223abae08" title="Send a notice to the client.">send_notice</a>(notice, <a class="code" href="question__nt_8h.html#027b743250267c94e5a1a63e0bbb3846bb516cb7284441ea7de98a9408a8351f" title="What server should I connect to (type: &amp;lt;server&amp;gt; [&amp;lt;port&amp;gt; [&amp;lt;localip&amp;gt;]])...">server_port_question</a>);
<a name="l00402"></a>00402     <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#00dd03d4df481351061cafa48f74b6ed" title="Disconnect from the server.">disconnect</a>();
<a name="l00403"></a>00403     <span class="keywordflow">return</span>;
<a name="l00404"></a>00404   }
<a name="l00405"></a>00405   <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#ad20e55e2b6fbe3022e63c3223abae08" title="Send a notice to the client.">send_notice</a>(<span class="stringliteral">"Successfully connected."</span>, <a class="code" href="question__nt_8h.html#027b743250267c94e5a1a63e0bbb3846bb516cb7284441ea7de98a9408a8351f" title="What server should I connect to (type: &amp;lt;server&amp;gt; [&amp;lt;port&amp;gt; [&amp;lt;localip&amp;gt;]])...">server_port_question</a>);
<a name="l00406"></a>00406   <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#aa9ba940b674bac8361fab2d54575a16" title="Set network name string as returned by real_name().">set_network_name</a>(<a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>);
<a name="l00407"></a>00407 
<a name="l00408"></a>00408   <span class="comment">// Try to find if we already know this network.</span>
<a name="l00409"></a>00409   <a class="code" href="networks__type_8h.html#f5bfb6080da153ffeb3e836a180683c3" title="The underlying type of Application::networks().">networks_type</a>&amp; networks = Application::instance().networks();
<a name="l00410"></a>00410   networks_type::iterator iter = networks.begin();
<a name="l00411"></a>00411   <span class="keywordflow">while</span> (iter != networks.end())
<a name="l00412"></a>00412   {
<a name="l00413"></a>00413     <span class="keywordflow">if</span> (<a class="code" href="IRC__compare_8cc.html#e5bfa2bc25ca9272eb0ec51ad508e369" title="Compare two whole IRC strings in a &amp;#39;case insensitive&amp;#39; way.">IRCStringCompare</a>(iter-&gt;name(), <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>) == 0)
<a name="l00414"></a>00414       <span class="keywordflow">break</span>;
<a name="l00415"></a>00415     ++iter;
<a name="l00416"></a>00416   }
<a name="l00417"></a>00417   <span class="keywordflow">if</span> (iter == networks.end())
<a name="l00418"></a>00418   {
<a name="l00419"></a>00419     std::string server_name = <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#c31da41babaae4b0f781f6e6f1e177ad" title="Returns the server that we are connected with or connecting to.">server</a>()-&gt;get_irc_name();
<a name="l00420"></a>00420     std::string::size_type pos = server_name.rfind(<span class="charliteral">'.'</span>);
<a name="l00421"></a>00421     <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(pos &gt; 0);
<a name="l00422"></a>00422     pos = server_name.rfind(<span class="charliteral">'.'</span>, pos - 1);
<a name="l00423"></a>00423     <span class="keywordflow">if</span> (pos != std::string::npos)
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425       std::string domain = server_name.substr(pos + 1);
<a name="l00426"></a>00426       std::transform(domain.begin(), domain.end(), domain.begin(), ToLower);
<a name="l00427"></a>00427       std::ostringstream the_question;
<a name="l00428"></a>00428       the_question &lt;&lt; <span class="stringliteral">"Does the "</span> &lt;&lt; <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a> &lt;&lt; <span class="stringliteral">" IRC network use \""</span> &lt;&lt;
<a name="l00429"></a>00429           domain &lt;&lt; <span class="stringliteral">"\" as common domain for all servers (type: Yes|No)?"</span>;
<a name="l00430"></a>00430       <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#4cd26e4bddc74ee29d48d62eb36998ec" title="Return the current ClientSession.">client_session</a>().<a class="code" href="classClientSession.html#c6c444fa618e12e0be321c5e75f20a84" title="The UserAnswer event server.">user_answer_event_server</a>
<a name="l00431"></a>00431           (<a class="code" href="classUserAnswerRequestData.html" title="Request data passed to the event server.">UserAnswerRequestData</a>(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session(), <a class="code" href="question__nt_8h.html#027b743250267c94e5a1a63e0bbb3846eb206c8874855d785e917a62c3181851" title="Does this network use s as common domain for all servers (type: Yes | No)?">network_domain_question</a>, the_question.str()),
<a name="l00432"></a>00432           <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>(), &amp;<a class="code" href="classIdentity.html#aa0444d422ef667a1c57b9c883b0d3e3" title="Event call back: network domain answer received. Process it.">Identity::received_network_domain_answer</a>,
<a name="l00433"></a>00433           std::pair&lt;std::string, std::string&gt;(<a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>, domain));
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435     <span class="keywordflow">else</span>
<a name="l00436"></a>00436       <a class="code" href="classServerSession.html#924f17d7e20c4ed84a13f2212a52a84a" title="Create a new network object with name network_name and domain domain (if any).">construct_network_object</a>(<a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>, <span class="stringliteral">""</span>);     <span class="comment">// No common domain.</span>
<a name="l00437"></a>00437   }
<a name="l00438"></a>00438   <span class="keywordflow">else</span>
<a name="l00439"></a>00439     <a class="code" href="classServerSession.html#00383911f3971700cf3fd0ef8de847bd" title="Initialize network. This function is called as soon as the network we are connected...">detected_network</a>(iter);
<a name="l00440"></a>00440 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8fc297dda17c13decc4906f165d2de19"></a><!-- doxytag: member="ServerSession::message_event_server" ref="8fc297dda17c13decc4906f165d2de19" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Matcher_8h.html#5fde8f2c4a1179dd4e5a92fd67974b4b">MatcherEventServer</a>&amp; ServerSession::message_event_server           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a reference to the event server for incoming messages. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00112">112</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00054">M_message_event_server</a>.</p>

<p>Referenced by <a class="el" href="AuthState_8cc-source.html#l00103">AuthState::auth_notice_looking_up_hostname()</a>, <a class="el" href="AuthState_8cc-source.html#l00128">AuthState::auth_notice_looking_up_ident()</a>, <a class="el" href="AuthState_8cc-source.html#l00028">AuthState::AuthState()</a>, and <a class="el" href="ServerConnection_8cc-source.html#l00333">ServerConnection::send_pong_and_mode()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00112"></a>00112 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#8c9b60b19714b52380178659552a1bbb" title="Event server for incoming messages.">M_message_event_server</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b681d5cfeba2b9d6918d067ae409d4a1"></a><!-- doxytag: member="ServerSession::message_event_server" ref="b681d5cfeba2b9d6918d067ae409d4a1" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Matcher_8h.html#5fde8f2c4a1179dd4e5a92fd67974b4b">MatcherEventServer</a> const&amp; ServerSession::message_event_server           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a const reference to the event server for incoming messages. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00114">114</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00054">M_message_event_server</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00114"></a>00114 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#8c9b60b19714b52380178659552a1bbb" title="Event server for incoming messages.">M_message_event_server</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3bf7aaaf37f650ecae8ede46fddb06e6"></a><!-- doxytag: member="ServerSession::nicks" ref="3bf7aaaf37f650ecae8ede46fddb06e6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNickPair.html">NickPair</a>&amp; ServerSession::nicks           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classServer.html" title="An IRC server.">Server</a> session nick pair. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00117">117</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00055">M_server_session_nicks</a>.</p>

<p>Referenced by <a class="el" href="Matcher_8cc-source.html#l00027">Matcher_noarg::match_impl()</a>, <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>, <a class="el" href="Identity_8cc-source.html#l00278">Identity::new_server_message_received()</a>, <a class="el" href="Authentication_8cc-source.html#l00101">Authentication::send_authentication()</a>, <a class="el" href="ServerSession_8h-source.html#l00157">send_nick_write_event()</a>, and <a class="el" href="ServerConnection_8cc-source.html#l00333">ServerConnection::send_pong_and_mode()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00117"></a>00117 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb" title="Server side nick pair.">M_server_session_nicks</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="89a53637bb2382bd8869812dc9aa2eb4"></a><!-- doxytag: member="ServerSession::nicks" ref="89a53637bb2382bd8869812dc9aa2eb4" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNickPair.html">NickPair</a> const&amp; ServerSession::nicks           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classServer.html" title="An IRC server.">Server</a> session nick pair. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00120">120</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00055">M_server_session_nicks</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00120"></a>00120 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb" title="Server side nick pair.">M_server_session_nicks</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1cdbba5e545c0759814b92d0c578cc02"></a><!-- doxytag: member="ServerSession::joined_channels" ref="1cdbba5e545c0759814b92d0c578cc02" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a>&amp; ServerSession::joined_channels           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return reference to map with joined channels. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00123">123</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00056">M_joined_channels</a>.</p>

<p>Referenced by <a class="el" href="Target_8cc-source.html#l00136">Target::add_channel()</a>, <a class="el" href="ServerSession_8cc-source.html#l00239">send_rejoins()</a>, <a class="el" href="Target_8cc-source.html#l00116">Target::serverside_add_channel()</a>, <a class="el" href="Target_8cc-source.html#l00190">Target::serverside_get_channel()</a>, <a class="el" href="Target_8cc-source.html#l00169">Target::sub_channel()</a>, and <a class="el" href="Identity_8cc-source.html#l00777">Identity::~Identity()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#b509d89122b3453fc2e4cbfab27a7db7" title="Serverside lookup map for channels joined by this identity.">M_joined_channels</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="da9a15ce03d25cb951eb34be4c555e6b"></a><!-- doxytag: member="ServerSession::joined_channels" ref="da9a15ce03d25cb951eb34be4c555e6b" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a> const&amp; ServerSession::joined_channels           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return const reference to map with joined channels. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00126">126</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00056">M_joined_channels</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00126"></a>00126 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#b509d89122b3453fc2e4cbfab27a7db7" title="Serverside lookup map for channels joined by this identity.">M_joined_channels</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="eb14b6156420f8413e9d3e905688783d"></a><!-- doxytag: member="ServerSession::user_mode" ref="eb14b6156420f8413e9d3e905688783d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classUserMode.html">UserMode</a>&amp; ServerSession::user_mode           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return my user mode. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00129">129</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00057">M_user_mode</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>, and <a class="el" href="ServerConnection_8cc-source.html#l00333">ServerConnection::send_pong_and_mode()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00129"></a>00129 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#2e3e8affeb1200b8216be93dcdbdfe4a" title="My user mode.">M_user_mode</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2a8ac805dea978304fbcc12d8183a4f8"></a><!-- doxytag: member="ServerSession::user_mode" ref="2a8ac805dea978304fbcc12d8183a4f8" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classUserMode.html">UserMode</a> const&amp; ServerSession::user_mode           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return my user mode. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00132">132</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00057">M_user_mode</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00132"></a>00132 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#2e3e8affeb1200b8216be93dcdbdfe4a" title="My user mode.">M_user_mode</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6921a52d4541f22dc13cf48b743baf19"></a><!-- doxytag: member="ServerSession::queue_msg" ref="6921a52d4541f22dc13cf48b743baf19" args="(MessageOut const &amp;msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::queue_msg           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMessageOut.html">MessageOut</a> const &amp;&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> message <em>msg</em>. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00135">135</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, <a class="el" href="ServerSession_8h-source.html#l00059">M_output_queue</a>, and <a class="el" href="Queue_8h-source.html#l00061">Queue::queue_msg()</a>.</p>

<p>Referenced by <a class="el" href="ServerConnection_8cc-source.html#l00312">ServerConnection::decode_ping()</a>, <a class="el" href="Identity_8cc-source.html#l00092">Identity::new_client_message_received()</a>, <a class="el" href="Channel_8cc-source.html#l00031">Channel::new_client_message_received()</a>, <a class="el" href="ClientSession_8cc-source.html#l00247">ClientSession::new_client_nick_received()</a>, <a class="el" href="Channel_8cc-source.html#l00082">Channel::new_server_message_received()</a>, <a class="el" href="ServerSession_8cc-source.html#l00382">queue_msg_as_is()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00239">send_rejoins()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00135"></a>00135 { <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"ServerSession::queue_msg("</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">")"</span>); <a class="code" href="classServerSession.html#44a94d5a4f05f14cfc58a5e405c44f3b" title="Queue for output messages.">M_output_queue</a>.<a class="code" href="classQueue.html#5eab5067f30fb59537784a27e5b3615b" title="Send or queue an output message.">queue_msg</a>(msg); }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="19ff70c7a27c9d832cc072ac7f4add8a"></a><!-- doxytag: member="ServerSession::queue_msg_as_is" ref="19ff70c7a27c9d832cc072ac7f4add8a" args="(ClientMessageIn const &amp;msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::queue_msg_as_is           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classClientMessageIn.html">ClientMessageIn</a> const &amp;&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> message <em>msg</em> with default priority without changing it. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00382">382</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="Priority_8cc-source.html#l00023">default_priority()</a>, <a class="el" href="MessageIn_8h-source.html#l00100">MessageIn::key()</a>, <a class="el" href="MessageIn_8h-source.html#l00106">MessageIn::params()</a>, and <a class="el" href="ServerSession_8h-source.html#l00135">queue_msg()</a>.</p>

<p>Referenced by <a class="el" href="Identity_8cc-source.html#l00092">Identity::new_client_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00383"></a>00383 {
<a name="l00384"></a>00384   <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a> prefix(msg);
<a name="l00385"></a>00385   <a class="code" href="classMessageOut.html" title="An output message.">MessageOut</a> msgout(<a class="code" href="Priority_8cc.html#18032271e548be4e8a0bacc13c4785f0" title="Return the default priority for command.">default_priority</a>(msg.key()));
<a name="l00386"></a>00386   <a class="code" href="classServerSession.html#6921a52d4541f22dc13cf48b743baf19" title="Queue message msg.">queue_msg</a>(msgout &lt;&lt; prefix &lt;&lt; msg.key() &lt;&lt; msg.params(0));
<a name="l00387"></a>00387 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="bbf6f685d2c227bb9b3c9089f14cd63e"></a><!-- doxytag: member="ServerSession::current_who_request" ref="bbf6f685d2c227bb9b3c9089f14cd63e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWhoRequest.html">WhoRequest</a> ServerSession::current_who_request           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the first element of M_who_queue. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00141">141</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, and <a class="el" href="ServerSession_8h-source.html#l00060">M_who_queue</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00142"></a>00142         {
<a name="l00143"></a>00143           <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(!<a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.empty());
<a name="l00144"></a>00144           Dout(dc::debug, <span class="stringliteral">"ServerSession::current_who_request returns "</span> &lt;&lt; <a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.front() &lt;&lt; <span class="stringliteral">". Number of items: "</span> &lt;&lt; <a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.size());
<a name="l00145"></a>00145           <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.front();
<a name="l00146"></a>00146         }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e6e767a4bc2fd4a4dc2cd4330144a34a"></a><!-- doxytag: member="ServerSession::pop_who_request" ref="e6e767a4bc2fd4a4dc2cd4330144a34a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::pop_who_request           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pop the first element of M_who_queue. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00149">149</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, and <a class="el" href="ServerSession_8h-source.html#l00060">M_who_queue</a>.</p>

<p>Referenced by <a class="el" href="Identity_8cc-source.html#l00278">Identity::new_server_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00150"></a>00150         {
<a name="l00151"></a>00151           <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(!<a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.empty());
<a name="l00152"></a>00152           <a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.pop();
<a name="l00153"></a>00153           Dout(dc::debug, <span class="stringliteral">"Calling ServerSession::pop_who_request. Remaining number of items: "</span> &lt;&lt; <a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.size());
<a name="l00154"></a>00154         }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="faf6550774de7ed58ac07a13a067c9a9"></a><!-- doxytag: member="ServerSession::send_nick_write_event" ref="faf6550774de7ed58ac07a13a067c9a9" args="(PseudoMessageEventType const &amp;, std::string nick)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::send_nick_write_event           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPseudoMessageEventType.html">PseudoMessageEventType</a> const &amp;&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>nick</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A write event of a pseudo NICK message happened. Actually write the NICK message. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00157">157</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00117">nicks()</a>, and <a class="el" href="NickPair_8cc-source.html#l00019">NickPair::send_nick()</a>.</p>

<p>Referenced by <a class="el" href="ClientSession_8cc-source.html#l00247">ClientSession::new_client_nick_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00157"></a>00157 { <a class="code" href="classServerSession.html#3bf7aaaf37f650ecae8ede46fddb06e6" title="Server session nick pair.">nicks</a>().<a class="code" href="classNickPair.html#ecb19961cb641c51d7ce1279b736c9ac" title="Send a new NICK message to the socket.">send_nick</a>(nick); }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4fc533f77c0d9a4285267db38941a83b"></a><!-- doxytag: member="ServerSession::send_who_write_event" ref="4fc533f77c0d9a4285267db38941a83b" args="(PseudoMessageEventType const &amp;event_type, WhoRequest who_request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::send_who_write_event           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPseudoMessageEventType.html">PseudoMessageEventType</a> const &amp;&nbsp;</td>
          <td class="paramname"> <em>event_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classWhoRequest.html">WhoRequest</a>&nbsp;</td>
          <td class="paramname"> <em>who_request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A write event of a pseudo WHO message happened. Actually write the WHO message. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00347">347</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, <a class="el" href="ServerSession_8h-source.html#l00060">M_who_queue</a>, <a class="el" href="WhoRequest_8h-source.html#l00147">WhoRequest::mask()</a>, <a class="el" href="WhoRequest_8h-source.html#l00151">WhoRequest::mask_contains_space()</a>, <a class="el" href="WhoRequest_8h-source.html#l00153">WhoRequest::mask_is_target()</a>, <a class="el" href="WhoRequest_8h-source.html#l00155">WhoRequest::mask_target()</a>, <a class="el" href="WhoRequest_8h-source.html#l00149">WhoRequest::options()</a>, and <a class="el" href="WhoRequest_8cc-source.html#l00090">WhoOptions::str()</a>.</p>

<p>Referenced by <a class="el" href="Identity_8cc-source.html#l00092">Identity::new_client_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00348"></a>00348 {
<a name="l00349"></a>00349   <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(!debug::secondary_connection);
<a name="l00350"></a>00350   <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"ServerSession::send_who_write_event((PseudoMessageEventType&amp;){"</span> &lt;&lt; (<span class="keywordtype">void</span>*)&amp;event_type &lt;&lt; <span class="stringliteral">"), "</span> &lt;&lt; who_request &lt;&lt; <span class="stringliteral">")"</span>);
<a name="l00351"></a>00351   <span class="comment">// Actually sent the WHO message to the server.</span>
<a name="l00352"></a>00352   std::string options(who_request.<a class="code" href="classWhoRequest.html#c87f007d4770db724365182346f5685f" title="Accessor for the options.">options</a>().<a class="code" href="classWhoOptions.html#df4342bd189a58fd0fa89873d435004f" title="Return the reassembled options string.">str</a>());
<a name="l00353"></a>00353   <span class="keywordtype">bool</span> has_options = !options.empty();
<a name="l00354"></a>00354   <span class="keywordflow">if</span> (who_request.<a class="code" href="classWhoRequest.html#384d5d0eb509c78a52baf04a9caef58e" title="Return true if the mask contains a space.">mask_contains_space</a>())
<a name="l00355"></a>00355   {
<a name="l00356"></a>00356     <span class="keywordflow">if</span> (has_options)
<a name="l00357"></a>00357       *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">"WHO dummy"</span>;
<a name="l00358"></a>00358     <span class="keywordflow">else</span>
<a name="l00359"></a>00359       *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">"WHO :"</span> &lt;&lt; who_request.<a class="code" href="classWhoRequest.html#d44ee347083f133d51caf0c2e04f0ff9" title="Accessor for the mask.">mask</a>();
<a name="l00360"></a>00360   }
<a name="l00361"></a>00361   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (who_request.<a class="code" href="classWhoRequest.html#85fde08de47c20ba2e0ccfdd5e27187b" title="Return true if the mask is a known target.">mask_is_target</a>())
<a name="l00362"></a>00362     *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">"WHO "</span> &lt;&lt; who_request.<a class="code" href="classWhoRequest.html#cf27677027b153a9a3c1d6866dd9e583" title="Return the target that the mask contains.">mask_target</a>()-&gt;out_name(*<span class="keyword">this</span>);
<a name="l00363"></a>00363   <span class="keywordflow">else</span>
<a name="l00364"></a>00364     *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">"WHO "</span> &lt;&lt; who_request.<a class="code" href="classWhoRequest.html#d44ee347083f133d51caf0c2e04f0ff9" title="Accessor for the mask.">mask</a>();
<a name="l00365"></a>00365   <span class="keywordflow">if</span> (has_options)
<a name="l00366"></a>00366   {
<a name="l00367"></a>00367     *<span class="keyword">this</span> &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; options;
<a name="l00368"></a>00368     <span class="keywordflow">if</span> (who_request.<a class="code" href="classWhoRequest.html#384d5d0eb509c78a52baf04a9caef58e" title="Return true if the mask contains a space.">mask_contains_space</a>())
<a name="l00369"></a>00369     {
<a name="l00370"></a>00370       *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">" :"</span>;
<a name="l00371"></a>00371       <span class="keywordflow">if</span> (who_request.<a class="code" href="classWhoRequest.html#85fde08de47c20ba2e0ccfdd5e27187b" title="Return true if the mask is a known target.">mask_is_target</a>())
<a name="l00372"></a>00372         *<span class="keyword">this</span> &lt;&lt; who_request.<a class="code" href="classWhoRequest.html#cf27677027b153a9a3c1d6866dd9e583" title="Return the target that the mask contains.">mask_target</a>()-&gt;out_name(*<span class="keyword">this</span>);
<a name="l00373"></a>00373       <span class="keywordflow">else</span>
<a name="l00374"></a>00374         *<span class="keyword">this</span> &lt;&lt; who_request.<a class="code" href="classWhoRequest.html#d44ee347083f133d51caf0c2e04f0ff9" title="Accessor for the mask.">mask</a>();
<a name="l00375"></a>00375     }
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377   *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">"\r\n"</span>;
<a name="l00378"></a>00378   Dout(dc::debug, <span class="stringliteral">"Pushing "</span> &lt;&lt; who_request &lt;&lt; <span class="stringliteral">" onto M_who_queue."</span>);
<a name="l00379"></a>00379   <a class="code" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47" title="Queue storing WHO request messages.">M_who_queue</a>.push(who_request);
<a name="l00380"></a>00380 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ef1ffc59c11f11e7e5aa743306a1ae03"></a><!-- doxytag: member="ServerSession::force_quit" ref="ef1ffc59c11f11e7e5aa743306a1ae03" args="(timer_event_type_ct const &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::force_quit           </td>
          <td>(</td>
          <td class="paramtype">timer_event_type_ct const &amp;&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called 1 second after sending a QUIT and the connection still wasn't terminated. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00515">515</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ServerConnection_8h-source.html#l00168">ServerConnection::disconnect()</a>, <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, and <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00516"></a>00516 {
<a name="l00517"></a>00517   <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"ServerSession::force_quit("</span> &lt;&lt; expired_at.get_expire_time() &lt;&lt; <span class="stringliteral">")"</span>);
<a name="l00518"></a>00518   <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#00dd03d4df481351061cafa48f74b6ed" title="Disconnect from the server.">disconnect</a>();
<a name="l00519"></a>00519 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b680010714ccaf888104961b76e54d0b"></a><!-- doxytag: member="ServerSession::i_support" ref="b680010714ccaf888104961b76e54d0b" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classISupport.html">ISupport</a> const&amp; ServerSession::i_support           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Accessor for M_i_support. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00166">166</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00061">M_i_support</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00166"></a>00166 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9aea02ab6467d0e053239f1be61be9f3"></a><!-- doxytag: member="ServerSession::i_support" ref="9aea02ab6467d0e053239f1be61be9f3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classISupport.html">ISupport</a>&amp; ServerSession::i_support           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Accessor for M_i_support. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00169">169</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00061">M_i_support</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00169"></a>00169 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4bdb5a1812f8ce94d41a22ada9d961a5"></a><!-- doxytag: member="ServerSession::join_pipeline" ref="4bdb5a1812f8ce94d41a22ada9d961a5" args="(std::string const &amp;channel_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="el" href="classChannel.html">Channel</a> &gt; ServerSession::join_pipeline           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>channel_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a pointer to the channel in the pipeline, if any. <a class="el" href="classChannel.html" title="An IRC Channel.">Channel</a> is removed from pipeline. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00227">227</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00065">M_join_pipeline</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00228"></a>00228 {
<a name="l00229"></a>00229   boost::shared_ptr&lt;Channel&gt; result;
<a name="l00230"></a>00230   join_pipeline_type::iterator iter = <a class="code" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d" title="Channels for which we sent a JOIN as part of a reconnect.">M_join_pipeline</a>.find(channel_name);
<a name="l00231"></a>00231   <span class="keywordflow">if</span> (iter != <a class="code" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d" title="Channels for which we sent a JOIN as part of a reconnect.">M_join_pipeline</a>.end())
<a name="l00232"></a>00232   {
<a name="l00233"></a>00233     result = iter-&gt;second;
<a name="l00234"></a>00234     <a class="code" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d" title="Channels for which we sent a JOIN as part of a reconnect.">M_join_pipeline</a>.erase(iter);
<a name="l00235"></a>00235   }
<a name="l00236"></a>00236   <span class="keywordflow">return</span> result;
<a name="l00237"></a>00237 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="107a2150c039e369b50ee3ffe1809457"></a><!-- doxytag: member="ServerSession::set_disconnect_reason" ref="107a2150c039e369b50ee3ffe1809457" args="(std::string const &amp;disconnect_reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::set_disconnect_reason           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>disconnect_reason</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the disconnect reason to <em>disconnect_reason</em>. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00175">175</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, and <a class="el" href="ServerSession_8h-source.html#l00066">M_disconnect_reason</a>.</p>

<p>Referenced by <a class="el" href="ServerConnection_8cc-source.html#l00281">ServerConnection::error_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00175"></a>00175 { <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classServerSession.html#4c304033b289394bda21ce125abb3106" title="An error message that should be sent to the client if the connection is lost, if...">M_disconnect_reason</a>.empty()); <a class="code" href="classServerSession.html#4c304033b289394bda21ce125abb3106" title="An error message that should be sent to the client if the connection is lost, if...">M_disconnect_reason</a> = disconnect_reason; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d2bce757189035208f2ae4ccdf4b981d"></a><!-- doxytag: member="ServerSession::server_connection" ref="d2bce757189035208f2ae4ccdf4b981d" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServerConnection.html">ServerConnection</a>&amp; ServerSession::server_connection           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Accessor for underlying server connection object. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00178">178</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>References <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00537">get_nick()</a>, <a class="el" href="Matcher_8cc-source.html#l00027">Matcher_noarg::match_impl()</a>, <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>, and <a class="el" href="Target_8cc-source.html#l00116">Target::serverside_add_channel()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 { <span class="keywordflow">return</span> <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a2a8691f762c3c2338e52ae91dcbc592"></a><!-- doxytag: member="ServerSession::get_nick" ref="a2a8691f762c3c2338e52ae91dcbc592" args="(std::string const &amp;nick_name, bool create=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="el" href="classNick.html">Nick</a> &gt; ServerSession::get_nick           </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&nbsp;</td>
          <td class="paramname"> <em>nick_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>create</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get or create a <a class="el" href="classNick.html" title="A nick name.">Nick</a> for <em>nick_name</em>. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00537">537</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="is__channel_8h-source.html#l00054">is_nick()</a>, <a class="el" href="Network_8h-source.html#l00100">Network::is_private()</a>, <a class="el" href="debug_8cc-source.html#l00048">debug::channels::dc::maps</a>, <a class="el" href="ServerSession_8h-source.html#l00178">server_connection()</a>, <a class="el" href="Network_8h-source.html#l00094">Network::targets()</a>, and <a class="el" href="exceptions_8h-source.html#l00110">THROW_EXCEPTION</a>.</p>

<p>Referenced by <a class="el" href="Identity_8cc-source.html#l00278">Identity::new_server_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00538"></a>00538 {
<a name="l00539"></a>00539   <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="is__channel_8h.html#d4500b3e184afbef559097f937ed28d2" title="Returns true if name is a nick name.">is_nick</a>(nick_name));
<a name="l00540"></a>00540 
<a name="l00541"></a>00541   boost::shared_ptr&lt;Nick&gt; new_nick;
<a name="l00542"></a>00542   <span class="comment">// Get the network.</span>
<a name="l00543"></a>00543   <a class="code" href="classNetwork.html" title="An IRC network.">Network</a>&amp; network(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classServerSession.html#d2bce757189035208f2ae4ccdf4b981d" title="Accessor for underlying server connection object.">server_connection</a>().network());
<a name="l00544"></a>00544   <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(!network.is_private());
<a name="l00545"></a>00545   <span class="comment">// Get the nick, if any, or else create one.</span>
<a name="l00546"></a>00546   target_lookup_map_type::iterator network_iter = network.targets().find(nick_name);
<a name="l00547"></a>00547   <span class="keywordflow">if</span> (network_iter != network.targets().end())
<a name="l00548"></a>00548     new_nick = boost::static_pointer_cast&lt;Nick&gt;(network_iter-&gt;second.lock());
<a name="l00549"></a>00549   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (create)
<a name="l00550"></a>00550   {
<a name="l00551"></a>00551     <a class="code" href="classNick.html" title="A nick name.">Nick</a>* nick = <span class="keyword">new</span> <a class="code" href="classNick.html" title="A nick name.">Nick</a>(*<span class="keyword">this</span>, nick_name);
<a name="l00552"></a>00552     AllocTag(nick, nick_name);
<a name="l00553"></a>00553     new_nick.reset(nick);
<a name="l00554"></a>00554     Dout(<a class="code" href="namespacedebug_1_1channels_1_1dc.html#c7ed0ee7657485705dfdf1910619198a" title="This debug channel is used for nick/channel maps administration tracking.">dc::maps</a>, <span class="stringliteral">"Inserting "</span> &lt;&lt; nick_name &lt;&lt; <span class="stringliteral">" in Network map."</span>);
<a name="l00555"></a>00555 <span class="preprocessor">#if defined(CWDEBUG) || defined(DEBUG)</span>
<a name="l00556"></a>00556 <span class="preprocessor"></span>    std::pair&lt;target_lookup_map_type::iterator, bool&gt; res =
<a name="l00557"></a>00557 <span class="preprocessor">#endif</span>
<a name="l00558"></a>00558 <span class="preprocessor"></span>        network.targets().insert(target_lookup_map_type::value_type(nick_name, new_nick));
<a name="l00559"></a>00559     <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(res.second);
<a name="l00560"></a>00560   }
<a name="l00561"></a>00561   <span class="keywordflow">else</span>
<a name="l00562"></a>00562     <a class="code" href="exceptions_8h.html#038a5f95e87598cdf451fa27eca0601c" title="Throw an exception.">THROW_EXCEPTION</a>(<a class="code" href="classunknown__target.html" title="An exception class.">unknown_target</a>(), <span class="stringliteral">"The identity "</span> &lt;&lt; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().key() &lt;&lt; <span class="stringliteral">" has no server side nick \""</span> &lt;&lt; nick_name &lt;&lt; <span class="stringliteral">"\""</span>);
<a name="l00563"></a>00563 
<a name="l00564"></a>00564   <span class="keywordflow">return</span> new_nick;
<a name="l00565"></a>00565 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2b95445e42efd37acad6fd400fa9dcb4"></a><!-- doxytag: member="ServerSession::new_message_received" ref="2b95445e42efd37acad6fd400fa9dcb4" args="(ServerMessageIn const &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::new_message_received           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classServerMessageIn.html">ServerMessageIn</a> const &amp;&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Incoming event from <a class="el" href="classServerSessionInput.html" title="Server session input decoder.">ServerSessionInput</a>. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00032">32</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="ISupport_8cc-source.html#l00034">ISupport::add()</a>, <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="ServerSession_8cc-source.html#l00327">authentication_successful()</a>, <a class="el" href="ISupport_8cc-source.html#l00024">ISupport::begin()</a>, <a class="el" href="ServerConnection_8h-source.html#l00134">ServerConnection::change_state()</a>, <a class="el" href="ClientSession_8h-source.html#l00083">ClientSession::client_out_nick()</a>, <a class="el" href="Identity_8h-source.html#l00208">Identity::client_session()</a>, <a class="el" href="ServerConnection_8cc-source.html#l00312">ServerConnection::decode_ping()</a>, <a class="el" href="Priority_8cc-source.html#l00023">default_priority()</a>, <a class="el" href="ServerConnection_8h-source.html#l00168">ServerConnection::disconnect()</a>, <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, <a class="el" href="ISupport_8cc-source.html#l00029">ISupport::end()</a>, <a class="el" href="ServerConnection_8cc-source.html#l00281">ServerConnection::error_message_received()</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="NickPair_8h-source.html#l00047">NickPair::in_nick()</a>, <a class="el" href="Matcher_8h-source.html#l00350">MatchRequest::is_match()</a>, <a class="el" href="ServerSession_8cc-source.html#l00227">join_pipeline()</a>, <a class="el" href="MessageIn_8h-source.html#l00100">MessageIn::key()</a>, <a class="el" href="ServerConnection_8h-source.html#l00042">login_sent</a>, <a class="el" href="ServerSession_8h-source.html#l00061">M_i_support</a>, <a class="el" href="ServerSession_8h-source.html#l00065">M_join_pipeline</a>, <a class="el" href="ServerSession_8h-source.html#l00054">M_message_event_server</a>, <a class="el" href="ServerSession_8h-source.html#l00062">M_network_name</a>, <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>, <a class="el" href="ServerSession_8h-source.html#l00055">M_server_session_nicks</a>, <a class="el" href="ServerSession_8h-source.html#l00064">M_umodes</a>, <a class="el" href="Identity_8h-source.html#l00135">Identity::mynick()</a>, <a class="el" href="Identity_8cc-source.html#l00278">Identity::new_server_message_received()</a>, <a class="el" href="UserMode_8cc-source.html#l00025">UserMode::new_server_message_received()</a>, <a class="el" href="NickPair_8cc-source.html#l00038">NickPair::nick_received()</a>, <a class="el" href="ServerSession_8h-source.html#l00117">nicks()</a>, <a class="el" href="MessageIn_8h-source.html#l00109">MessageIn::param()</a>, <a class="el" href="MessageIn_8h-source.html#l00106">MessageIn::params()</a>, <a class="el" href="MessageIn_8h-source.html#l00103">MessageIn::params_size()</a>, <a class="el" href="MessageIn_8h-source.html#l00124">MessageIn::prefix_str()</a>, <a class="el" href="ClientSession_8cc-source.html#l00240">ClientSession::queue_msg()</a>, <a class="el" href="ClientSession_8cc-source.html#l00164">ClientSession::queue_msg_me_as_is()</a>, <a class="el" href="ServerConnection_8h-source.html#l00044">real_nick_accepted</a>, <a class="el" href="ServerConnection_8h-source.html#l00043">real_nick_sent</a>, <a class="el" href="Matcher_8h-source.html#l00338">MatchRequest::regexp()</a>, <a class="el" href="ServerConnection_8h-source.html#l00123">ServerConnection::secondary_connection()</a>, <a class="el" href="Identity_8h-source.html#l00274">Identity::secondary_server_connection()</a>, <a class="el" href="NickPair_8cc-source.html#l00019">NickPair::send_nick()</a>, <a class="el" href="Identity_8cc-source.html#l00753">Identity::send_notice()</a>, <a class="el" href="ServerSession_8cc-source.html#l00239">send_rejoins()</a>, <a class="el" href="ServerConnection_8h-source.html#l00144">ServerConnection::server()</a>, <a class="el" href="ServerSession_8h-source.html#l00178">server_connection()</a>, <a class="el" href="question__nt_8h-source.html#l00023">server_port_question</a>, <a class="el" href="MessageIn_8h-source.html#l00234">ServerMessageIn::server_session()</a>, <a class="el" href="Target_8cc-source.html#l00116">Target::serverside_add_channel()</a>, <a class="el" href="Identity_8h-source.html#l00167">Identity::set_hostname()</a>, <a class="el" href="ServerConnection_8h-source.html#l00120">ServerConnection::state()</a>, <a class="el" href="Identity_8h-source.html#l00244">Identity::swap_primary_and_secondary_connection()</a>, and <a class="el" href="ServerSession_8h-source.html#l00129">user_mode()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00033"></a>00033 {
<a name="l00034"></a>00034 <span class="preprocessor">#ifdef CWDEBUG</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>  <span class="comment">// Suppress all debug output related to PING messages.</span>
<a name="l00036"></a>00036   <span class="keywordtype">bool</span> suppress_debug_output =
<a name="l00037"></a>00037       (msg.key() == keys::PING &amp;&amp; Application::instance().suppress_ping()) ||
<a name="l00038"></a>00038       ((msg.key() == 352 || msg.key() == 354 || msg.key() == 315) &amp;&amp; Application::instance().suppress_who());
<a name="l00039"></a>00039   Debug(<span class="keywordflow">if</span> (suppress_debug_output) libcw_do.off());
<a name="l00040"></a>00040 <span class="preprocessor">#endif</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042   <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"ServerSession::new_message_received("</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">")"</span>);
<a name="l00043"></a>00043 
<a name="l00044"></a>00044   <span class="comment">// Trigger message match events.</span>
<a name="l00045"></a>00045   <span class="keywordflow">if</span> (<a class="code" href="classServerSession.html#8c9b60b19714b52380178659552a1bbb" title="Event server for incoming messages.">M_message_event_server</a>.trigger(<a class="code" href="classMatcherEventType.html" title="The type of the argument that is returned with the callback.">MatcherEventType</a>(msg)))
<a name="l00046"></a>00046   {
<a name="l00047"></a>00047     Debug(<span class="keywordflow">if</span> (suppress_debug_output) libcw_do.on());
<a name="l00048"></a>00048     <span class="keywordflow">return</span>;
<a name="l00049"></a>00049   }
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <span class="comment">// Decode messages that can happen prior to network detection here.</span>
<a name="l00052"></a>00052   <span class="comment">// Other messages are decoded in default:.</span>
<a name="l00053"></a>00053   <span class="keywordtype">bool</span> pre_network_message = <span class="keyword">true</span>;              <span class="comment">// non-Default.</span>
<a name="l00054"></a>00054   <span class="keywordtype">bool</span> fully_processed = <span class="keyword">true</span>;                  <span class="comment">// No reason to call Identity::new_server_message_received.</span>
<a name="l00055"></a>00055   <span class="keywordflow">switch</span>(msg.key())
<a name="l00056"></a>00056   {
<a name="l00057"></a>00057     <span class="keywordflow">case</span> 1:
<a name="l00058"></a>00058     {
<a name="l00059"></a>00059       <span class="comment">// My own nick name should equal parameter 0.</span>
<a name="l00060"></a>00060       <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(msg.param(0) == <a class="code" href="classServerSession.html#3bf7aaaf37f650ecae8ede46fddb06e6" title="Server session nick pair.">nicks</a>().<a class="code" href="classNickPair.html#9ac7a7129697b0c86dc1a3131ad8bafd" title="Returns the last NICK received.">in_nick</a>());
<a name="l00061"></a>00061       <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>() || msg.param(0) == <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#d7db39997b22c1d5f8fb7014eb438a50" title="Returns a pointer to my Nick object.">mynick</a>()-&gt;in_name(*<span class="keyword">this</span>));
<a name="l00062"></a>00062       <a class="code" href="classServerSession.html#989f1e1f69fed1b80e62f3ed6df57b3b" title="Called when the authentication was successful (when receiving the 001 numeric).">authentication_successful</a>();
<a name="l00063"></a>00063       <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#c31da41babaae4b0f781f6e6f1e177ad" title="Returns the server that we are connected with or connecting to.">server</a>()-&gt;set_irc_name(msg.prefix_str());
<a name="l00064"></a>00064       <a class="code" href="classMatchRequest.html" title="A match request.">MatchRequest</a> match_request;
<a name="l00065"></a>00065       match_request(1).<a class="code" href="classMatchRequest.html#b969e7d4e047b8488efa9d1f4f242a7c" title="Request a match if parameter param (and on if single_param is false) matches regular...">regexp</a>(<span class="stringliteral">"Welcome to [Tt]he [^ ]* IRC [Nn]etwork"</span>, 1);
<a name="l00066"></a>00066       <span class="keywordflow">if</span> (!match_request.<a class="code" href="classMatchRequest.html#10689db2e8bbfe00fef56efb5e2a40c5" title="Returns true if all match conditions are fullfilled.">is_match</a>(msg))
<a name="l00067"></a>00067       {
<a name="l00068"></a>00068         std::ostringstream buf;
<a name="l00069"></a>00069         buf &lt;&lt; <span class="stringliteral">"Unrecognized 001 format ["</span> &lt;&lt; msg.param(1) &lt;&lt; <span class="stringliteral">"]. Bailing out."</span>;
<a name="l00070"></a>00070         <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#ad20e55e2b6fbe3022e63c3223abae08" title="Send a notice to the client.">send_notice</a>(buf.str(), <a class="code" href="question__nt_8h.html#027b743250267c94e5a1a63e0bbb3846bb516cb7284441ea7de98a9408a8351f" title="What server should I connect to (type: &amp;lt;server&amp;gt; [&amp;lt;port&amp;gt; [&amp;lt;localip&amp;gt;]])...">server_port_question</a>);
<a name="l00071"></a>00071         <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#00dd03d4df481351061cafa48f74b6ed" title="Disconnect from the server.">disconnect</a>();
<a name="l00072"></a>00072       }
<a name="l00073"></a>00073       <span class="keywordflow">else</span>
<a name="l00074"></a>00074         <a class="code" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd" title="Temporary storage of the network name as decoded from numeric 001, until numeric...">M_network_name</a>.assign(msg.param(1), 15, msg.param(1).find(<span class="charliteral">' '</span>, 16) - 15);
<a name="l00075"></a>00075       <span class="keywordflow">break</span>;
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077     <span class="keywordflow">case</span> 4:
<a name="l00078"></a>00078     {
<a name="l00079"></a>00079       <span class="comment">// We can use this numeric to detect the start of a possible sequence of 005 messages.</span>
<a name="l00080"></a>00080       <span class="comment">// See also the call to i_support().end().</span>
<a name="l00081"></a>00081       <a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>.<a class="code" href="classISupport.html#e7ca86901c14057a6017eaf46fad8dd2" title="This function is called when a new connection is initiated (when receiving numeric...">begin</a>();
<a name="l00082"></a>00082       <span class="comment">// Store the supported user modes.</span>
<a name="l00083"></a>00083       <a class="code" href="classServerSession.html#a64046568f18d4396b33f9661661dfb8" title="The user modes as received in numeric 004.">M_umodes</a> = msg.param(3);
<a name="l00084"></a>00084       <span class="comment">// Store the server version.</span>
<a name="l00085"></a>00085       <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#c31da41babaae4b0f781f6e6f1e177ad" title="Returns the server that we are connected with or connecting to.">server</a>()-&gt;version().set_version(msg.param(2), timerRequest.get_now().tv_sec);
<a name="l00086"></a>00086       <span class="keywordflow">break</span>;
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088     <span class="keywordflow">case</span> 5:
<a name="l00089"></a>00089     {
<a name="l00090"></a>00090       <span class="comment">// Decode the params. Param 0 is my nick, param n-1 is "is supported by this server".</span>
<a name="l00091"></a>00091       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n = 1; n &lt; msg.params_size() - 1; ++n)
<a name="l00092"></a>00092         <a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>.<a class="code" href="classISupport.html#9c149cbfa5e0917fa4200447f16f3916" title="This function is called for every &amp;quot;key=value&amp;quot; pair in each 005 message...">add</a>(msg.param(n));
<a name="l00093"></a>00093       <span class="keywordflow">break</span>;
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095     <span class="keywordflow">case</span> 251:
<a name="l00096"></a>00096     {
<a name="l00097"></a>00097       <span class="comment">// This means that all 005 numerics have been received.</span>
<a name="l00098"></a>00098       <a class="code" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9" title="Object that stores the numeric 005 information.">M_i_support</a>.<a class="code" href="classISupport.html#1c89ab687f506633da3d5f11d702cea2" title="This function is called as soon as possible after the last 005 message is received...">end</a>();
<a name="l00099"></a>00099       <span class="keywordflow">break</span>;
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101     <span class="keywordflow">case</span> 2:
<a name="l00102"></a>00102     <span class="keywordflow">case</span> 3:
<a name="l00103"></a>00103     <span class="keywordflow">case</span> 252:
<a name="l00104"></a>00104     <span class="keywordflow">case</span> 253:
<a name="l00105"></a>00105     <span class="keywordflow">case</span> 254:
<a name="l00106"></a>00106     <span class="keywordflow">case</span> 255:
<a name="l00107"></a>00107     <span class="keywordflow">case</span> 372:
<a name="l00108"></a>00108     <span class="keywordflow">case</span> 375:
<a name="l00109"></a>00109     <span class="keywordflow">case</span> 376:
<a name="l00110"></a>00110       <span class="keywordflow">break</span>;
<a name="l00111"></a>00111     <span class="keywordflow">default</span>:
<a name="l00112"></a>00112     {
<a name="l00113"></a>00113       pre_network_message = <span class="keyword">false</span>;
<a name="l00114"></a>00114       <span class="comment">// Decode messages that do not only happen once per (re)connect.</span>
<a name="l00115"></a>00115       <span class="keywordflow">switch</span> (msg.key())
<a name="l00116"></a>00116       {
<a name="l00117"></a>00117         <span class="keyword">using namespace </span>keys;
<a name="l00118"></a>00118         <span class="keywordflow">case</span> ERROR:
<a name="l00119"></a>00119           <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#2779cc22d1b308d478c74fd4105d8ec3" title="This function is called if an ERROR message is received.">error_message_received</a>(msg); 
<a name="l00120"></a>00120           <span class="keywordflow">break</span>;
<a name="l00121"></a>00121         <span class="keywordflow">case</span> PING:                      <span class="comment">// No target</span>
<a name="l00122"></a>00122           <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#61f1caf7c83a2bdef5d6d75968754fcd" title="This function is called when a PING message is received.">decode_ping</a>(msg);
<a name="l00123"></a>00123           <span class="keywordflow">break</span>;
<a name="l00124"></a>00124         <span class="keywordflow">case</span> NICK:
<a name="l00125"></a>00125         {
<a name="l00126"></a>00126           <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb" title="Server side nick pair.">M_server_session_nicks</a>.<a class="code" href="classNickPair.html#9465671d1e586bef124481d32fbdff7b" title="Process own nick changes.">nick_received</a>(msg.param(0)))
<a name="l00127"></a>00127           {
<a name="l00128"></a>00128             fully_processed = <span class="keyword">false</span>;
<a name="l00129"></a>00129             <span class="keywordflow">break</span>;
<a name="l00130"></a>00130           }
<a name="l00131"></a>00131           <span class="comment">// It was my own nick change.</span>
<a name="l00132"></a>00132           <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#d7db39997b22c1d5f8fb7014eb438a50" title="Returns a pointer to my Nick object.">mynick</a>()-&gt;serverside_nick_changed_to(msg.server_session(), <a class="code" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb" title="Server side nick pair.">M_server_session_nicks</a>.<a class="code" href="classNickPair.html#9ac7a7129697b0c86dc1a3131ad8bafd" title="Returns the last NICK received.">in_nick</a>());
<a name="l00133"></a>00133           <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>())
<a name="l00134"></a>00134           {
<a name="l00135"></a>00135             <span class="comment">// FIXME: We should only pass nick changes to the client that the client itself requested.</span>
<a name="l00136"></a>00136             <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session().client_in_nick() == msg.param(0));
<a name="l00137"></a>00137             <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a> prefix(msg);
<a name="l00138"></a>00138             <span class="comment">// For now, pass everything on to the client.</span>
<a name="l00139"></a>00139             <a class="code" href="classMessageOut.html" title="An output message.">MessageOut</a> msgout(<a class="code" href="Priority_8cc.html#18032271e548be4e8a0bacc13c4785f0" title="Return the default priority for command.">default_priority</a>(keys::NICK));
<a name="l00140"></a>00140             <span class="comment">// FIXME: client_out_nick() should be updated first (is currently equal to client_in_nick, so no change needed now).</span>
<a name="l00141"></a>00141             <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#4cd26e4bddc74ee29d48d62eb36998ec" title="Return the current ClientSession.">client_session</a>().<a class="code" href="classClientSession.html#b241a7f7189af7a21af82dff45277a0a" title="Send an output message to this session.">queue_msg</a>(msgout &lt;&lt; prefix &lt;&lt; keys::NICK &lt;&lt; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session().client_out_nick());
<a name="l00142"></a>00142             <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#d7db39997b22c1d5f8fb7014eb438a50" title="Returns a pointer to my Nick object.">mynick</a>()-&gt;clientside_nick_changed_to(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session(), <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session().client_out_nick());
<a name="l00143"></a>00143           }
<a name="l00144"></a>00144           <span class="keywordflow">if</span> (<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#46893748168791f5ec68caca30b07af1" title="Return the state of the connection.">state</a>() == <a class="code" href="ServerConnection_8h.html#8bd3e377b5e0da0a7d154425796c9ef23fcdc806883284d1121056468515dc4d" title="NICK with real nick name sent.">real_nick_sent</a>)
<a name="l00145"></a>00145           {
<a name="l00146"></a>00146             <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#7a4001d7bc147f108c7214dbe3332bae" title="Change the state of the connection from from to to.">change_state</a>(<a class="code" href="ServerConnection_8h.html#8bd3e377b5e0da0a7d154425796c9ef23fcdc806883284d1121056468515dc4d" title="NICK with real nick name sent.">real_nick_sent</a>, <a class="code" href="ServerConnection_8h.html#8bd3e377b5e0da0a7d154425796c9ef27bbffd5a8ff7ab2301e2e2a7df9be974" title="NICK with real nick accepted.">real_nick_accepted</a>); 
<a name="l00147"></a>00147             <a class="code" href="classServerSession.html#b9951249d1d8f2b0004f783fbd0a8fbf" title="Send a JOIN to the server for every channel we are on.">send_rejoins</a>();
<a name="l00148"></a>00148           }
<a name="l00149"></a>00149           <span class="keywordflow">break</span>;
<a name="l00150"></a>00150         }
<a name="l00151"></a>00151         <span class="keywordflow">case</span> MODE:
<a name="l00152"></a>00152           <span class="keywordflow">if</span> (msg.param(0) == <a class="code" href="classServerSession.html#3bf7aaaf37f650ecae8ede46fddb06e6" title="Server session nick pair.">nicks</a>().<a class="code" href="classNickPair.html#9ac7a7129697b0c86dc1a3131ad8bafd" title="Returns the last NICK received.">in_nick</a>())
<a name="l00153"></a>00153             <a class="code" href="classServerSession.html#eb14b6156420f8413e9d3e905688783d" title="Return my user mode.">user_mode</a>().<a class="code" href="classUserMode.html#174150bea143592e5d35906863f7c1ad" title="Decode the MODE message msg and store the user mode.">new_server_message_received</a>(msg);
<a name="l00154"></a>00154           <span class="keywordflow">else</span>
<a name="l00155"></a>00155             fully_processed = <span class="keyword">false</span>;
<a name="l00156"></a>00156           <span class="keywordflow">break</span>;
<a name="l00157"></a>00157         <span class="keywordflow">case</span> 221:
<a name="l00158"></a>00158           <span class="keywordflow">break</span>;
<a name="l00159"></a>00159         <span class="keywordflow">case</span> 396:       <span class="comment">// ... is now your hidden host</span>
<a name="l00160"></a>00160         {
<a name="l00161"></a>00161           <a class="code" href="classServerSession.html#d2bce757189035208f2ae4ccdf4b981d" title="Accessor for underlying server connection object.">server_connection</a>().<a class="code" href="classServerConnection.html#7a4001d7bc147f108c7214dbe3332bae" title="Change the state of the connection from from to to.">change_state</a>(<a class="code" href="ServerConnection_8h.html#8bd3e377b5e0da0a7d154425796c9ef27fedf7842abd845d06c188fc73e5775b" title="Login message to X sent.">login_sent</a>, <a class="code" href="ServerConnection_8h.html#8bd3e377b5e0da0a7d154425796c9ef23fcdc806883284d1121056468515dc4d" title="NICK with real nick name sent.">real_nick_sent</a>);
<a name="l00162"></a>00162           <span class="comment">// Numeric 396 has the hidden hostname in parameter 1.</span>
<a name="l00163"></a>00163           <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#f6e0f1ea7930f0a4365f200e06d9e3ac" title="Set host name string as returned by hostname().">set_hostname</a>(msg.param(1));
<a name="l00164"></a>00164           <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#d2bce757189035208f2ae4ccdf4b981d" title="Accessor for underlying server connection object.">server_connection</a>().<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>())
<a name="l00165"></a>00165           {
<a name="l00166"></a>00166             <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#4cd26e4bddc74ee29d48d62eb36998ec" title="Return the current ClientSession.">client_session</a>().<a class="code" href="classClientSession.html#e02f193e9cf25c04003982afb9769294" title="Pass message msg on to the client with default priority, changing only the target:...">queue_msg_me_as_is</a>(msg);
<a name="l00167"></a>00167             <a class="code" href="classServerSession.html#3bf7aaaf37f650ecae8ede46fddb06e6" title="Server session nick pair.">nicks</a>().<a class="code" href="classNickPair.html#ecb19961cb641c51d7ce1279b736c9ac" title="Send a new NICK message to the socket.">send_nick</a>(<a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session().client_in_nick());
<a name="l00168"></a>00168           }
<a name="l00169"></a>00169           <span class="keywordflow">else</span>
<a name="l00170"></a>00170             <a class="code" href="classServerSession.html#b9951249d1d8f2b0004f783fbd0a8fbf" title="Send a JOIN to the server for every channel we are on.">send_rejoins</a>();
<a name="l00171"></a>00171           <span class="keywordflow">break</span>;
<a name="l00172"></a>00172         }
<a name="l00173"></a>00173         <span class="keywordflow">case</span> JOIN:
<a name="l00174"></a>00174         {
<a name="l00175"></a>00175           <span class="comment">// Handle JOIN's from the pipeline.</span>
<a name="l00176"></a>00176           boost::shared_ptr&lt;Channel&gt; channel(<a class="code" href="classServerSession.html#4bdb5a1812f8ce94d41a22ada9d961a5" title="Return a pointer to the channel in the pipeline, if any. Channel is removed from...">join_pipeline</a>(msg.param(0)));
<a name="l00177"></a>00177           <span class="keywordflow">if</span> (!channel.get())
<a name="l00178"></a>00178           {
<a name="l00179"></a>00179             <span class="comment">// Not in the pipeline. Process normally.</span>
<a name="l00180"></a>00180             <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(!<a class="code" href="classServerSession.html#d2bce757189035208f2ae4ccdf4b981d" title="Accessor for underlying server connection object.">server_connection</a>().secondary_connection());
<a name="l00181"></a>00181             fully_processed = <span class="keyword">false</span>;
<a name="l00182"></a>00182             <span class="keywordflow">break</span>;
<a name="l00183"></a>00183           }
<a name="l00184"></a>00184           <a class="code" href="classTarget.html#2c165d7d990cb17103e22c9b81bc14d4">Target::serverside_add_channel</a>(*<span class="keyword">this</span>, channel);
<a name="l00185"></a>00185           <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#d2bce757189035208f2ae4ccdf4b981d" title="Accessor for underlying server connection object.">server_connection</a>().secondary_connection())
<a name="l00186"></a>00186             channel-&gt;reset_received_names();
<a name="l00187"></a>00187           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d" title="Channels for which we sent a JOIN as part of a reconnect.">M_join_pipeline</a>.empty())
<a name="l00188"></a>00188           {
<a name="l00189"></a>00189             <span class="comment">// This was the last join.</span>
<a name="l00190"></a>00190             <span class="comment">// FIXME: switch ServerConnection etc.</span>
<a name="l00191"></a>00191             <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#940746ce01ed023a81ec25b6c942c760" title="Swap primary and secondary connection.">swap_primary_and_secondary_connection</a>();
<a name="l00192"></a>00192             <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#dcace57442141b0264f670f5e944f9a9" title="Return the secondary server connection. Only valid if has_secondary_server_connection...">secondary_server_connection</a>()-&gt;disconnect();
<a name="l00193"></a>00193           }
<a name="l00194"></a>00194           <span class="keywordflow">break</span>;
<a name="l00195"></a>00195         }
<a name="l00196"></a>00196         <span class="keywordflow">default</span>:
<a name="l00197"></a>00197           fully_processed = <span class="keyword">false</span>;
<a name="l00198"></a>00198           <span class="keywordflow">break</span>;
<a name="l00199"></a>00199       }
<a name="l00200"></a>00200       <span class="keywordflow">break</span>;
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202   }
<a name="l00203"></a>00203   <span class="keywordflow">if</span> (pre_network_message)
<a name="l00204"></a>00204   {
<a name="l00205"></a>00205     <span class="comment">// Pass message on as-is, only replacing my own nick name at param 0.</span>
<a name="l00206"></a>00206     <a class="code" href="classPrefix.html" title="A class representing a message prefix.">Prefix</a> prefix(msg);
<a name="l00207"></a>00207     <a class="code" href="classMessageOut.html" title="An output message.">MessageOut</a> msgout(<a class="code" href="Priority_8cc.html#18032271e548be4e8a0bacc13c4785f0" title="Return the default priority for command.">default_priority</a>(msg.key()));
<a name="l00208"></a>00208     <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#4cd26e4bddc74ee29d48d62eb36998ec" title="Return the current ClientSession.">client_session</a>().<a class="code" href="classClientSession.html#b241a7f7189af7a21af82dff45277a0a" title="Send an output message to this session.">queue_msg</a>(msgout &lt;&lt; prefix &lt;&lt; msg.key() &lt;&lt; <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#4cd26e4bddc74ee29d48d62eb36998ec" title="Return the current ClientSession.">client_session</a>().<a class="code" href="classClientSession.html#8f4367fccef8c55504cacbe0191e55ca" title="FIXME.">client_out_nick</a>() &lt;&lt; msg.params(1));
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fully_processed)
<a name="l00211"></a>00211   {
<a name="l00212"></a>00212     <span class="keywordflow">if</span> (!<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>())
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       <span class="comment">// Decode messages other than PING, ERROR, own nick changes.</span>
<a name="l00215"></a>00215       <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#db9bc35ffd8b4c4df8fcd662701ce1a4" title="Called when a new message was received from the associated server.">new_server_message_received</a>(msg);
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 <span class="preprocessor">#ifdef CWDEBUG</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>    <span class="keywordflow">else</span>
<a name="l00219"></a>00219       Dout(dc::warning, <span class="stringliteral">"IGNORING secondary server message: "</span> &lt;&lt; msg);
<a name="l00220"></a>00220 <span class="preprocessor">#endif</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>  }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223   <span class="comment">// Turn debug output on again, if it was suppressed.</span>
<a name="l00224"></a>00224   Debug(<span class="keywordflow">if</span> (suppress_debug_output) libcw_do.on());
<a name="l00225"></a>00225 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="169ec4740ea2440fe079642c47ff94e5"></a><!-- doxytag: member="ServerSession::network_connection_terminated" ref="169ec4740ea2440fe079642c47ff94e5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::network_connection_terminated           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A read(2) on the socket returned 0. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00521">521</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="ServerSession_8h-source.html#l00066">M_disconnect_reason</a>, <a class="el" href="ServerSession_8h-source.html#l00053">M_server_connection</a>, <a class="el" href="ServerConnection_8h-source.html#l00123">ServerConnection::secondary_connection()</a>, <a class="el" href="Identity_8cc-source.html#l00753">Identity::send_notice()</a>, and <a class="el" href="ServerConnection_8h-source.html#l00144">ServerConnection::server()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00522"></a>00522 {
<a name="l00523"></a>00523 <span class="preprocessor">#ifdef CWDEBUG</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span>  <a class="code" href="structdebug_1_1SecondaryConnection.html">debug::SecondaryConnection</a> dummy(<a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#9c9bc8e0255bda21c78f1cf8b21fe285" title="Return true if this is a secondary connection.">secondary_connection</a>());
<a name="l00525"></a>00525 <span class="preprocessor">#endif</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span>  <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"ServerSession::network_connection_terminated()"</span>);
<a name="l00527"></a>00527 
<a name="l00528"></a>00528   std::string disconnect_reason;
<a name="l00529"></a>00529   <span class="keywordflow">if</span> (<a class="code" href="classServerSession.html#4c304033b289394bda21ce125abb3106" title="An error message that should be sent to the client if the connection is lost, if...">M_disconnect_reason</a>.empty())
<a name="l00530"></a>00530     disconnect_reason = <span class="stringliteral">"EOF from server"</span>;
<a name="l00531"></a>00531   <span class="keywordflow">else</span>
<a name="l00532"></a>00532     disconnect_reason = <a class="code" href="classServerSession.html#4c304033b289394bda21ce125abb3106" title="An error message that should be sent to the client if the connection is lost, if...">M_disconnect_reason</a>;
<a name="l00533"></a>00533 
<a name="l00534"></a>00534   <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#ad20e55e2b6fbe3022e63c3223abae08" title="Send a notice to the client.">send_notice</a>(<span class="stringliteral">"Lost connection with "</span> + <a class="code" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac" title="The owning object.">M_server_connection</a>.<a class="code" href="classServerConnection.html#c31da41babaae4b0f781f6e6f1e177ad" title="Returns the server that we are connected with or connecting to.">server</a>()-&gt;get_irc_name() + <span class="stringliteral">": "</span> + disconnect_reason);
<a name="l00535"></a>00535 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b9951249d1d8f2b0004f783fbd0a8fbf"></a><!-- doxytag: member="ServerSession::send_rejoins" ref="b9951249d1d8f2b0004f783fbd0a8fbf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerSession::send_rejoins           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a JOIN to the server for every channel we are on. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8cc-source.html#l00239">239</a> of file <a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00062">ASSERT</a>, <a class="el" href="Identity_8h-source.html#l00208">Identity::client_session()</a>, <a class="el" href="Priority_8cc-source.html#l00023">default_priority()</a>, <a class="el" href="debug_8h-source.html#l00214">DoutEntering</a>, <a class="el" href="IdentityReference_8h-source.html#l00037">IdentityReference::identity()</a>, <a class="el" href="ClientSession_8h-source.html#l00107">ClientSession::joined_channels()</a>, <a class="el" href="ServerSession_8h-source.html#l00123">joined_channels()</a>, <a class="el" href="ServerSession_8h-source.html#l00065">M_join_pipeline</a>, and <a class="el" href="ServerSession_8h-source.html#l00135">queue_msg()</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00240"></a>00240 {
<a name="l00241"></a>00241   <a class="code" href="debug_8h.html#3dc350a548c074386c3ec0271d16a7a8" title="Debugging macro.">DoutEntering</a>(dc::debug, <span class="stringliteral">"ServerSession::send_rejoins()"</span>);
<a name="l00242"></a>00242   <span class="comment">// Sent a JOIN for each channel that the client still thinks it is on.</span>
<a name="l00243"></a>00243   <a class="code" href="classMessageOut.html" title="An output message.">MessageOut</a> msgout(<a class="code" href="Priority_8cc.html#18032271e548be4e8a0bacc13c4785f0" title="Return the default priority for command.">default_priority</a>(keys::JOIN));
<a name="l00244"></a>00244   msgout &lt;&lt; keys::JOIN;
<a name="l00245"></a>00245   <span class="keywordtype">size_t</span> total_buffer_size = 8; <span class="comment">// "JOIN \r\n\0"</span>
<a name="l00246"></a>00246   <span class="keywordtype">bool</span> first_channel = <span class="keyword">true</span>;
<a name="l00247"></a>00247   <span class="keywordtype">bool</span> first_key = <span class="keyword">true</span>;
<a name="l00248"></a>00248   std::string keys;
<a name="l00249"></a>00249   <span class="comment">// First do all channels that have a key.</span>
<a name="l00250"></a>00250   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> with_keys = 1; with_keys &gt;= 0; --with_keys)
<a name="l00251"></a>00251   {
<a name="l00252"></a>00252     <span class="keywordflow">for</span> (ClientSession::joined_channels_type::iterator iter = <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().client_session().<a class="code" href="classServerSession.html#1cdbba5e545c0759814b92d0c578cc02" title="Return reference to map with joined channels.">joined_channels</a>().begin();
<a name="l00253"></a>00253          iter != <a class="code" href="classIdentityReference.html#d6ecfc07c4dba821671a00c8ced70b04" title="Returns a const reference to the underlying identity.">identity</a>().<a class="code" href="classIdentity.html#4cd26e4bddc74ee29d48d62eb36998ec" title="Return the current ClientSession.">client_session</a>().<a class="code" href="classClientSession.html#0d0c69d5e0674d086ac4ec09362664b3" title="Return reference to map with known channels.">joined_channels</a>().end(); ++iter)
<a name="l00254"></a>00254     {
<a name="l00255"></a>00255       boost::shared_ptr&lt;Channel&gt; channel(boost::static_pointer_cast&lt;Channel&gt;(iter-&gt;second));
<a name="l00256"></a>00256       <span class="keywordflow">if</span> (with_keys == channel-&gt;has_key())
<a name="l00257"></a>00257       {
<a name="l00258"></a>00258         <span class="keywordflow">for</span>(;;)
<a name="l00259"></a>00259         {
<a name="l00260"></a>00260           total_buffer_size +=
<a name="l00261"></a>00261               (first_channel ? 0 : 1) +                 <span class="comment">// 1 for comma.</span>
<a name="l00262"></a>00262               channel-&gt;out_name(*this).size() +
<a name="l00263"></a>00263               (with_keys ? 1 + channel-&gt;key().size() : 0);      <span class="comment">// 1 for space or comma.</span>
<a name="l00264"></a>00264           <span class="keywordflow">if</span> (total_buffer_size &lt;= 512)                 <span class="comment">// We always break out here the first or second time,</span>
<a name="l00265"></a>00265             <span class="keywordflow">break</span>;                                              <span class="comment">// because 8 + MAXCHANLEN (~200) + 1 + MAXKEYLEN (23) &lt;= 512.</span>
<a name="l00266"></a>00266           <span class="keywordflow">if</span> (!first_key)
<a name="l00267"></a>00267             msgout &lt;&lt; keys;
<a name="l00268"></a>00268           <a class="code" href="classServerSession.html#6921a52d4541f22dc13cf48b743baf19" title="Queue message msg.">queue_msg</a>(msgout);                            <span class="comment">// Send message constructed so far.</span>
<a name="l00269"></a>00269           msgout &lt;&lt; keys::JOIN;                         <span class="comment">// This resets the msgout.</span>
<a name="l00270"></a>00270           total_buffer_size = 8;
<a name="l00271"></a>00271           first_channel = <span class="keyword">true</span>;
<a name="l00272"></a>00272           first_key = <span class="keyword">true</span>;
<a name="l00273"></a>00273         }
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (first_channel)
<a name="l00275"></a>00275         {
<a name="l00276"></a>00276           msgout &lt;&lt; channel;
<a name="l00277"></a>00277           first_channel = <span class="keyword">false</span>;
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279         <span class="keywordflow">else</span>
<a name="l00280"></a>00280         {
<a name="l00281"></a>00281           msgout &lt;&lt; <a class="code" href="classJustInTimeCatenate.html" title="A just-in-time manipulator. This causes the passed token to be catenated to the previous...">JustInTimeCatenate</a>(<span class="charliteral">','</span>);
<a name="l00282"></a>00282           msgout &lt;&lt; <a class="code" href="classJustInTimeCatenate.html" title="A just-in-time manipulator. This causes the passed token to be catenated to the previous...">JustInTimeCatenate</a>(channel);
<a name="l00283"></a>00283         }
<a name="l00284"></a>00284         <span class="keywordflow">if</span> (with_keys)
<a name="l00285"></a>00285         {
<a name="l00286"></a>00286           <span class="keywordflow">if</span> (first_key)
<a name="l00287"></a>00287           {
<a name="l00288"></a>00288             keys = channel-&gt;key();
<a name="l00289"></a>00289             first_key = <span class="keyword">false</span>;
<a name="l00290"></a>00290           }
<a name="l00291"></a>00291           <span class="keywordflow">else</span>
<a name="l00292"></a>00292           {
<a name="l00293"></a>00293             keys += <span class="charliteral">','</span>;
<a name="l00294"></a>00294             keys += channel-&gt;key();
<a name="l00295"></a>00295           }
<a name="l00296"></a>00296         }
<a name="l00297"></a>00297         <span class="comment">// Remember that we sent a re-JOIN for this channel.</span>
<a name="l00298"></a>00298 <span class="preprocessor">#if defined(CWDEBUG) || defined(DEBUG)</span>
<a name="l00299"></a>00299 <span class="preprocessor"></span>        std::pair&lt;join_pipeline_type::iterator, bool&gt; res =
<a name="l00300"></a>00300 <span class="preprocessor">#endif</span>
<a name="l00301"></a>00301 <span class="preprocessor"></span>            <a class="code" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d" title="Channels for which we sent a JOIN as part of a reconnect.">M_join_pipeline</a>.insert(join_pipeline_type::value_type(channel-&gt;out_name(*<span class="keyword">this</span>), channel));
<a name="l00302"></a>00302         <a class="code" href="debug_8h.html#ca68c0d4ac8df0838e209fb5300f7be3" title="Assert if debugging is turned on.">ASSERT</a>(res.second);
<a name="l00303"></a>00303       }
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305   }
<a name="l00306"></a>00306   <span class="comment">// Finish up.</span>
<a name="l00307"></a>00307   <span class="keywordflow">if</span> (!first_key)
<a name="l00308"></a>00308     msgout &lt;&lt; keys;
<a name="l00309"></a>00309   <span class="keywordflow">if</span> (!first_channel)
<a name="l00310"></a>00310     <a class="code" href="classServerSession.html#6921a52d4541f22dc13cf48b743baf19" title="Queue message msg.">queue_msg</a>(msgout);
<a name="l00311"></a>00311 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="4d77270ae01dc69a5003b1c8b55bceac"></a><!-- doxytag: member="ServerSession::M_server_connection" ref="4d77270ae01dc69a5003b1c8b55bceac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServerConnection.html">ServerConnection</a>&amp; <a class="el" href="classServerSession.html#4d77270ae01dc69a5003b1c8b55bceac">ServerSession::M_server_connection</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The owning object. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00053">53</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00462">detected_network()</a>, <a class="el" href="ServerSession_8cc-source.html#l00515">force_quit()</a>, <a class="el" href="ServerSession_8cc-source.html#l00389">found_network_name()</a>, <a class="el" href="ServerSession_8cc-source.html#l00521">network_connection_terminated()</a>, <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>, <a class="el" href="ServerSession_8h-source.html#l00178">server_connection()</a>, <a class="el" href="ServerSession_8cc-source.html#l00322">start_authentication()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00334">~ServerSession()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8c9b60b19714b52380178659552a1bbb"></a><!-- doxytag: member="ServerSession::M_message_event_server" ref="8c9b60b19714b52380178659552a1bbb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Matcher_8h.html#5fde8f2c4a1179dd4e5a92fd67974b4b">MatcherEventServer</a> <a class="el" href="classServerSession.html#8c9b60b19714b52380178659552a1bbb">ServerSession::M_message_event_server</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Event server for incoming messages. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00054">54</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00112">message_event_server()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>

</div>
</div><p>
<a class="anchor" name="48f039a3ed11a3168453b3fb5d41adfb"></a><!-- doxytag: member="ServerSession::M_server_session_nicks" ref="48f039a3ed11a3168453b3fb5d41adfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNickPair.html">NickPair</a> <a class="el" href="classServerSession.html#48f039a3ed11a3168453b3fb5d41adfb">ServerSession::M_server_session_nicks</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classServer.html" title="An IRC server.">Server</a> side nick pair. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00055">55</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>, and <a class="el" href="ServerSession_8h-source.html#l00117">nicks()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b509d89122b3453fc2e4cbfab27a7db7"></a><!-- doxytag: member="ServerSession::M_joined_channels" ref="b509d89122b3453fc2e4cbfab27a7db7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServerSession.html#f51d96a79af64d54b0582813370fc1e6">joined_channels_type</a> <a class="el" href="classServerSession.html#b509d89122b3453fc2e4cbfab27a7db7">ServerSession::M_joined_channels</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Serverside lookup map for channels joined by this identity. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00056">56</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00123">joined_channels()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2e3e8affeb1200b8216be93dcdbdfe4a"></a><!-- doxytag: member="ServerSession::M_user_mode" ref="2e3e8affeb1200b8216be93dcdbdfe4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classUserMode.html">UserMode</a> <a class="el" href="classServerSession.html#2e3e8affeb1200b8216be93dcdbdfe4a">ServerSession::M_user_mode</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
My user mode. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00057">57</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00129">user_mode()</a>.</p>

</div>
</div><p>
<a class="anchor" name="833dd459ff7c33a866ae2dc9eb1899fd"></a><!-- doxytag: member="ServerSession::M_auth_state" ref="833dd459ff7c33a866ae2dc9eb1899fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classAuthState.html">AuthState</a>&gt; <a class="el" href="classServerSession.html#833dd459ff7c33a866ae2dc9eb1899fd">ServerSession::M_auth_state</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer object with temporary authentication state information. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00058">58</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00094">auth_ping_argument()</a>, <a class="el" href="ServerSession_8cc-source.html#l00327">authentication_successful()</a>, <a class="el" href="ServerSession_8h-source.html#l00091">set_auth_ping_argument()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00322">start_authentication()</a>.</p>

</div>
</div><p>
<a class="anchor" name="44a94d5a4f05f14cfc58a5e405c44f3b"></a><!-- doxytag: member="ServerSession::M_output_queue" ref="44a94d5a4f05f14cfc58a5e405c44f3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQueue.html">Queue</a> <a class="el" href="classServerSession.html#44a94d5a4f05f14cfc58a5e405c44f3b">ServerSession::M_output_queue</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> for output messages. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00059">59</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00135">queue_msg()</a>.</p>

</div>
</div><p>
<a class="anchor" name="725aec1cd2f088db41e63c29c24caf47"></a><!-- doxytag: member="ServerSession::M_who_queue" ref="725aec1cd2f088db41e63c29c24caf47" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="classWhoRequest.html">WhoRequest</a>&gt; <a class="el" href="classServerSession.html#725aec1cd2f088db41e63c29c24caf47">ServerSession::M_who_queue</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="classQueue.html" title="A queue for messages to be sent to the server.">Queue</a> storing WHO request messages. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00060">60</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00141">current_who_request()</a>, <a class="el" href="ServerSession_8h-source.html#l00149">pop_who_request()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00347">send_who_write_event()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0e7c11897ab54294ed465f86ec07a2b9"></a><!-- doxytag: member="ServerSession::M_i_support" ref="0e7c11897ab54294ed465f86ec07a2b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classISupport.html">ISupport</a> <a class="el" href="classServerSession.html#0e7c11897ab54294ed465f86ec07a2b9">ServerSession::M_i_support</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Object that stores the numeric 005 information. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00061">61</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00462">detected_network()</a>, <a class="el" href="ServerSession_8h-source.html#l00166">i_support()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>

</div>
</div><p>
<a class="anchor" name="043f215cb536278feb27ab40e09c01fd"></a><!-- doxytag: member="ServerSession::M_network_name" ref="043f215cb536278feb27ab40e09c01fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classServerSession.html#043f215cb536278feb27ab40e09c01fd">ServerSession::M_network_name</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Temporary storage of the network name as decoded from numeric 001, until numeric 005 is received. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00062">62</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00389">found_network_name()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e3e1df1bcbb8d400040fc535d2270614"></a><!-- doxytag: member="ServerSession::S_server_sessions" ref="e3e1df1bcbb8d400040fc535d2270614" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classServerSession.html#e3e1df1bcbb8d400040fc535d2270614">ServerSession::S_server_sessions</a> = 0<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Total number of server session objects. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00063">63</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8h-source.html#l00073">ServerSession()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00334">~ServerSession()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a64046568f18d4396b33f9661661dfb8"></a><!-- doxytag: member="ServerSession::M_umodes" ref="a64046568f18d4396b33f9661661dfb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classServerSession.html#a64046568f18d4396b33f9661661dfb8">ServerSession::M_umodes</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The user modes as received in numeric 004. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00064">64</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00462">detected_network()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3610722ed15fae0db0a04657abf1ea7d"></a><!-- doxytag: member="ServerSession::M_join_pipeline" ref="3610722ed15fae0db0a04657abf1ea7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServerSession.html#b210adf362d50bfba64dcc9a9d28fccd">join_pipeline_type</a> <a class="el" href="classServerSession.html#3610722ed15fae0db0a04657abf1ea7d">ServerSession::M_join_pipeline</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Channels for which we sent a JOIN as part of a reconnect. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00065">65</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00227">join_pipeline()</a>, <a class="el" href="ServerSession_8cc-source.html#l00032">new_message_received()</a>, and <a class="el" href="ServerSession_8cc-source.html#l00239">send_rejoins()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4c304033b289394bda21ce125abb3106"></a><!-- doxytag: member="ServerSession::M_disconnect_reason" ref="4c304033b289394bda21ce125abb3106" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classServerSession.html#4c304033b289394bda21ce125abb3106">ServerSession::M_disconnect_reason</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An error message that should be sent to the client if the connection is lost, if any. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00066">66</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00521">network_connection_terminated()</a>, and <a class="el" href="ServerSession_8h-source.html#l00175">set_disconnect_reason()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ff50b0591d529f0a69d9c9f05695f716"></a><!-- doxytag: member="ServerSession::M_detected_network" ref="ff50b0591d529f0a69d9c9f05695f716" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBool.html">Bool</a> <a class="el" href="classServerSession.html#ff50b0591d529f0a69d9c9f05695f716">ServerSession::M_detected_network</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
True if the network is fully detected. 
<p>

<p>Definition at line <a class="el" href="ServerSession_8h-source.html#l00069">69</a> of file <a class="el" href="ServerSession_8h-source.html">ServerSession.h</a>.</p>

<p>Referenced by <a class="el" href="ServerSession_8cc-source.html#l00462">detected_network()</a>, and <a class="el" href="ServerConnection_8cc-source.html#l00333">ServerConnection::send_pong_and_mode()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ServerSession_8h-source.html">ServerSession.h</a><li><a class="el" href="ServerSession_8cc-source.html">ServerSession.cc</a></ul>
</div>
<hr>

<TABLE WIDTH=100% BORDER=0 CELLSPACING=0 CELLPADDING=0>
<TR>
<TH ALIGN=left BGCOLOR="#e8feff"><ADDRESS>Copyright &copy; 2005-2007 Carlo Wood.&nbsp; All rights reserved.</ADDRESS></TH>
</TR>
</TABLE>

</DIV>
</BODY>
</HTML>

